<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>   1
   2
   3
   4
   5
   6
   7
   8
   9
  10
  11
  12
  13
  14
  15
  16
  17
  18
  19
  20
  21
  22
  23
  24
  25
  26
  27
  28
  29
  30
  31
  32
  33
  34
  35
  36
  37
  38
  39
  40
  41
  42
  43
  44
  45
  46
  47
  48
  49
  50
  51
  52
  53
  54
  55
  56
  57
  58
  59
  60
  61
  62
  63
  64
  65
  66
  67
  68
  69
  70
  71
  72
  73
  74
  75
  76
  77
  78
  79
  80
  81
  82
  83
  84
  85
  86
  87
  88
  89
  90
  91
  92
  93
  94
  95
  96
  97
  98
  99
 100
 101
 102
 103
 104
 105
 106
 107
 108
 109
 110
 111
 112
 113
 114
 115
 116
 117
 118
 119
 120
 121
 122
 123
 124
 125
 126
 127
 128
 129
 130
 131
 132
 133
 134
 135
 136
 137
 138
 139
 140
 141
 142
 143
 144
 145
 146
 147
 148
 149
 150
 151
 152
 153
 154
 155
 156
 157
 158
 159
 160
 161
 162
 163
 164
 165
 166
 167
 168
 169
 170
 171
 172
 173
 174
 175
 176
 177
 178
 179
 180
 181
 182
 183
 184
 185
 186
 187
 188
 189
 190
 191
 192
 193
 194
 195
 196
 197
 198
 199
 200
 201
 202
 203
 204
 205
 206
 207
 208
 209
 210
 211
 212
 213
 214
 215
 216
 217
 218
 219
 220
 221
 222
 223
 224
 225
 226
 227
 228
 229
 230
 231
 232
 233
 234
 235
 236
 237
 238
 239
 240
 241
 242
 243
 244
 245
 246
 247
 248
 249
 250
 251
 252
 253
 254
 255
 256
 257
 258
 259
 260
 261
 262
 263
 264
 265
 266
 267
 268
 269
 270
 271
 272
 273
 274
 275
 276
 277
 278
 279
 280
 281
 282
 283
 284
 285
 286
 287
 288
 289
 290
 291
 292
 293
 294
 295
 296
 297
 298
 299
 300
 301
 302
 303
 304
 305
 306
 307
 308
 309
 310
 311
 312
 313
 314
 315
 316
 317
 318
 319
 320
 321
 322
 323
 324
 325
 326
 327
 328
 329
 330
 331
 332
 333
 334
 335
 336
 337
 338
 339
 340
 341
 342
 343
 344
 345
 346
 347
 348
 349
 350
 351
 352
 353
 354
 355
 356
 357
 358
 359
 360
 361
 362
 363
 364
 365
 366
 367
 368
 369
 370
 371
 372
 373
 374
 375
 376
 377
 378
 379
 380
 381
 382
 383
 384
 385
 386
 387
 388
 389
 390
 391
 392
 393
 394
 395
 396
 397
 398
 399
 400
 401
 402
 403
 404
 405
 406
 407
 408
 409
 410
 411
 412
 413
 414
 415
 416
 417
 418
 419
 420
 421
 422
 423
 424
 425
 426
 427
 428
 429
 430
 431
 432
 433
 434
 435
 436
 437
 438
 439
 440
 441
 442
 443
 444
 445
 446
 447
 448
 449
 450
 451
 452
 453
 454
 455
 456
 457
 458
 459
 460
 461
 462
 463
 464
 465
 466
 467
 468
 469
 470
 471
 472
 473
 474
 475
 476
 477
 478
 479
 480
 481
 482
 483
 484
 485
 486
 487
 488
 489
 490
 491
 492
 493
 494
 495
 496
 497
 498
 499
 500
 501
 502
 503
 504
 505
 506
 507
 508
 509
 510
 511
 512
 513
 514
 515
 516
 517
 518
 519
 520
 521
 522
 523
 524
 525
 526
 527
 528
 529
 530
 531
 532
 533
 534
 535
 536
 537
 538
 539
 540
 541
 542
 543
 544
 545
 546
 547
 548
 549
 550
 551
 552
 553
 554
 555
 556
 557
 558
 559
 560
 561
 562
 563
 564
 565
 566
 567
 568
 569
 570
 571
 572
 573
 574
 575
 576
 577
 578
 579
 580
 581
 582
 583
 584
 585
 586
 587
 588
 589
 590
 591
 592
 593
 594
 595
 596
 597
 598
 599
 600
 601
 602
 603
 604
 605
 606
 607
 608
 609
 610
 611
 612
 613
 614
 615
 616
 617
 618
 619
 620
 621
 622
 623
 624
 625
 626
 627
 628
 629
 630
 631
 632
 633
 634
 635
 636
 637
 638
 639
 640
 641
 642
 643
 644
 645
 646
 647
 648
 649
 650
 651
 652
 653
 654
 655
 656
 657
 658
 659
 660
 661
 662
 663
 664
 665
 666
 667
 668
 669
 670
 671
 672
 673
 674
 675
 676
 677
 678
 679
 680
 681
 682
 683
 684
 685
 686
 687
 688
 689
 690
 691
 692
 693
 694
 695
 696
 697
 698
 699
 700
 701
 702
 703
 704
 705
 706
 707
 708
 709
 710
 711
 712
 713
 714
 715
 716
 717
 718
 719
 720
 721
 722
 723
 724
 725
 726
 727
 728
 729
 730
 731
 732
 733
 734
 735
 736
 737
 738
 739
 740
 741
 742
 743
 744
 745
 746
 747
 748
 749
 750
 751
 752
 753
 754
 755
 756
 757
 758
 759
 760
 761
 762
 763
 764
 765
 766
 767
 768
 769
 770
 771
 772
 773
 774
 775
 776
 777
 778
 779
 780
 781
 782
 783
 784
 785
 786
 787
 788
 789
 790
 791
 792
 793
 794
 795
 796
 797
 798
 799
 800
 801
 802
 803
 804
 805
 806
 807
 808
 809
 810
 811
 812
 813
 814
 815
 816
 817
 818
 819
 820
 821
 822
 823
 824
 825
 826
 827
 828
 829
 830
 831
 832
 833
 834
 835
 836
 837
 838
 839
 840
 841
 842
 843
 844
 845
 846
 847
 848
 849
 850
 851
 852
 853
 854
 855
 856
 857
 858
 859
 860
 861
 862
 863
 864
 865
 866
 867
 868
 869
 870
 871
 872
 873
 874
 875
 876
 877
 878
 879
 880
 881
 882
 883
 884
 885
 886
 887
 888
 889
 890
 891
 892
 893
 894
 895
 896
 897
 898
 899
 900
 901
 902
 903
 904
 905
 906
 907
 908
 909
 910
 911
 912
 913
 914
 915
 916
 917
 918
 919
 920
 921
 922
 923
 924
 925
 926
 927
 928
 929
 930
 931
 932
 933
 934
 935
 936
 937
 938
 939
 940
 941
 942
 943
 944
 945
 946
 947
 948
 949
 950
 951
 952
 953
 954
 955
 956
 957
 958
 959
 960
 961
 962
 963
 964
 965
 966
 967
 968
 969
 970
 971
 972
 973
 974
 975
 976
 977
 978
 979
 980
 981
 982
 983
 984
 985
 986
 987
 988
 989
 990
 991
 992
 993
 994
 995
 996
 997
 998
 999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316
1317
1318
1319
1320
1321
1322
1323
1324
1325
1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354
1355
1356
1357
1358
1359
1360
1361
1362
1363
1364
1365
1366
1367
1368
1369
1370
1371
1372
1373
1374
1375
1376
1377
1378
1379
1380
1381
1382
1383
1384
1385
1386
1387
1388
1389
1390
1391
1392
1393
1394
1395
1396
1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408
1409
1410
1411
1412
1413
1414
1415
1416
1417
1418
1419
1420
1421
1422
1423
1424
1425
1426
1427
1428
1429
1430
1431
1432
1433
1434
1435
1436
1437
1438
1439
1440
1441
1442
1443
1444
1445
1446
1447
1448
1449
1450
1451
1452
1453
1454
1455
1456
1457
1458
1459
1460
1461
1462
1463
1464
1465
1466
1467
1468
1469
1470
1471
1472
1473
1474
1475
1476
1477
1478
1479
1480
1481
1482
1483
1484
1485
1486
1487
1488
1489
1490
1491
1492
1493
1494
1495
1496
1497
1498
1499
1500
1501
1502
1503
1504
1505
1506
1507
1508
1509
1510
1511
1512
1513
1514
1515
1516
1517
1518
1519
1520
1521
1522
1523
1524
1525
1526
1527
1528
1529
1530
1531
1532
1533
1534
1535
1536
1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
1547
1548
1549
1550
1551
1552
1553
1554
1555
1556
1557
1558
1559
1560
1561
1562
1563
1564
1565
1566
1567
1568
1569
1570
1571
1572
1573
1574
1575
1576
1577
1578
1579
1580
1581
1582
1583
1584
1585
1586
1587
1588
1589
1590
1591
1592
1593
1594
1595
1596
1597
1598
1599
1600
1601
1602
1603
1604
1605
1606
1607
1608
1609
1610
1611
1612
1613
1614
1615
1616
1617
1618
1619
1620
1621
1622
1623
1624
1625
1626
1627
1628
1629
1630
1631
1632
1633
1634
1635
1636
1637
1638
1639
1640
1641
1642
1643
1644
1645
1646
1647
1648
1649
1650
1651
1652
1653
1654
1655
1656
1657
1658
1659
1660
1661
1662
1663
1664
1665
1666
1667
1668
1669
1670
1671
1672
1673
1674
1675
1676
1677
1678
1679
1680
1681
1682
1683
1684
1685
1686
1687
1688
1689
1690
1691
1692
1693
1694
1695
1696
1697
1698
1699
1700
1701
1702
1703
1704
1705
1706
1707
1708
1709
1710
1711
1712
1713
1714
1715
1716
1717
1718
1719
1720
1721
1722
1723
1724
1725
1726
1727
1728
1729
1730
1731
1732
1733
1734
1735
1736
1737
1738
1739
1740
1741
1742
1743
1744
1745
1746
1747
1748
1749
1750
1751
1752
1753
1754
1755
1756
1757
1758
1759
1760
1761
1762
1763
1764
1765
1766
1767
1768
1769
1770
1771
1772
1773
1774
1775
1776
1777
1778
1779
1780
1781
1782
1783
1784
1785
1786
1787
1788
1789
1790
1791
1792
1793
1794
1795
1796
1797
1798
1799
1800
1801
1802
1803
1804
1805
1806
1807
1808
1809
1810
1811
1812
1813
1814
1815
1816
1817
1818
1819
1820
1821
1822
1823
1824
1825
1826
1827
1828
1829
1830
1831
1832
1833
1834
1835
1836
1837
1838
1839
1840
1841
1842
1843
1844
1845
1846
1847
1848
1849
1850
1851
1852
1853
1854
1855
1856
1857
1858
1859
1860
1861
1862
1863
1864
1865
1866
1867
1868
1869
1870
1871
1872
1873
1874
1875
1876
1877
1878
1879
1880
1881
1882
1883
1884
1885
1886
1887
1888
1889
1890
1891
1892
1893
1894
1895
1896
1897
1898
1899
1900
1901
1902
1903
1904
1905
1906
1907
1908
1909
1910
1911
1912
1913
1914
1915
1916
1917
1918
1919
1920
1921
1922
1923
1924
1925
1926
1927
1928
1929
1930
1931
1932
1933
1934
1935
1936
1937
1938
1939
1940
1941
1942
1943
1944
1945
1946
1947
1948
1949
1950
1951
1952
1953
1954
1955
1956
1957
1958
1959
1960
1961
1962
1963
1964
1965
1966
1967
1968
1969
1970
1971
1972
1973
1974
1975
1976
1977
1978
1979
1980
1981
1982
1983
1984
1985
1986
1987
1988
1989
1990
1991
1992
1993
1994
1995
1996
1997
1998
1999
2000
2001
2002
2003
2004
2005
2006
2007
2008
2009
2010
2011
2012
2013
2014
2015
2016
2017
2018
2019
2020
2021
2022
2023
2024
2025
2026
2027
2028
2029
2030
2031
2032
2033
2034
2035
2036
2037
2038
2039
2040
2041
2042
2043
2044
2045
2046
2047
2048
2049
2050
2051
2052
2053
2054
2055
2056
2057
2058
2059
2060
2061
2062
2063
2064
2065
2066
2067
2068
2069
2070
2071
2072
2073
2074
2075
2076
2077
2078
2079
2080
2081
2082
2083
2084
2085
2086
2087
2088
2089
2090
2091
2092
2093
2094
2095
2096
2097
2098
2099
2100
2101
2102
2103
2104
2105
2106
2107
2108
2109
2110
2111
2112
2113
2114
2115
2116
2117
2118
2119
2120
2121
2122
2123
2124
2125
2126
2127
2128
2129
2130
2131
2132
2133
2134
2135
2136
2137
2138
2139
2140
2141
2142
2143
2144
2145
2146
2147
2148
2149
2150
2151
2152
2153
2154
2155
2156
2157
2158
2159
2160
2161
2162
2163
2164
2165
2166
2167
2168
2169
2170
2171
2172
2173
2174
2175
2176
2177
2178
2179
2180
2181
2182
2183
2184
2185
2186
2187
2188
2189
2190
2191
2192
2193
2194
2195
2196
2197
2198
2199
2200
2201
2202
2203
2204
2205
2206
2207
2208
2209
2210
2211
2212
2213
2214
2215
2216
2217
2218
2219
2220
2221
2222
2223
2224
2225
2226
2227
2228
2229
2230
2231
2232
2233
2234
2235
2236
2237
2238
2239
2240
2241
2242
2243
2244
2245
2246
2247
2248
2249
2250
2251
2252
2253
2254
2255
2256
2257
2258
2259
2260
2261
2262
2263
2264
2265
2266
2267
2268
2269
2270
2271
2272
2273
2274
2275
2276
2277
2278
2279
2280
2281
2282
2283
2284
2285
2286
2287
2288
2289
2290
2291
2292
2293
2294
2295
2296
2297
2298
2299
2300
2301
2302
2303
2304
2305
2306
2307
2308
2309
2310
2311
2312
2313
2314
2315
2316
2317
2318
2319
2320
2321
2322
2323
2324
2325
2326
2327
2328
2329
2330
2331
2332
2333
2334
2335
2336
2337
2338
2339
2340
2341
2342
2343
2344
2345
2346
2347
2348
2349
2350
2351
2352
2353
2354
2355
2356
2357
2358
2359
2360
2361
2362
2363
2364
2365
2366
2367
2368
2369
2370
2371
2372
2373
2374
2375
2376
2377
2378
2379
2380
2381
2382
2383
2384
2385
2386
2387
2388
2389
2390
2391
2392
2393
2394
2395
2396
2397
2398
2399
2400
2401
2402
2403
2404
2405
2406
2407
2408
2409
2410
2411
2412
2413
2414
2415
2416
2417
2418
2419
2420
2421
2422
2423
2424
2425
2426
2427
2428
2429
2430
2431
2432
2433
2434
2435
2436
2437
2438
2439
2440
2441
2442
2443
2444
2445
2446
2447
2448
2449
2450
2451
2452
2453
2454
2455
2456
2457
2458
2459
2460
2461
2462
2463
2464
2465
2466
2467
2468
2469
2470
2471
2472
2473
2474
2475
2476
2477
2478
2479
2480
2481
2482
2483
2484
2485
2486
2487
2488
2489
2490
2491
2492
2493
2494
2495
2496
2497
2498
2499
2500
2501
2502
2503
2504
2505
2506
2507
2508
2509
2510
2511
2512
2513
2514
2515
2516
2517
2518
2519
2520
2521
2522
2523
2524
2525
2526
2527
2528
2529
2530
2531
2532
2533
2534
2535
2536
2537
2538
2539
2540
2541
2542
2543
2544
2545
2546
2547
2548
2549
2550
2551
2552
2553
2554
2555
2556
2557
2558
2559
2560
2561
2562
2563
2564
2565
2566
2567
2568
2569
2570
2571
2572
2573
2574
2575
2576
2577
2578
2579
2580
2581
2582
2583
2584
2585
2586
2587
2588
2589
2590
2591
2592
2593
2594
2595
2596
2597
2598
2599
2600
2601
2602
2603
2604
2605
2606
2607
2608
2609
2610
2611
2612
2613
2614
2615
2616
2617
2618
2619
2620
2621
2622
2623
2624
2625
2626
2627
2628
2629
2630
2631
2632
2633
2634
2635
2636
2637
2638
2639
2640
2641
2642
2643
2644
2645
2646
2647
2648
2649
2650
2651
2652
2653
2654
2655
2656
2657
2658
2659
2660
2661
2662
2663
2664
2665
2666
2667
2668
2669
2670
2671
2672
2673
2674
2675
2676
2677
2678
2679
2680
2681
2682
2683
2684
2685
2686
2687
2688
2689
2690
2691
2692
2693
2694
2695
2696
2697
2698
2699
2700
2701
2702
2703
2704
2705
2706
2707
2708
2709
2710
2711
2712
2713
2714
2715
2716
2717
2718
2719
2720
2721
2722
2723
2724
2725
2726
2727
2728
2729
2730
2731
2732
2733
2734
2735
2736
2737
2738
2739
2740
2741
2742
2743
2744
2745
2746
2747
2748
2749
2750
2751
2752
2753
2754
2755
2756
2757
2758
2759
2760
2761
2762
2763
2764
2765
2766
2767
2768
2769
2770
2771
2772
2773
2774
2775
2776
2777
2778
2779
2780
2781
2782
2783
2784
2785
2786
2787
2788
2789
2790
2791
2792
2793
2794
2795
2796
2797
2798
2799
2800
2801
2802
2803
2804
2805
2806
2807
2808
2809
2810
2811
2812
2813
2814
2815
2816
2817
2818
2819
2820
2821
2822
2823
2824
2825
2826
2827
2828
2829
2830
2831
2832
2833
2834
2835
2836
2837
2838
2839
2840
2841
2842
2843
2844
2845
2846
2847
2848
2849
2850
2851
2852
2853
2854
2855
2856
2857
2858
2859
2860
2861
2862
2863
2864
2865
2866
2867
2868
2869
2870
2871
2872
2873
2874
2875
2876
2877
2878
2879
2880
2881
2882
2883
2884
2885
2886
2887
2888
2889
2890
2891
2892
2893
2894
2895
2896
2897
2898
2899
2900
2901
2902
2903
2904
2905
2906
2907
2908
2909
2910
2911
2912
2913
2914
2915
2916
2917
2918
2919
2920
2921
2922
2923
2924
2925
2926
2927
2928
2929
2930
2931
2932
2933
2934
2935
2936
2937
2938
2939
2940
2941
2942
2943
2944
2945
2946
2947
2948
2949
2950
2951
2952
2953
2954
2955
2956
2957
2958
2959
2960
2961
2962
2963
2964
2965
2966
2967
2968
2969
2970
2971
2972
2973
2974
2975
2976
2977
2978
2979
2980
2981
2982
2983
2984
2985
2986
2987
2988
2989
2990
2991
2992
2993
2994
2995
2996
2997
2998
2999
3000
3001
3002
3003
3004
3005
3006
3007
3008
3009
3010
3011
3012
3013
3014
3015
3016
3017
3018
3019
3020
3021
3022
3023
3024
3025
3026
3027
3028
3029
3030
3031
3032
3033
3034
3035
3036
3037
3038
3039
3040
3041
3042
3043
3044
3045
3046
3047
3048
3049
3050
3051
3052
3053
3054
3055
3056
3057
3058
3059
3060
3061
3062
3063
3064
3065
3066
3067
3068
3069
3070
3071
3072
3073
3074
3075
3076
3077
3078
3079
3080
3081
3082
3083
3084
3085
3086
3087
3088
3089
3090
3091
3092
3093
3094
3095
3096
3097
3098
3099
3100
3101
3102
3103
3104
3105
3106
3107
3108
3109
3110
3111
3112
3113
3114
3115
3116
3117
3118
3119
3120
3121
3122
3123
3124
3125
3126
3127
3128
3129
3130
3131
3132
3133
3134
3135
3136
3137
3138
3139
3140
3141
3142
3143
3144
3145
3146
3147
3148
3149
3150
3151
3152
3153
3154
3155
3156
3157
3158
3159
3160
3161
3162
3163
3164
3165
3166
3167
3168
3169
3170
3171
3172
3173
3174
3175
3176
3177
3178
3179
3180
3181
3182
3183
3184
3185
3186
3187
3188
3189
3190
3191
3192
3193
3194
3195
3196
3197
3198
3199
3200
3201
3202
3203
3204
3205
3206
3207
3208
3209
3210
3211
3212
3213
3214
3215
3216
3217
3218
3219
3220
3221
3222
3223
3224
3225
3226
3227
3228
3229
3230
3231
3232
3233
3234
3235
3236
3237
3238
3239
3240
3241
3242
3243
3244
3245
3246
3247
3248
3249
3250
3251
3252
3253
3254
3255
3256</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="gbab-1"></a><span class="cm">/* png.h - header file for PNG reference library</span>
<a name="gbab-2"></a><span class="cm"> *</span>
<a name="gbab-3"></a><span class="cm"> * libpng version 1.6.23, June 9, 2016</span>
<a name="gbab-4"></a><span class="cm"> *</span>
<a name="gbab-5"></a><span class="cm"> * Copyright (c) 1998-2002,2004,2006-2016 Glenn Randers-Pehrson</span>
<a name="gbab-6"></a><span class="cm"> * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)</span>
<a name="gbab-7"></a><span class="cm"> * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)</span>
<a name="gbab-8"></a><span class="cm"> *</span>
<a name="gbab-9"></a><span class="cm"> * This code is released under the libpng license (See LICENSE, below)</span>
<a name="gbab-10"></a><span class="cm"> *</span>
<a name="gbab-11"></a><span class="cm"> * Authors and maintainers:</span>
<a name="gbab-12"></a><span class="cm"> *   libpng versions 0.71, May 1995, through 0.88, January 1996: Guy Schalnat</span>
<a name="gbab-13"></a><span class="cm"> *   libpng versions 0.89, June 1996, through 0.96, May 1997: Andreas Dilger</span>
<a name="gbab-14"></a><span class="cm"> *   libpng versions 0.97, January 1998, through 1.6.23, June 9, 2016:</span>
<a name="gbab-15"></a><span class="cm"> *     Glenn Randers-Pehrson.</span>
<a name="gbab-16"></a><span class="cm"> *   See also &quot;Contributing Authors&quot;, below.</span>
<a name="gbab-17"></a><span class="cm"> */</span>
<a name="gbab-18"></a>
<a name="gbab-19"></a><span class="cm">/*</span>
<a name="gbab-20"></a><span class="cm"> * COPYRIGHT NOTICE, DISCLAIMER, and LICENSE:</span>
<a name="gbab-21"></a><span class="cm"> *</span>
<a name="gbab-22"></a><span class="cm"> * If you modify libpng you may insert additional notices immediately following</span>
<a name="gbab-23"></a><span class="cm"> * this sentence.</span>
<a name="gbab-24"></a><span class="cm"> *</span>
<a name="gbab-25"></a><span class="cm"> * This code is released under the libpng license.</span>
<a name="gbab-26"></a><span class="cm"> *</span>
<a name="gbab-27"></a><span class="cm"> * Some files in the &quot;contrib&quot; directory and some configure-generated</span>
<a name="gbab-28"></a><span class="cm"> * files that are distributed with libpng have other copyright owners and</span>
<a name="gbab-29"></a><span class="cm"> * are released under other open source licenses.</span>
<a name="gbab-30"></a><span class="cm"> *</span>
<a name="gbab-31"></a><span class="cm"> * libpng versions 1.0.7, July 1, 2000 through 1.6.23, June 9, 2016 are</span>
<a name="gbab-32"></a><span class="cm"> * Copyright (c) 2000-2002, 2004, 2006-2016 Glenn Randers-Pehrson, are</span>
<a name="gbab-33"></a><span class="cm"> * derived from libpng-1.0.6, and are distributed according to the same</span>
<a name="gbab-34"></a><span class="cm"> * disclaimer and license as libpng-1.0.6 with the following individuals</span>
<a name="gbab-35"></a><span class="cm"> * added to the list of Contributing Authors:</span>
<a name="gbab-36"></a><span class="cm"> *</span>
<a name="gbab-37"></a><span class="cm"> *    Simon-Pierre Cadieux</span>
<a name="gbab-38"></a><span class="cm"> *    Eric S. Raymond</span>
<a name="gbab-39"></a><span class="cm"> *    Mans Rullgard</span>
<a name="gbab-40"></a><span class="cm"> *    Cosmin Truta</span>
<a name="gbab-41"></a><span class="cm"> *    Gilles Vollant</span>
<a name="gbab-42"></a><span class="cm"> *    James Yu</span>
<a name="gbab-43"></a><span class="cm"> *</span>
<a name="gbab-44"></a><span class="cm"> * and with the following additions to the disclaimer:</span>
<a name="gbab-45"></a><span class="cm"> *</span>
<a name="gbab-46"></a><span class="cm"> *    There is no warranty against interference with your enjoyment of the</span>
<a name="gbab-47"></a><span class="cm"> *    library or against infringement.  There is no warranty that our</span>
<a name="gbab-48"></a><span class="cm"> *    efforts or the library will fulfill any of your particular purposes</span>
<a name="gbab-49"></a><span class="cm"> *    or needs.  This library is provided with all faults, and the entire</span>
<a name="gbab-50"></a><span class="cm"> *    risk of satisfactory quality, performance, accuracy, and effort is with</span>
<a name="gbab-51"></a><span class="cm"> *    the user.</span>
<a name="gbab-52"></a><span class="cm"> *</span>
<a name="gbab-53"></a><span class="cm"> * Some files in the &quot;contrib&quot; directory have other copyright owners and</span>
<a name="gbab-54"></a><span class="cm"> * are released under other open source licenses.</span>
<a name="gbab-55"></a><span class="cm"> *</span>
<a name="gbab-56"></a><span class="cm"> *</span>
<a name="gbab-57"></a><span class="cm"> * libpng versions 0.97, January 1998, through 1.0.6, March 20, 2000, are</span>
<a name="gbab-58"></a><span class="cm"> * Copyright (c) 1998-2000 Glenn Randers-Pehrson, are derived from</span>
<a name="gbab-59"></a><span class="cm"> * libpng-0.96, and are distributed according to the same disclaimer and</span>
<a name="gbab-60"></a><span class="cm"> * license as libpng-0.96, with the following individuals added to the list</span>
<a name="gbab-61"></a><span class="cm"> * of Contributing Authors:</span>
<a name="gbab-62"></a><span class="cm"> *</span>
<a name="gbab-63"></a><span class="cm"> *    Tom Lane</span>
<a name="gbab-64"></a><span class="cm"> *    Glenn Randers-Pehrson</span>
<a name="gbab-65"></a><span class="cm"> *    Willem van Schaik</span>
<a name="gbab-66"></a><span class="cm"> *</span>
<a name="gbab-67"></a><span class="cm"> * Some files in the &quot;scripts&quot; directory have different copyright owners</span>
<a name="gbab-68"></a><span class="cm"> * but are also released under this license.</span>
<a name="gbab-69"></a><span class="cm"> *</span>
<a name="gbab-70"></a><span class="cm"> * libpng versions 0.89, June 1996, through 0.96, May 1997, are</span>
<a name="gbab-71"></a><span class="cm"> * Copyright (c) 1996-1997 Andreas Dilger, are derived from libpng-0.88,</span>
<a name="gbab-72"></a><span class="cm"> * and are distributed according to the same disclaimer and license as</span>
<a name="gbab-73"></a><span class="cm"> * libpng-0.88, with the following individuals added to the list of</span>
<a name="gbab-74"></a><span class="cm"> * Contributing Authors:</span>
<a name="gbab-75"></a><span class="cm"> *</span>
<a name="gbab-76"></a><span class="cm"> *    John Bowler</span>
<a name="gbab-77"></a><span class="cm"> *    Kevin Bracey</span>
<a name="gbab-78"></a><span class="cm"> *    Sam Bushell</span>
<a name="gbab-79"></a><span class="cm"> *    Magnus Holmgren</span>
<a name="gbab-80"></a><span class="cm"> *    Greg Roelofs</span>
<a name="gbab-81"></a><span class="cm"> *    Tom Tanner</span>
<a name="gbab-82"></a><span class="cm"> *</span>
<a name="gbab-83"></a><span class="cm"> * Some files in the &quot;scripts&quot; directory have other copyright owners</span>
<a name="gbab-84"></a><span class="cm"> * but are released under this license.</span>
<a name="gbab-85"></a><span class="cm"> *</span>
<a name="gbab-86"></a><span class="cm"> * libpng versions 0.5, May 1995, through 0.88, January 1996, are</span>
<a name="gbab-87"></a><span class="cm"> * Copyright (c) 1995-1996 Guy Eric Schalnat, Group 42, Inc.</span>
<a name="gbab-88"></a><span class="cm"> *</span>
<a name="gbab-89"></a><span class="cm"> * For the purposes of this copyright and license, &quot;Contributing Authors&quot;</span>
<a name="gbab-90"></a><span class="cm"> * is defined as the following set of individuals:</span>
<a name="gbab-91"></a><span class="cm"> *</span>
<a name="gbab-92"></a><span class="cm"> *    Andreas Dilger</span>
<a name="gbab-93"></a><span class="cm"> *    Dave Martindale</span>
<a name="gbab-94"></a><span class="cm"> *    Guy Eric Schalnat</span>
<a name="gbab-95"></a><span class="cm"> *    Paul Schmidt</span>
<a name="gbab-96"></a><span class="cm"> *    Tim Wegner</span>
<a name="gbab-97"></a><span class="cm"> *</span>
<a name="gbab-98"></a><span class="cm"> * The PNG Reference Library is supplied &quot;AS IS&quot;.  The Contributing Authors</span>
<a name="gbab-99"></a><span class="cm"> * and Group 42, Inc. disclaim all warranties, expressed or implied,</span>
<a name="gbab-100"></a><span class="cm"> * including, without limitation, the warranties of merchantability and of</span>
<a name="gbab-101"></a><span class="cm"> * fitness for any purpose.  The Contributing Authors and Group 42, Inc.</span>
<a name="gbab-102"></a><span class="cm"> * assume no liability for direct, indirect, incidental, special, exemplary,</span>
<a name="gbab-103"></a><span class="cm"> * or consequential damages, which may result from the use of the PNG</span>
<a name="gbab-104"></a><span class="cm"> * Reference Library, even if advised of the possibility of such damage.</span>
<a name="gbab-105"></a><span class="cm"> *</span>
<a name="gbab-106"></a><span class="cm"> * Permission is hereby granted to use, copy, modify, and distribute this</span>
<a name="gbab-107"></a><span class="cm"> * source code, or portions hereof, for any purpose, without fee, subject</span>
<a name="gbab-108"></a><span class="cm"> * to the following restrictions:</span>
<a name="gbab-109"></a><span class="cm"> *</span>
<a name="gbab-110"></a><span class="cm"> *   1. The origin of this source code must not be misrepresented.</span>
<a name="gbab-111"></a><span class="cm"> *</span>
<a name="gbab-112"></a><span class="cm"> *   2. Altered versions must be plainly marked as such and must not</span>
<a name="gbab-113"></a><span class="cm"> *      be misrepresented as being the original source.</span>
<a name="gbab-114"></a><span class="cm"> *</span>
<a name="gbab-115"></a><span class="cm"> *   3. This Copyright notice may not be removed or altered from any</span>
<a name="gbab-116"></a><span class="cm"> *      source or altered source distribution.</span>
<a name="gbab-117"></a><span class="cm"> *</span>
<a name="gbab-118"></a><span class="cm"> * The Contributing Authors and Group 42, Inc. specifically permit, without</span>
<a name="gbab-119"></a><span class="cm"> * fee, and encourage the use of this source code as a component to</span>
<a name="gbab-120"></a><span class="cm"> * supporting the PNG file format in commercial products.  If you use this</span>
<a name="gbab-121"></a><span class="cm"> * source code in a product, acknowledgment is not required but would be</span>
<a name="gbab-122"></a><span class="cm"> * appreciated.</span>
<a name="gbab-123"></a><span class="cm"> *</span>
<a name="gbab-124"></a><span class="cm"> * END OF COPYRIGHT NOTICE, DISCLAIMER, and LICENSE.</span>
<a name="gbab-125"></a><span class="cm"> *</span>
<a name="gbab-126"></a><span class="cm"> * TRADEMARK:</span>
<a name="gbab-127"></a><span class="cm"> *</span>
<a name="gbab-128"></a><span class="cm"> * The name &quot;libpng&quot; has not been registered by the Copyright owner</span>
<a name="gbab-129"></a><span class="cm"> * as a trademark in any jurisdiction.  However, because libpng has</span>
<a name="gbab-130"></a><span class="cm"> * been distributed and maintained world-wide, continually since 1995,</span>
<a name="gbab-131"></a><span class="cm"> * the Copyright owner claims &quot;common-law trademark protection&quot; in any</span>
<a name="gbab-132"></a><span class="cm"> * jurisdiction where common-law trademark is recognized.</span>
<a name="gbab-133"></a><span class="cm"> *</span>
<a name="gbab-134"></a><span class="cm"> * OSI CERTIFICATION:</span>
<a name="gbab-135"></a><span class="cm"> *</span>
<a name="gbab-136"></a><span class="cm"> * Libpng is OSI Certified Open Source Software.  OSI Certified Open Source is</span>
<a name="gbab-137"></a><span class="cm"> * a certification mark of the Open Source Initiative. OSI has not addressed</span>
<a name="gbab-138"></a><span class="cm"> * the additional disclaimers inserted at version 1.0.7.</span>
<a name="gbab-139"></a><span class="cm"> *</span>
<a name="gbab-140"></a><span class="cm"> * EXPORT CONTROL:</span>
<a name="gbab-141"></a><span class="cm"> *</span>
<a name="gbab-142"></a><span class="cm"> * The Copyright owner believes that the Export Control Classification</span>
<a name="gbab-143"></a><span class="cm"> * Number (ECCN) for libpng is EAR99, which means not subject to export</span>
<a name="gbab-144"></a><span class="cm"> * controls or International Traffic in Arms Regulations (ITAR) because</span>
<a name="gbab-145"></a><span class="cm"> * it is open source, publicly available software, that does not contain</span>
<a name="gbab-146"></a><span class="cm"> * any encryption software.  See the EAR, paragraphs 734.3(b)(3) and</span>
<a name="gbab-147"></a><span class="cm"> * 734.7(b).</span>
<a name="gbab-148"></a><span class="cm"> */</span>
<a name="gbab-149"></a>
<a name="gbab-150"></a><span class="cm">/*</span>
<a name="gbab-151"></a><span class="cm"> * A &quot;png_get_copyright&quot; function is available, for convenient use in &quot;about&quot;</span>
<a name="gbab-152"></a><span class="cm"> * boxes and the like:</span>
<a name="gbab-153"></a><span class="cm"> *</span>
<a name="gbab-154"></a><span class="cm"> *     printf(&quot;%s&quot;, png_get_copyright(NULL));</span>
<a name="gbab-155"></a><span class="cm"> *</span>
<a name="gbab-156"></a><span class="cm"> * Also, the PNG logo (in PNG format, of course) is supplied in the</span>
<a name="gbab-157"></a><span class="cm"> * files &quot;pngbar.png&quot; and &quot;pngbar.jpg (88x31) and &quot;pngnow.png&quot; (98x31).</span>
<a name="gbab-158"></a><span class="cm"> */</span>
<a name="gbab-159"></a>
<a name="gbab-160"></a><span class="cm">/*</span>
<a name="gbab-161"></a><span class="cm"> * The contributing authors would like to thank all those who helped</span>
<a name="gbab-162"></a><span class="cm"> * with testing, bug fixes, and patience.  This wouldn&#39;t have been</span>
<a name="gbab-163"></a><span class="cm"> * possible without all of you.</span>
<a name="gbab-164"></a><span class="cm"> *</span>
<a name="gbab-165"></a><span class="cm"> * Thanks to Frank J. T. Wojcik for helping with the documentation.</span>
<a name="gbab-166"></a><span class="cm"> */</span>
<a name="gbab-167"></a>
<a name="gbab-168"></a><span class="cm">/* Note about libpng version numbers:</span>
<a name="gbab-169"></a><span class="cm"> *</span>
<a name="gbab-170"></a><span class="cm"> *    Due to various miscommunications, unforeseen code incompatibilities</span>
<a name="gbab-171"></a><span class="cm"> *    and occasional factors outside the authors&#39; control, version numbering</span>
<a name="gbab-172"></a><span class="cm"> *    on the library has not always been consistent and straightforward.</span>
<a name="gbab-173"></a><span class="cm"> *    The following table summarizes matters since version 0.89c, which was</span>
<a name="gbab-174"></a><span class="cm"> *    the first widely used release:</span>
<a name="gbab-175"></a><span class="cm"> *</span>
<a name="gbab-176"></a><span class="cm"> *    source                 png.h  png.h  shared-lib</span>
<a name="gbab-177"></a><span class="cm"> *    version                string   int  version</span>
<a name="gbab-178"></a><span class="cm"> *    -------                ------ -----  ----------</span>
<a name="gbab-179"></a><span class="cm"> *    0.89c &quot;1.0 beta 3&quot;     0.89      89  1.0.89</span>
<a name="gbab-180"></a><span class="cm"> *    0.90  &quot;1.0 beta 4&quot;     0.90      90  0.90  [should have been 2.0.90]</span>
<a name="gbab-181"></a><span class="cm"> *    0.95  &quot;1.0 beta 5&quot;     0.95      95  0.95  [should have been 2.0.95]</span>
<a name="gbab-182"></a><span class="cm"> *    0.96  &quot;1.0 beta 6&quot;     0.96      96  0.96  [should have been 2.0.96]</span>
<a name="gbab-183"></a><span class="cm"> *    0.97b &quot;1.00.97 beta 7&quot; 1.00.97   97  1.0.1 [should have been 2.0.97]</span>
<a name="gbab-184"></a><span class="cm"> *    0.97c                  0.97      97  2.0.97</span>
<a name="gbab-185"></a><span class="cm"> *    0.98                   0.98      98  2.0.98</span>
<a name="gbab-186"></a><span class="cm"> *    0.99                   0.99      98  2.0.99</span>
<a name="gbab-187"></a><span class="cm"> *    0.99a-m                0.99      99  2.0.99</span>
<a name="gbab-188"></a><span class="cm"> *    1.00                   1.00     100  2.1.0 [100 should be 10000]</span>
<a name="gbab-189"></a><span class="cm"> *    1.0.0      (from here on, the   100  2.1.0 [100 should be 10000]</span>
<a name="gbab-190"></a><span class="cm"> *    1.0.1       png.h string is   10001  2.1.0</span>
<a name="gbab-191"></a><span class="cm"> *    1.0.1a-e    identical to the  10002  from here on, the shared library</span>
<a name="gbab-192"></a><span class="cm"> *    1.0.2       source version)   10002  is 2.V where V is the source code</span>
<a name="gbab-193"></a><span class="cm"> *    1.0.2a-b                      10003  version, except as noted.</span>
<a name="gbab-194"></a><span class="cm"> *    1.0.3                         10003</span>
<a name="gbab-195"></a><span class="cm"> *    1.0.3a-d                      10004</span>
<a name="gbab-196"></a><span class="cm"> *    1.0.4                         10004</span>
<a name="gbab-197"></a><span class="cm"> *    1.0.4a-f                      10005</span>
<a name="gbab-198"></a><span class="cm"> *    1.0.5 (+ 2 patches)           10005</span>
<a name="gbab-199"></a><span class="cm"> *    1.0.5a-d                      10006</span>
<a name="gbab-200"></a><span class="cm"> *    1.0.5e-r                      10100 (not source compatible)</span>
<a name="gbab-201"></a><span class="cm"> *    1.0.5s-v                      10006 (not binary compatible)</span>
<a name="gbab-202"></a><span class="cm"> *    1.0.6 (+ 3 patches)           10006 (still binary incompatible)</span>
<a name="gbab-203"></a><span class="cm"> *    1.0.6d-f                      10007 (still binary incompatible)</span>
<a name="gbab-204"></a><span class="cm"> *    1.0.6g                        10007</span>
<a name="gbab-205"></a><span class="cm"> *    1.0.6h                        10007  10.6h (testing xy.z so-numbering)</span>
<a name="gbab-206"></a><span class="cm"> *    1.0.6i                        10007  10.6i</span>
<a name="gbab-207"></a><span class="cm"> *    1.0.6j                        10007  2.1.0.6j (incompatible with 1.0.0)</span>
<a name="gbab-208"></a><span class="cm"> *    1.0.7beta11-14        DLLNUM  10007  2.1.0.7beta11-14 (binary compatible)</span>
<a name="gbab-209"></a><span class="cm"> *    1.0.7beta15-18           1    10007  2.1.0.7beta15-18 (binary compatible)</span>
<a name="gbab-210"></a><span class="cm"> *    1.0.7rc1-2               1    10007  2.1.0.7rc1-2 (binary compatible)</span>
<a name="gbab-211"></a><span class="cm"> *    1.0.7                    1    10007  (still compatible)</span>
<a name="gbab-212"></a><span class="cm"> *    ...</span>
<a name="gbab-213"></a><span class="cm"> *    1.0.19                  10    10019  10.so.0.19[.0]</span>
<a name="gbab-214"></a><span class="cm"> *    ...</span>
<a name="gbab-215"></a><span class="cm"> *    1.2.56                  13    10256  12.so.0.56[.0]</span>
<a name="gbab-216"></a><span class="cm"> *    ...</span>
<a name="gbab-217"></a><span class="cm"> *    1.5.27                  15    10527  15.so.15.27[.0]</span>
<a name="gbab-218"></a><span class="cm"> *    ...</span>
<a name="gbab-219"></a><span class="cm"> *    1.6.23                  16    10623  16.so.16.23[.0]</span>
<a name="gbab-220"></a><span class="cm"> *</span>
<a name="gbab-221"></a><span class="cm"> *    Henceforth the source version will match the shared-library major</span>
<a name="gbab-222"></a><span class="cm"> *    and minor numbers; the shared-library major version number will be</span>
<a name="gbab-223"></a><span class="cm"> *    used for changes in backward compatibility, as it is intended.  The</span>
<a name="gbab-224"></a><span class="cm"> *    PNG_LIBPNG_VER macro, which is not used within libpng but is available</span>
<a name="gbab-225"></a><span class="cm"> *    for applications, is an unsigned integer of the form xyyzz corresponding</span>
<a name="gbab-226"></a><span class="cm"> *    to the source version x.y.z (leading zeros in y and z).  Beta versions</span>
<a name="gbab-227"></a><span class="cm"> *    were given the previous public release number plus a letter, until</span>
<a name="gbab-228"></a><span class="cm"> *    version 1.0.6j; from then on they were given the upcoming public</span>
<a name="gbab-229"></a><span class="cm"> *    release number plus &quot;betaNN&quot; or &quot;rcNN&quot;.</span>
<a name="gbab-230"></a><span class="cm"> *</span>
<a name="gbab-231"></a><span class="cm"> *    Binary incompatibility exists only when applications make direct access</span>
<a name="gbab-232"></a><span class="cm"> *    to the info_ptr or png_ptr members through png.h, and the compiled</span>
<a name="gbab-233"></a><span class="cm"> *    application is loaded with a different version of the library.</span>
<a name="gbab-234"></a><span class="cm"> *</span>
<a name="gbab-235"></a><span class="cm"> *    DLLNUM will change each time there are forward or backward changes</span>
<a name="gbab-236"></a><span class="cm"> *    in binary compatibility (e.g., when a new feature is added).</span>
<a name="gbab-237"></a><span class="cm"> *</span>
<a name="gbab-238"></a><span class="cm"> * See libpng.txt or libpng.3 for more information.  The PNG specification</span>
<a name="gbab-239"></a><span class="cm"> * is available as a W3C Recommendation and as an ISO Specification,</span>
<a name="gbab-240"></a><span class="cm"> * &lt;http://www.w3.org/TR/2003/REC-PNG-20031110/</span>
<a name="gbab-241"></a><span class="cm"> */</span>
<a name="gbab-242"></a>
<a name="gbab-243"></a><span class="cm">/*</span>
<a name="gbab-244"></a><span class="cm"> * Y2K compliance in libpng:</span>
<a name="gbab-245"></a><span class="cm"> * =========================</span>
<a name="gbab-246"></a><span class="cm"> *</span>
<a name="gbab-247"></a><span class="cm"> *    June 9, 2016</span>
<a name="gbab-248"></a><span class="cm"> *</span>
<a name="gbab-249"></a><span class="cm"> *    Since the PNG Development group is an ad-hoc body, we can&#39;t make</span>
<a name="gbab-250"></a><span class="cm"> *    an official declaration.</span>
<a name="gbab-251"></a><span class="cm"> *</span>
<a name="gbab-252"></a><span class="cm"> *    This is your unofficial assurance that libpng from version 0.71 and</span>
<a name="gbab-253"></a><span class="cm"> *    upward through 1.6.23 are Y2K compliant.  It is my belief that</span>
<a name="gbab-254"></a><span class="cm"> *    earlier versions were also Y2K compliant.</span>
<a name="gbab-255"></a><span class="cm"> *</span>
<a name="gbab-256"></a><span class="cm"> *    Libpng only has two year fields.  One is a 2-byte unsigned integer</span>
<a name="gbab-257"></a><span class="cm"> *    that will hold years up to 65535.  The other, which is deprecated,</span>
<a name="gbab-258"></a><span class="cm"> *    holds the date in text format, and will hold years up to 9999.</span>
<a name="gbab-259"></a><span class="cm"> *</span>
<a name="gbab-260"></a><span class="cm"> *    The integer is</span>
<a name="gbab-261"></a><span class="cm"> *        &quot;png_uint_16 year&quot; in png_time_struct.</span>
<a name="gbab-262"></a><span class="cm"> *</span>
<a name="gbab-263"></a><span class="cm"> *    The string is</span>
<a name="gbab-264"></a><span class="cm"> *        &quot;char time_buffer[29]&quot; in png_struct.  This is no longer used</span>
<a name="gbab-265"></a><span class="cm"> *    in libpng-1.6.x and will be removed from libpng-1.7.0.</span>
<a name="gbab-266"></a><span class="cm"> *</span>
<a name="gbab-267"></a><span class="cm"> *    There are seven time-related functions:</span>
<a name="gbab-268"></a><span class="cm"> *        png.c: png_convert_to_rfc_1123_buffer() in png.c</span>
<a name="gbab-269"></a><span class="cm"> *          (formerly png_convert_to_rfc_1123() prior to libpng-1.5.x and</span>
<a name="gbab-270"></a><span class="cm"> *          png_convert_to_rfc_1152() in error prior to libpng-0.98)</span>
<a name="gbab-271"></a><span class="cm"> *        png_convert_from_struct_tm() in pngwrite.c, called in pngwrite.c</span>
<a name="gbab-272"></a><span class="cm"> *        png_convert_from_time_t() in pngwrite.c</span>
<a name="gbab-273"></a><span class="cm"> *        png_get_tIME() in pngget.c</span>
<a name="gbab-274"></a><span class="cm"> *        png_handle_tIME() in pngrutil.c, called in pngread.c</span>
<a name="gbab-275"></a><span class="cm"> *        png_set_tIME() in pngset.c</span>
<a name="gbab-276"></a><span class="cm"> *        png_write_tIME() in pngwutil.c, called in pngwrite.c</span>
<a name="gbab-277"></a><span class="cm"> *</span>
<a name="gbab-278"></a><span class="cm"> *    All handle dates properly in a Y2K environment.  The</span>
<a name="gbab-279"></a><span class="cm"> *    png_convert_from_time_t() function calls gmtime() to convert from system</span>
<a name="gbab-280"></a><span class="cm"> *    clock time, which returns (year - 1900), which we properly convert to</span>
<a name="gbab-281"></a><span class="cm"> *    the full 4-digit year.  There is a possibility that libpng applications</span>
<a name="gbab-282"></a><span class="cm"> *    are not passing 4-digit years into the png_convert_to_rfc_1123_buffer()</span>
<a name="gbab-283"></a><span class="cm"> *    function, or that they are incorrectly passing only a 2-digit year</span>
<a name="gbab-284"></a><span class="cm"> *    instead of &quot;year - 1900&quot; into the png_convert_from_struct_tm() function,</span>
<a name="gbab-285"></a><span class="cm"> *    but this is not under our control.  The libpng documentation has always</span>
<a name="gbab-286"></a><span class="cm"> *    stated that it works with 4-digit years, and the APIs have been</span>
<a name="gbab-287"></a><span class="cm"> *    documented as such.</span>
<a name="gbab-288"></a><span class="cm"> *</span>
<a name="gbab-289"></a><span class="cm"> *    The tIME chunk itself is also Y2K compliant.  It uses a 2-byte unsigned</span>
<a name="gbab-290"></a><span class="cm"> *    integer to hold the year, and can hold years as large as 65535.</span>
<a name="gbab-291"></a><span class="cm"> *</span>
<a name="gbab-292"></a><span class="cm"> *    zlib, upon which libpng depends, is also Y2K compliant.  It contains</span>
<a name="gbab-293"></a><span class="cm"> *    no date-related code.</span>
<a name="gbab-294"></a><span class="cm"> *</span>
<a name="gbab-295"></a><span class="cm"> *       Glenn Randers-Pehrson</span>
<a name="gbab-296"></a><span class="cm"> *       libpng maintainer</span>
<a name="gbab-297"></a><span class="cm"> *       PNG Development Group</span>
<a name="gbab-298"></a><span class="cm"> */</span>
<a name="gbab-299"></a>
<a name="gbab-300"></a><span class="cp">#ifndef PNG_H</span>
<a name="gbab-301"></a><span class="cp">#define PNG_H</span>
<a name="gbab-302"></a>
<a name="gbab-303"></a><span class="cm">/* This is not the place to learn how to use libpng. The file libpng-manual.txt</span>
<a name="gbab-304"></a><span class="cm"> * describes how to use libpng, and the file example.c summarizes it</span>
<a name="gbab-305"></a><span class="cm"> * with some code on which to build.  This file is useful for looking</span>
<a name="gbab-306"></a><span class="cm"> * at the actual function definitions and structure components.  If that</span>
<a name="gbab-307"></a><span class="cm"> * file has been stripped from your copy of libpng, you can find it at</span>
<a name="gbab-308"></a><span class="cm"> * &lt;http://www.libpng.org/pub/png/libpng-manual.txt&gt;</span>
<a name="gbab-309"></a><span class="cm"> *</span>
<a name="gbab-310"></a><span class="cm"> * If you just need to read a PNG file and don&#39;t want to read the documentation</span>
<a name="gbab-311"></a><span class="cm"> * skip to the end of this file and read the section entitled &#39;simplified API&#39;.</span>
<a name="gbab-312"></a><span class="cm"> */</span>
<a name="gbab-313"></a>
<a name="gbab-314"></a><span class="cm">/* Version information for png.h - this should match the version in png.c */</span>
<a name="gbab-315"></a><span class="cp">#define PNG_LIBPNG_VER_STRING &quot;1.6.23&quot;</span>
<a name="gbab-316"></a><span class="cp">#define PNG_HEADER_VERSION_STRING \</span>
<a name="gbab-317"></a><span class="cp">     &quot; libpng version 1.6.23 - June 9, 2016\n&quot;</span>
<a name="gbab-318"></a>
<a name="gbab-319"></a><span class="cp">#define PNG_LIBPNG_VER_SONUM   16</span>
<a name="gbab-320"></a><span class="cp">#define PNG_LIBPNG_VER_DLLNUM  16</span>
<a name="gbab-321"></a>
<a name="gbab-322"></a><span class="cm">/* These should match the first 3 components of PNG_LIBPNG_VER_STRING: */</span>
<a name="gbab-323"></a><span class="cp">#define PNG_LIBPNG_VER_MAJOR   1</span>
<a name="gbab-324"></a><span class="cp">#define PNG_LIBPNG_VER_MINOR   6</span>
<a name="gbab-325"></a><span class="cp">#define PNG_LIBPNG_VER_RELEASE 23</span>
<a name="gbab-326"></a>
<a name="gbab-327"></a><span class="cm">/* This should match the numeric part of the final component of</span>
<a name="gbab-328"></a><span class="cm"> * PNG_LIBPNG_VER_STRING, omitting any leading zero:</span>
<a name="gbab-329"></a><span class="cm"> */</span>
<a name="gbab-330"></a>
<a name="gbab-331"></a><span class="cp">#define PNG_LIBPNG_VER_BUILD  0</span>
<a name="gbab-332"></a>
<a name="gbab-333"></a><span class="cm">/* Release Status */</span>
<a name="gbab-334"></a><span class="cp">#define PNG_LIBPNG_BUILD_ALPHA    1</span>
<a name="gbab-335"></a><span class="cp">#define PNG_LIBPNG_BUILD_BETA     2</span>
<a name="gbab-336"></a><span class="cp">#define PNG_LIBPNG_BUILD_RC       3</span>
<a name="gbab-337"></a><span class="cp">#define PNG_LIBPNG_BUILD_STABLE   4</span>
<a name="gbab-338"></a><span class="cp">#define PNG_LIBPNG_BUILD_RELEASE_STATUS_MASK 7</span>
<a name="gbab-339"></a>
<a name="gbab-340"></a><span class="cm">/* Release-Specific Flags */</span>
<a name="gbab-341"></a><span class="cp">#define PNG_LIBPNG_BUILD_PATCH    8 </span><span class="cm">/* Can be OR&#39;ed with</span>
<a name="gbab-342"></a><span class="cm">                                       PNG_LIBPNG_BUILD_STABLE only */</span><span class="cp"></span>
<a name="gbab-343"></a><span class="cp">#define PNG_LIBPNG_BUILD_PRIVATE 16 </span><span class="cm">/* Cannot be OR&#39;ed with</span>
<a name="gbab-344"></a><span class="cm">                                       PNG_LIBPNG_BUILD_SPECIAL */</span><span class="cp"></span>
<a name="gbab-345"></a><span class="cp">#define PNG_LIBPNG_BUILD_SPECIAL 32 </span><span class="cm">/* Cannot be OR&#39;ed with</span>
<a name="gbab-346"></a><span class="cm">                                       PNG_LIBPNG_BUILD_PRIVATE */</span><span class="cp"></span>
<a name="gbab-347"></a>
<a name="gbab-348"></a><span class="cp">#define PNG_LIBPNG_BUILD_BASE_TYPE PNG_LIBPNG_BUILD_STABLE</span>
<a name="gbab-349"></a>
<a name="gbab-350"></a><span class="cm">/* Careful here.  At one time, Guy wanted to use 082, but that would be octal.</span>
<a name="gbab-351"></a><span class="cm"> * We must not include leading zeros.</span>
<a name="gbab-352"></a><span class="cm"> * Versions 0.7 through 1.0.0 were in the range 0 to 100 here (only</span>
<a name="gbab-353"></a><span class="cm"> * version 1.0.0 was mis-numbered 100 instead of 10000).  From</span>
<a name="gbab-354"></a><span class="cm"> * version 1.0.1 it&#39;s    xxyyzz, where x=major, y=minor, z=release</span>
<a name="gbab-355"></a><span class="cm"> */</span>
<a name="gbab-356"></a><span class="cp">#define PNG_LIBPNG_VER 10623 </span><span class="cm">/* 1.6.23 */</span><span class="cp"></span>
<a name="gbab-357"></a>
<a name="gbab-358"></a><span class="cm">/* Library configuration: these options cannot be changed after</span>
<a name="gbab-359"></a><span class="cm"> * the library has been built.</span>
<a name="gbab-360"></a><span class="cm"> */</span>
<a name="gbab-361"></a><span class="cp">#ifndef PNGLCONF_H</span>
<a name="gbab-362"></a>    <span class="cm">/* If pnglibconf.h is missing, you can</span>
<a name="gbab-363"></a><span class="cm">     * copy scripts/pnglibconf.h.prebuilt to pnglibconf.h</span>
<a name="gbab-364"></a><span class="cm">     */</span>
<a name="gbab-365"></a><span class="cp">#   include &quot;pnglibconf.h&quot;</span>
<a name="gbab-366"></a><span class="cp">#endif</span>
<a name="gbab-367"></a>
<a name="gbab-368"></a><span class="cp">#ifndef PNG_VERSION_INFO_ONLY</span>
<a name="gbab-369"></a><span class="cm">/* Machine specific configuration. */</span>
<a name="gbab-370"></a><span class="cp">#  include &quot;pngconf.h&quot;</span>
<a name="gbab-371"></a><span class="cp">#endif</span>
<a name="gbab-372"></a>
<a name="gbab-373"></a><span class="cm">/*</span>
<a name="gbab-374"></a><span class="cm"> * Added at libpng-1.2.8</span>
<a name="gbab-375"></a><span class="cm"> *</span>
<a name="gbab-376"></a><span class="cm"> * Ref MSDN: Private as priority over Special</span>
<a name="gbab-377"></a><span class="cm"> * VS_FF_PRIVATEBUILD File *was not* built using standard release</span>
<a name="gbab-378"></a><span class="cm"> * procedures. If this value is given, the StringFileInfo block must</span>
<a name="gbab-379"></a><span class="cm"> * contain a PrivateBuild string.</span>
<a name="gbab-380"></a><span class="cm"> *</span>
<a name="gbab-381"></a><span class="cm"> * VS_FF_SPECIALBUILD File *was* built by the original company using</span>
<a name="gbab-382"></a><span class="cm"> * standard release procedures but is a variation of the standard</span>
<a name="gbab-383"></a><span class="cm"> * file of the same version number. If this value is given, the</span>
<a name="gbab-384"></a><span class="cm"> * StringFileInfo block must contain a SpecialBuild string.</span>
<a name="gbab-385"></a><span class="cm"> */</span>
<a name="gbab-386"></a>
<a name="gbab-387"></a><span class="cp">#ifdef PNG_USER_PRIVATEBUILD </span><span class="cm">/* From pnglibconf.h */</span><span class="cp"></span>
<a name="gbab-388"></a><span class="cp">#  define PNG_LIBPNG_BUILD_TYPE \</span>
<a name="gbab-389"></a><span class="cp">       (PNG_LIBPNG_BUILD_BASE_TYPE | PNG_LIBPNG_BUILD_PRIVATE)</span>
<a name="gbab-390"></a><span class="cp">#else</span>
<a name="gbab-391"></a><span class="cp">#  ifdef PNG_LIBPNG_SPECIALBUILD</span>
<a name="gbab-392"></a><span class="cp">#    define PNG_LIBPNG_BUILD_TYPE \</span>
<a name="gbab-393"></a><span class="cp">         (PNG_LIBPNG_BUILD_BASE_TYPE | PNG_LIBPNG_BUILD_SPECIAL)</span>
<a name="gbab-394"></a><span class="cp">#  else</span>
<a name="gbab-395"></a><span class="cp">#    define PNG_LIBPNG_BUILD_TYPE (PNG_LIBPNG_BUILD_BASE_TYPE)</span>
<a name="gbab-396"></a><span class="cp">#  endif</span>
<a name="gbab-397"></a><span class="cp">#endif</span>
<a name="gbab-398"></a>
<a name="gbab-399"></a><span class="cp">#ifndef PNG_VERSION_INFO_ONLY</span>
<a name="gbab-400"></a>
<a name="gbab-401"></a><span class="cm">/* Inhibit C++ name-mangling for libpng functions but not for system calls. */</span>
<a name="gbab-402"></a><span class="cp">#ifdef __cplusplus</span>
<a name="gbab-403"></a><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="p">{</span>
<a name="gbab-404"></a><span class="cp">#endif </span><span class="cm">/* __cplusplus */</span><span class="cp"></span>
<a name="gbab-405"></a>
<a name="gbab-406"></a><span class="cm">/* Version information for C files, stored in png.c.  This had better match</span>
<a name="gbab-407"></a><span class="cm"> * the version above.</span>
<a name="gbab-408"></a><span class="cm"> */</span>
<a name="gbab-409"></a><span class="cp">#define png_libpng_ver png_get_header_ver(NULL)</span>
<a name="gbab-410"></a>
<a name="gbab-411"></a><span class="cm">/* This file is arranged in several sections:</span>
<a name="gbab-412"></a><span class="cm"> *</span>
<a name="gbab-413"></a><span class="cm"> * 1. [omitted]</span>
<a name="gbab-414"></a><span class="cm"> * 2. Any configuration options that can be specified by for the application</span>
<a name="gbab-415"></a><span class="cm"> *    code when it is built.  (Build time configuration is in pnglibconf.h)</span>
<a name="gbab-416"></a><span class="cm"> * 3. Type definitions (base types are defined in pngconf.h), structure</span>
<a name="gbab-417"></a><span class="cm"> *    definitions.</span>
<a name="gbab-418"></a><span class="cm"> * 4. Exported library functions.</span>
<a name="gbab-419"></a><span class="cm"> * 5. Simplified API.</span>
<a name="gbab-420"></a><span class="cm"> * 6. Implementation options.</span>
<a name="gbab-421"></a><span class="cm"> *</span>
<a name="gbab-422"></a><span class="cm"> * The library source code has additional files (principally pngpriv.h) that</span>
<a name="gbab-423"></a><span class="cm"> * allow configuration of the library.</span>
<a name="gbab-424"></a><span class="cm"> */</span>
<a name="gbab-425"></a>
<a name="gbab-426"></a><span class="cm">/* Section 1: [omitted] */</span>
<a name="gbab-427"></a>
<a name="gbab-428"></a><span class="cm">/* Section 2: run time configuration</span>
<a name="gbab-429"></a><span class="cm"> * See pnglibconf.h for build time configuration</span>
<a name="gbab-430"></a><span class="cm"> *</span>
<a name="gbab-431"></a><span class="cm"> * Run time configuration allows the application to choose between</span>
<a name="gbab-432"></a><span class="cm"> * implementations of certain arithmetic APIs.  The default is set</span>
<a name="gbab-433"></a><span class="cm"> * at build time and recorded in pnglibconf.h, but it is safe to</span>
<a name="gbab-434"></a><span class="cm"> * override these (and only these) settings.  Note that this won&#39;t</span>
<a name="gbab-435"></a><span class="cm"> * change what the library does, only application code, and the</span>
<a name="gbab-436"></a><span class="cm"> * settings can (and probably should) be made on a per-file basis</span>
<a name="gbab-437"></a><span class="cm"> * by setting the #defines before including png.h</span>
<a name="gbab-438"></a><span class="cm"> *</span>
<a name="gbab-439"></a><span class="cm"> * Use macros to read integers from PNG data or use the exported</span>
<a name="gbab-440"></a><span class="cm"> * functions?</span>
<a name="gbab-441"></a><span class="cm"> *   PNG_USE_READ_MACROS: use the macros (see below)  Note that</span>
<a name="gbab-442"></a><span class="cm"> *     the macros evaluate their argument multiple times.</span>
<a name="gbab-443"></a><span class="cm"> *   PNG_NO_USE_READ_MACROS: call the relevant library function.</span>
<a name="gbab-444"></a><span class="cm"> *</span>
<a name="gbab-445"></a><span class="cm"> * Use the alternative algorithm for compositing alpha samples that</span>
<a name="gbab-446"></a><span class="cm"> * does not use division?</span>
<a name="gbab-447"></a><span class="cm"> *   PNG_READ_COMPOSITE_NODIV_SUPPORTED: use the &#39;no division&#39;</span>
<a name="gbab-448"></a><span class="cm"> *      algorithm.</span>
<a name="gbab-449"></a><span class="cm"> *   PNG_NO_READ_COMPOSITE_NODIV: use the &#39;division&#39; algorithm.</span>
<a name="gbab-450"></a><span class="cm"> *</span>
<a name="gbab-451"></a><span class="cm"> * How to handle benign errors if PNG_ALLOW_BENIGN_ERRORS is</span>
<a name="gbab-452"></a><span class="cm"> * false?</span>
<a name="gbab-453"></a><span class="cm"> *   PNG_ALLOW_BENIGN_ERRORS: map calls to the benign error</span>
<a name="gbab-454"></a><span class="cm"> *      APIs to png_warning.</span>
<a name="gbab-455"></a><span class="cm"> * Otherwise the calls are mapped to png_error.</span>
<a name="gbab-456"></a><span class="cm"> */</span>
<a name="gbab-457"></a>
<a name="gbab-458"></a><span class="cm">/* Section 3: type definitions, including structures and compile time</span>
<a name="gbab-459"></a><span class="cm"> * constants.</span>
<a name="gbab-460"></a><span class="cm"> * See pngconf.h for base types that vary by machine/system</span>
<a name="gbab-461"></a><span class="cm"> */</span>
<a name="gbab-462"></a>
<a name="gbab-463"></a><span class="cm">/* This triggers a compiler error in png.c, if png.c and png.h</span>
<a name="gbab-464"></a><span class="cm"> * do not agree upon the version number.</span>
<a name="gbab-465"></a><span class="cm"> */</span>
<a name="gbab-466"></a><span class="k">typedef</span> <span class="kt">char</span><span class="o">*</span> <span class="n">png_libpng_version_1_6_23</span><span class="p">;</span>
<a name="gbab-467"></a>
<a name="gbab-468"></a><span class="cm">/* Basic control structions.  Read libpng-manual.txt or libpng.3 for more info.</span>
<a name="gbab-469"></a><span class="cm"> *</span>
<a name="gbab-470"></a><span class="cm"> * png_struct is the cache of information used while reading or writing a single</span>
<a name="gbab-471"></a><span class="cm"> * PNG file.  One of these is always required, although the simplified API</span>
<a name="gbab-472"></a><span class="cm"> * (below) hides the creation and destruction of it.</span>
<a name="gbab-473"></a><span class="cm"> */</span>
<a name="gbab-474"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_struct_def</span> <span class="n">png_struct</span><span class="p">;</span>
<a name="gbab-475"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_struct</span> <span class="o">*</span> <span class="n">png_const_structp</span><span class="p">;</span>
<a name="gbab-476"></a><span class="k">typedef</span> <span class="n">png_struct</span> <span class="o">*</span> <span class="n">png_structp</span><span class="p">;</span>
<a name="gbab-477"></a><span class="k">typedef</span> <span class="n">png_struct</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_structpp</span><span class="p">;</span>
<a name="gbab-478"></a>
<a name="gbab-479"></a><span class="cm">/* png_info contains information read from or to be written to a PNG file.  One</span>
<a name="gbab-480"></a><span class="cm"> * or more of these must exist while reading or creating a PNG file.  The</span>
<a name="gbab-481"></a><span class="cm"> * information is not used by libpng during read but is used to control what</span>
<a name="gbab-482"></a><span class="cm"> * gets written when a PNG file is created.  &quot;png_get_&quot; function calls read</span>
<a name="gbab-483"></a><span class="cm"> * information during read and &quot;png_set_&quot; functions calls write information</span>
<a name="gbab-484"></a><span class="cm"> * when creating a PNG.</span>
<a name="gbab-485"></a><span class="cm"> * been moved into a separate header file that is not accessible to</span>
<a name="gbab-486"></a><span class="cm"> * applications.  Read libpng-manual.txt or libpng.3 for more info.</span>
<a name="gbab-487"></a><span class="cm"> */</span>
<a name="gbab-488"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_info_def</span> <span class="n">png_info</span><span class="p">;</span>
<a name="gbab-489"></a><span class="k">typedef</span> <span class="n">png_info</span> <span class="o">*</span> <span class="n">png_infop</span><span class="p">;</span>
<a name="gbab-490"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_info</span> <span class="o">*</span> <span class="n">png_const_infop</span><span class="p">;</span>
<a name="gbab-491"></a><span class="k">typedef</span> <span class="n">png_info</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_infopp</span><span class="p">;</span>
<a name="gbab-492"></a>
<a name="gbab-493"></a><span class="cm">/* Types with names ending &#39;p&#39; are pointer types.  The corresponding types with</span>
<a name="gbab-494"></a><span class="cm"> * names ending &#39;rp&#39; are identical pointer types except that the pointer is</span>
<a name="gbab-495"></a><span class="cm"> * marked &#39;restrict&#39;, which means that it is the only pointer to the object</span>
<a name="gbab-496"></a><span class="cm"> * passed to the function.  Applications should not use the &#39;restrict&#39; types;</span>
<a name="gbab-497"></a><span class="cm"> * it is always valid to pass &#39;p&#39; to a pointer with a function argument of the</span>
<a name="gbab-498"></a><span class="cm"> * corresponding &#39;rp&#39; type.  Different compilers have different rules with</span>
<a name="gbab-499"></a><span class="cm"> * regard to type matching in the presence of &#39;restrict&#39;.  For backward</span>
<a name="gbab-500"></a><span class="cm"> * compatibility libpng callbacks never have &#39;restrict&#39; in their parameters and,</span>
<a name="gbab-501"></a><span class="cm"> * consequentially, writing portable application code is extremely difficult if</span>
<a name="gbab-502"></a><span class="cm"> * an attempt is made to use &#39;restrict&#39;.</span>
<a name="gbab-503"></a><span class="cm"> */</span>
<a name="gbab-504"></a><span class="k">typedef</span> <span class="n">png_struct</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_structrp</span><span class="p">;</span>
<a name="gbab-505"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_struct</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_const_structrp</span><span class="p">;</span>
<a name="gbab-506"></a><span class="k">typedef</span> <span class="n">png_info</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_inforp</span><span class="p">;</span>
<a name="gbab-507"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_info</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_const_inforp</span><span class="p">;</span>
<a name="gbab-508"></a>
<a name="gbab-509"></a><span class="cm">/* Three color definitions.  The order of the red, green, and blue, (and the</span>
<a name="gbab-510"></a><span class="cm"> * exact size) is not important, although the size of the fields need to</span>
<a name="gbab-511"></a><span class="cm"> * be png_byte or png_uint_16 (as defined below).</span>
<a name="gbab-512"></a><span class="cm"> */</span>
<a name="gbab-513"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_color_struct</span>
<a name="gbab-514"></a><span class="p">{</span>
<a name="gbab-515"></a>   <span class="n">png_byte</span> <span class="n">red</span><span class="p">;</span>
<a name="gbab-516"></a>   <span class="n">png_byte</span> <span class="n">green</span><span class="p">;</span>
<a name="gbab-517"></a>   <span class="n">png_byte</span> <span class="n">blue</span><span class="p">;</span>
<a name="gbab-518"></a><span class="p">}</span> <span class="n">png_color</span><span class="p">;</span>
<a name="gbab-519"></a><span class="k">typedef</span> <span class="n">png_color</span> <span class="o">*</span> <span class="n">png_colorp</span><span class="p">;</span>
<a name="gbab-520"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_color</span> <span class="o">*</span> <span class="n">png_const_colorp</span><span class="p">;</span>
<a name="gbab-521"></a><span class="k">typedef</span> <span class="n">png_color</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_colorpp</span><span class="p">;</span>
<a name="gbab-522"></a>
<a name="gbab-523"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_color_16_struct</span>
<a name="gbab-524"></a><span class="p">{</span>
<a name="gbab-525"></a>   <span class="n">png_byte</span> <span class="n">index</span><span class="p">;</span>    <span class="cm">/* used for palette files */</span>
<a name="gbab-526"></a>   <span class="n">png_uint_16</span> <span class="n">red</span><span class="p">;</span>   <span class="cm">/* for use in red green blue files */</span>
<a name="gbab-527"></a>   <span class="n">png_uint_16</span> <span class="n">green</span><span class="p">;</span>
<a name="gbab-528"></a>   <span class="n">png_uint_16</span> <span class="n">blue</span><span class="p">;</span>
<a name="gbab-529"></a>   <span class="n">png_uint_16</span> <span class="n">gray</span><span class="p">;</span>  <span class="cm">/* for use in grayscale files */</span>
<a name="gbab-530"></a><span class="p">}</span> <span class="n">png_color_16</span><span class="p">;</span>
<a name="gbab-531"></a><span class="k">typedef</span> <span class="n">png_color_16</span> <span class="o">*</span> <span class="n">png_color_16p</span><span class="p">;</span>
<a name="gbab-532"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_color_16</span> <span class="o">*</span> <span class="n">png_const_color_16p</span><span class="p">;</span>
<a name="gbab-533"></a><span class="k">typedef</span> <span class="n">png_color_16</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_color_16pp</span><span class="p">;</span>
<a name="gbab-534"></a>
<a name="gbab-535"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_color_8_struct</span>
<a name="gbab-536"></a><span class="p">{</span>
<a name="gbab-537"></a>   <span class="n">png_byte</span> <span class="n">red</span><span class="p">;</span>   <span class="cm">/* for use in red green blue files */</span>
<a name="gbab-538"></a>   <span class="n">png_byte</span> <span class="n">green</span><span class="p">;</span>
<a name="gbab-539"></a>   <span class="n">png_byte</span> <span class="n">blue</span><span class="p">;</span>
<a name="gbab-540"></a>   <span class="n">png_byte</span> <span class="n">gray</span><span class="p">;</span>  <span class="cm">/* for use in grayscale files */</span>
<a name="gbab-541"></a>   <span class="n">png_byte</span> <span class="n">alpha</span><span class="p">;</span> <span class="cm">/* for alpha channel files */</span>
<a name="gbab-542"></a><span class="p">}</span> <span class="n">png_color_8</span><span class="p">;</span>
<a name="gbab-543"></a><span class="k">typedef</span> <span class="n">png_color_8</span> <span class="o">*</span> <span class="n">png_color_8p</span><span class="p">;</span>
<a name="gbab-544"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_color_8</span> <span class="o">*</span> <span class="n">png_const_color_8p</span><span class="p">;</span>
<a name="gbab-545"></a><span class="k">typedef</span> <span class="n">png_color_8</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_color_8pp</span><span class="p">;</span>
<a name="gbab-546"></a>
<a name="gbab-547"></a><span class="cm">/*</span>
<a name="gbab-548"></a><span class="cm"> * The following two structures are used for the in-core representation</span>
<a name="gbab-549"></a><span class="cm"> * of sPLT chunks.</span>
<a name="gbab-550"></a><span class="cm"> */</span>
<a name="gbab-551"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_sPLT_entry_struct</span>
<a name="gbab-552"></a><span class="p">{</span>
<a name="gbab-553"></a>   <span class="n">png_uint_16</span> <span class="n">red</span><span class="p">;</span>
<a name="gbab-554"></a>   <span class="n">png_uint_16</span> <span class="n">green</span><span class="p">;</span>
<a name="gbab-555"></a>   <span class="n">png_uint_16</span> <span class="n">blue</span><span class="p">;</span>
<a name="gbab-556"></a>   <span class="n">png_uint_16</span> <span class="n">alpha</span><span class="p">;</span>
<a name="gbab-557"></a>   <span class="n">png_uint_16</span> <span class="n">frequency</span><span class="p">;</span>
<a name="gbab-558"></a><span class="p">}</span> <span class="n">png_sPLT_entry</span><span class="p">;</span>
<a name="gbab-559"></a><span class="k">typedef</span> <span class="n">png_sPLT_entry</span> <span class="o">*</span> <span class="n">png_sPLT_entryp</span><span class="p">;</span>
<a name="gbab-560"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_sPLT_entry</span> <span class="o">*</span> <span class="n">png_const_sPLT_entryp</span><span class="p">;</span>
<a name="gbab-561"></a><span class="k">typedef</span> <span class="n">png_sPLT_entry</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_sPLT_entrypp</span><span class="p">;</span>
<a name="gbab-562"></a>
<a name="gbab-563"></a><span class="cm">/*  When the depth of the sPLT palette is 8 bits, the color and alpha samples</span>
<a name="gbab-564"></a><span class="cm"> *  occupy the LSB of their respective members, and the MSB of each member</span>
<a name="gbab-565"></a><span class="cm"> *  is zero-filled.  The frequency member always occupies the full 16 bits.</span>
<a name="gbab-566"></a><span class="cm"> */</span>
<a name="gbab-567"></a>
<a name="gbab-568"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_sPLT_struct</span>
<a name="gbab-569"></a><span class="p">{</span>
<a name="gbab-570"></a>   <span class="n">png_charp</span> <span class="n">name</span><span class="p">;</span>           <span class="cm">/* palette name */</span>
<a name="gbab-571"></a>   <span class="n">png_byte</span> <span class="n">depth</span><span class="p">;</span>           <span class="cm">/* depth of palette samples */</span>
<a name="gbab-572"></a>   <span class="n">png_sPLT_entryp</span> <span class="n">entries</span><span class="p">;</span>  <span class="cm">/* palette entries */</span>
<a name="gbab-573"></a>   <span class="n">png_int_32</span> <span class="n">nentries</span><span class="p">;</span>      <span class="cm">/* number of palette entries */</span>
<a name="gbab-574"></a><span class="p">}</span> <span class="n">png_sPLT_t</span><span class="p">;</span>
<a name="gbab-575"></a><span class="k">typedef</span> <span class="n">png_sPLT_t</span> <span class="o">*</span> <span class="n">png_sPLT_tp</span><span class="p">;</span>
<a name="gbab-576"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_sPLT_t</span> <span class="o">*</span> <span class="n">png_const_sPLT_tp</span><span class="p">;</span>
<a name="gbab-577"></a><span class="k">typedef</span> <span class="n">png_sPLT_t</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_sPLT_tpp</span><span class="p">;</span>
<a name="gbab-578"></a>
<a name="gbab-579"></a><span class="cp">#ifdef PNG_TEXT_SUPPORTED</span>
<a name="gbab-580"></a><span class="cm">/* png_text holds the contents of a text/ztxt/itxt chunk in a PNG file,</span>
<a name="gbab-581"></a><span class="cm"> * and whether that contents is compressed or not.  The &quot;key&quot; field</span>
<a name="gbab-582"></a><span class="cm"> * points to a regular zero-terminated C string.  The &quot;text&quot; fields can be a</span>
<a name="gbab-583"></a><span class="cm"> * regular C string, an empty string, or a NULL pointer.</span>
<a name="gbab-584"></a><span class="cm"> * However, the structure returned by png_get_text() will always contain</span>
<a name="gbab-585"></a><span class="cm"> * the &quot;text&quot; field as a regular zero-terminated C string (possibly</span>
<a name="gbab-586"></a><span class="cm"> * empty), never a NULL pointer, so it can be safely used in printf() and</span>
<a name="gbab-587"></a><span class="cm"> * other string-handling functions.  Note that the &quot;itxt_length&quot;, &quot;lang&quot;, and</span>
<a name="gbab-588"></a><span class="cm"> * &quot;lang_key&quot; members of the structure only exist when the library is built</span>
<a name="gbab-589"></a><span class="cm"> * with iTXt chunk support.  Prior to libpng-1.4.0 the library was built by</span>
<a name="gbab-590"></a><span class="cm"> * default without iTXt support. Also note that when iTXt *is* supported,</span>
<a name="gbab-591"></a><span class="cm"> * the &quot;lang&quot; and &quot;lang_key&quot; fields contain NULL pointers when the</span>
<a name="gbab-592"></a><span class="cm"> * &quot;compression&quot; field contains * PNG_TEXT_COMPRESSION_NONE or</span>
<a name="gbab-593"></a><span class="cm"> * PNG_TEXT_COMPRESSION_zTXt. Note that the &quot;compression value&quot; is not the</span>
<a name="gbab-594"></a><span class="cm"> * same as what appears in the PNG tEXt/zTXt/iTXt chunk&#39;s &quot;compression flag&quot;</span>
<a name="gbab-595"></a><span class="cm"> * which is always 0 or 1, or its &quot;compression method&quot; which is always 0.</span>
<a name="gbab-596"></a><span class="cm"> */</span>
<a name="gbab-597"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_text_struct</span>
<a name="gbab-598"></a><span class="p">{</span>
<a name="gbab-599"></a>   <span class="kt">int</span>  <span class="n">compression</span><span class="p">;</span>       <span class="cm">/* compression value:</span>
<a name="gbab-600"></a><span class="cm">                             -1: tEXt, none</span>
<a name="gbab-601"></a><span class="cm">                              0: zTXt, deflate</span>
<a name="gbab-602"></a><span class="cm">                              1: iTXt, none</span>
<a name="gbab-603"></a><span class="cm">                              2: iTXt, deflate  */</span>
<a name="gbab-604"></a>   <span class="n">png_charp</span> <span class="n">key</span><span class="p">;</span>          <span class="cm">/* keyword, 1-79 character description of &quot;text&quot; */</span>
<a name="gbab-605"></a>   <span class="n">png_charp</span> <span class="n">text</span><span class="p">;</span>         <span class="cm">/* comment, may be an empty string (ie &quot;&quot;)</span>
<a name="gbab-606"></a><span class="cm">                              or a NULL pointer */</span>
<a name="gbab-607"></a>   <span class="n">png_size_t</span> <span class="n">text_length</span><span class="p">;</span> <span class="cm">/* length of the text string */</span>
<a name="gbab-608"></a>   <span class="n">png_size_t</span> <span class="n">itxt_length</span><span class="p">;</span> <span class="cm">/* length of the itxt string */</span>
<a name="gbab-609"></a>   <span class="n">png_charp</span> <span class="n">lang</span><span class="p">;</span>         <span class="cm">/* language code, 0-79 characters</span>
<a name="gbab-610"></a><span class="cm">                              or a NULL pointer */</span>
<a name="gbab-611"></a>   <span class="n">png_charp</span> <span class="n">lang_key</span><span class="p">;</span>     <span class="cm">/* keyword translated UTF-8 string, 0 or more</span>
<a name="gbab-612"></a><span class="cm">                              chars or a NULL pointer */</span>
<a name="gbab-613"></a><span class="p">}</span> <span class="n">png_text</span><span class="p">;</span>
<a name="gbab-614"></a><span class="k">typedef</span> <span class="n">png_text</span> <span class="o">*</span> <span class="n">png_textp</span><span class="p">;</span>
<a name="gbab-615"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_text</span> <span class="o">*</span> <span class="n">png_const_textp</span><span class="p">;</span>
<a name="gbab-616"></a><span class="k">typedef</span> <span class="n">png_text</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_textpp</span><span class="p">;</span>
<a name="gbab-617"></a><span class="cp">#endif</span>
<a name="gbab-618"></a>
<a name="gbab-619"></a><span class="cm">/* Supported compression types for text in PNG files (tEXt, and zTXt).</span>
<a name="gbab-620"></a><span class="cm"> * The values of the PNG_TEXT_COMPRESSION_ defines should NOT be changed. */</span>
<a name="gbab-621"></a><span class="cp">#define PNG_TEXT_COMPRESSION_NONE_WR -3</span>
<a name="gbab-622"></a><span class="cp">#define PNG_TEXT_COMPRESSION_zTXt_WR -2</span>
<a name="gbab-623"></a><span class="cp">#define PNG_TEXT_COMPRESSION_NONE    -1</span>
<a name="gbab-624"></a><span class="cp">#define PNG_TEXT_COMPRESSION_zTXt     0</span>
<a name="gbab-625"></a><span class="cp">#define PNG_ITXT_COMPRESSION_NONE     1</span>
<a name="gbab-626"></a><span class="cp">#define PNG_ITXT_COMPRESSION_zTXt     2</span>
<a name="gbab-627"></a><span class="cp">#define PNG_TEXT_COMPRESSION_LAST     3  </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-628"></a>
<a name="gbab-629"></a><span class="cm">/* png_time is a way to hold the time in an machine independent way.</span>
<a name="gbab-630"></a><span class="cm"> * Two conversions are provided, both from time_t and struct tm.  There</span>
<a name="gbab-631"></a><span class="cm"> * is no portable way to convert to either of these structures, as far</span>
<a name="gbab-632"></a><span class="cm"> * as I know.  If you know of a portable way, send it to me.  As a side</span>
<a name="gbab-633"></a><span class="cm"> * note - PNG has always been Year 2000 compliant!</span>
<a name="gbab-634"></a><span class="cm"> */</span>
<a name="gbab-635"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_time_struct</span>
<a name="gbab-636"></a><span class="p">{</span>
<a name="gbab-637"></a>   <span class="n">png_uint_16</span> <span class="n">year</span><span class="p">;</span> <span class="cm">/* full year, as in, 1995 */</span>
<a name="gbab-638"></a>   <span class="n">png_byte</span> <span class="n">month</span><span class="p">;</span>   <span class="cm">/* month of year, 1 - 12 */</span>
<a name="gbab-639"></a>   <span class="n">png_byte</span> <span class="n">day</span><span class="p">;</span>     <span class="cm">/* day of month, 1 - 31 */</span>
<a name="gbab-640"></a>   <span class="n">png_byte</span> <span class="n">hour</span><span class="p">;</span>    <span class="cm">/* hour of day, 0 - 23 */</span>
<a name="gbab-641"></a>   <span class="n">png_byte</span> <span class="n">minute</span><span class="p">;</span>  <span class="cm">/* minute of hour, 0 - 59 */</span>
<a name="gbab-642"></a>   <span class="n">png_byte</span> <span class="n">second</span><span class="p">;</span>  <span class="cm">/* second of minute, 0 - 60 (for leap seconds) */</span>
<a name="gbab-643"></a><span class="p">}</span> <span class="n">png_time</span><span class="p">;</span>
<a name="gbab-644"></a><span class="k">typedef</span> <span class="n">png_time</span> <span class="o">*</span> <span class="n">png_timep</span><span class="p">;</span>
<a name="gbab-645"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_time</span> <span class="o">*</span> <span class="n">png_const_timep</span><span class="p">;</span>
<a name="gbab-646"></a><span class="k">typedef</span> <span class="n">png_time</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_timepp</span><span class="p">;</span>
<a name="gbab-647"></a>
<a name="gbab-648"></a><span class="cp">#if defined(PNG_STORE_UNKNOWN_CHUNKS_SUPPORTED) ||\</span>
<a name="gbab-649"></a><span class="cp">   defined(PNG_USER_CHUNKS_SUPPORTED)</span>
<a name="gbab-650"></a><span class="cm">/* png_unknown_chunk is a structure to hold queued chunks for which there is</span>
<a name="gbab-651"></a><span class="cm"> * no specific support.  The idea is that we can use this to queue</span>
<a name="gbab-652"></a><span class="cm"> * up private chunks for output even though the library doesn&#39;t actually</span>
<a name="gbab-653"></a><span class="cm"> * know about their semantics.</span>
<a name="gbab-654"></a><span class="cm"> *</span>
<a name="gbab-655"></a><span class="cm"> * The data in the structure is set by libpng on read and used on write.</span>
<a name="gbab-656"></a><span class="cm"> */</span>
<a name="gbab-657"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_unknown_chunk_t</span>
<a name="gbab-658"></a><span class="p">{</span>
<a name="gbab-659"></a>    <span class="n">png_byte</span> <span class="n">name</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> <span class="cm">/* Textual chunk name with &#39;\0&#39; terminator */</span>
<a name="gbab-660"></a>    <span class="n">png_byte</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>   <span class="cm">/* Data, should not be modified on read! */</span>
<a name="gbab-661"></a>    <span class="n">png_size_t</span> <span class="n">size</span><span class="p">;</span>
<a name="gbab-662"></a>
<a name="gbab-663"></a>    <span class="cm">/* On write &#39;location&#39; must be set using the flag values listed below.</span>
<a name="gbab-664"></a><span class="cm">     * Notice that on read it is set by libpng however the values stored have</span>
<a name="gbab-665"></a><span class="cm">     * more bits set than are listed below.  Always treat the value as a</span>
<a name="gbab-666"></a><span class="cm">     * bitmask.  On write set only one bit - setting multiple bits may cause the</span>
<a name="gbab-667"></a><span class="cm">     * chunk to be written in multiple places.</span>
<a name="gbab-668"></a><span class="cm">     */</span>
<a name="gbab-669"></a>    <span class="n">png_byte</span> <span class="n">location</span><span class="p">;</span> <span class="cm">/* mode of operation at read time */</span>
<a name="gbab-670"></a><span class="p">}</span>
<a name="gbab-671"></a><span class="n">png_unknown_chunk</span><span class="p">;</span>
<a name="gbab-672"></a>
<a name="gbab-673"></a><span class="k">typedef</span> <span class="n">png_unknown_chunk</span> <span class="o">*</span> <span class="n">png_unknown_chunkp</span><span class="p">;</span>
<a name="gbab-674"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_unknown_chunk</span> <span class="o">*</span> <span class="n">png_const_unknown_chunkp</span><span class="p">;</span>
<a name="gbab-675"></a><span class="k">typedef</span> <span class="n">png_unknown_chunk</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_unknown_chunkpp</span><span class="p">;</span>
<a name="gbab-676"></a><span class="cp">#endif</span>
<a name="gbab-677"></a>
<a name="gbab-678"></a><span class="cm">/* Flag values for the unknown chunk location byte. */</span>
<a name="gbab-679"></a><span class="cp">#define PNG_HAVE_IHDR  0x01</span>
<a name="gbab-680"></a><span class="cp">#define PNG_HAVE_PLTE  0x02</span>
<a name="gbab-681"></a><span class="cp">#define PNG_AFTER_IDAT 0x08</span>
<a name="gbab-682"></a>
<a name="gbab-683"></a><span class="cm">/* Maximum positive integer used in PNG is (2^31)-1 */</span>
<a name="gbab-684"></a><span class="cp">#define PNG_UINT_31_MAX ((png_uint_32)0x7fffffffL)</span>
<a name="gbab-685"></a><span class="cp">#define PNG_UINT_32_MAX ((png_uint_32)(-1))</span>
<a name="gbab-686"></a><span class="cp">#define PNG_SIZE_MAX ((png_size_t)(-1))</span>
<a name="gbab-687"></a>
<a name="gbab-688"></a><span class="cm">/* These are constants for fixed point values encoded in the</span>
<a name="gbab-689"></a><span class="cm"> * PNG specification manner (x100000)</span>
<a name="gbab-690"></a><span class="cm"> */</span>
<a name="gbab-691"></a><span class="cp">#define PNG_FP_1    100000</span>
<a name="gbab-692"></a><span class="cp">#define PNG_FP_HALF  50000</span>
<a name="gbab-693"></a><span class="cp">#define PNG_FP_MAX  ((png_fixed_point)0x7fffffffL)</span>
<a name="gbab-694"></a><span class="cp">#define PNG_FP_MIN  (-PNG_FP_MAX)</span>
<a name="gbab-695"></a>
<a name="gbab-696"></a><span class="cm">/* These describe the color_type field in png_info. */</span>
<a name="gbab-697"></a><span class="cm">/* color type masks */</span>
<a name="gbab-698"></a><span class="cp">#define PNG_COLOR_MASK_PALETTE    1</span>
<a name="gbab-699"></a><span class="cp">#define PNG_COLOR_MASK_COLOR      2</span>
<a name="gbab-700"></a><span class="cp">#define PNG_COLOR_MASK_ALPHA      4</span>
<a name="gbab-701"></a>
<a name="gbab-702"></a><span class="cm">/* color types.  Note that not all combinations are legal */</span>
<a name="gbab-703"></a><span class="cp">#define PNG_COLOR_TYPE_GRAY 0</span>
<a name="gbab-704"></a><span class="cp">#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)</span>
<a name="gbab-705"></a><span class="cp">#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)</span>
<a name="gbab-706"></a><span class="cp">#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)</span>
<a name="gbab-707"></a><span class="cp">#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)</span>
<a name="gbab-708"></a><span class="cm">/* aliases */</span>
<a name="gbab-709"></a><span class="cp">#define PNG_COLOR_TYPE_RGBA  PNG_COLOR_TYPE_RGB_ALPHA</span>
<a name="gbab-710"></a><span class="cp">#define PNG_COLOR_TYPE_GA  PNG_COLOR_TYPE_GRAY_ALPHA</span>
<a name="gbab-711"></a>
<a name="gbab-712"></a><span class="cm">/* This is for compression type. PNG 1.0-1.2 only define the single type. */</span>
<a name="gbab-713"></a><span class="cp">#define PNG_COMPRESSION_TYPE_BASE 0 </span><span class="cm">/* Deflate method 8, 32K window */</span><span class="cp"></span>
<a name="gbab-714"></a><span class="cp">#define PNG_COMPRESSION_TYPE_DEFAULT PNG_COMPRESSION_TYPE_BASE</span>
<a name="gbab-715"></a>
<a name="gbab-716"></a><span class="cm">/* This is for filter type. PNG 1.0-1.2 only define the single type. */</span>
<a name="gbab-717"></a><span class="cp">#define PNG_FILTER_TYPE_BASE      0 </span><span class="cm">/* Single row per-byte filtering */</span><span class="cp"></span>
<a name="gbab-718"></a><span class="cp">#define PNG_INTRAPIXEL_DIFFERENCING 64 </span><span class="cm">/* Used only in MNG datastreams */</span><span class="cp"></span>
<a name="gbab-719"></a><span class="cp">#define PNG_FILTER_TYPE_DEFAULT   PNG_FILTER_TYPE_BASE</span>
<a name="gbab-720"></a>
<a name="gbab-721"></a><span class="cm">/* These are for the interlacing type.  These values should NOT be changed. */</span>
<a name="gbab-722"></a><span class="cp">#define PNG_INTERLACE_NONE        0 </span><span class="cm">/* Non-interlaced image */</span><span class="cp"></span>
<a name="gbab-723"></a><span class="cp">#define PNG_INTERLACE_ADAM7       1 </span><span class="cm">/* Adam7 interlacing */</span><span class="cp"></span>
<a name="gbab-724"></a><span class="cp">#define PNG_INTERLACE_LAST        2 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-725"></a>
<a name="gbab-726"></a><span class="cm">/* These are for the oFFs chunk.  These values should NOT be changed. */</span>
<a name="gbab-727"></a><span class="cp">#define PNG_OFFSET_PIXEL          0 </span><span class="cm">/* Offset in pixels */</span><span class="cp"></span>
<a name="gbab-728"></a><span class="cp">#define PNG_OFFSET_MICROMETER     1 </span><span class="cm">/* Offset in micrometers (1/10^6 meter) */</span><span class="cp"></span>
<a name="gbab-729"></a><span class="cp">#define PNG_OFFSET_LAST           2 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-730"></a>
<a name="gbab-731"></a><span class="cm">/* These are for the pCAL chunk.  These values should NOT be changed. */</span>
<a name="gbab-732"></a><span class="cp">#define PNG_EQUATION_LINEAR       0 </span><span class="cm">/* Linear transformation */</span><span class="cp"></span>
<a name="gbab-733"></a><span class="cp">#define PNG_EQUATION_BASE_E       1 </span><span class="cm">/* Exponential base e transform */</span><span class="cp"></span>
<a name="gbab-734"></a><span class="cp">#define PNG_EQUATION_ARBITRARY    2 </span><span class="cm">/* Arbitrary base exponential transform */</span><span class="cp"></span>
<a name="gbab-735"></a><span class="cp">#define PNG_EQUATION_HYPERBOLIC   3 </span><span class="cm">/* Hyperbolic sine transformation */</span><span class="cp"></span>
<a name="gbab-736"></a><span class="cp">#define PNG_EQUATION_LAST         4 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-737"></a>
<a name="gbab-738"></a><span class="cm">/* These are for the sCAL chunk.  These values should NOT be changed. */</span>
<a name="gbab-739"></a><span class="cp">#define PNG_SCALE_UNKNOWN         0 </span><span class="cm">/* unknown unit (image scale) */</span><span class="cp"></span>
<a name="gbab-740"></a><span class="cp">#define PNG_SCALE_METER           1 </span><span class="cm">/* meters per pixel */</span><span class="cp"></span>
<a name="gbab-741"></a><span class="cp">#define PNG_SCALE_RADIAN          2 </span><span class="cm">/* radians per pixel */</span><span class="cp"></span>
<a name="gbab-742"></a><span class="cp">#define PNG_SCALE_LAST            3 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-743"></a>
<a name="gbab-744"></a><span class="cm">/* These are for the pHYs chunk.  These values should NOT be changed. */</span>
<a name="gbab-745"></a><span class="cp">#define PNG_RESOLUTION_UNKNOWN    0 </span><span class="cm">/* pixels/unknown unit (aspect ratio) */</span><span class="cp"></span>
<a name="gbab-746"></a><span class="cp">#define PNG_RESOLUTION_METER      1 </span><span class="cm">/* pixels/meter */</span><span class="cp"></span>
<a name="gbab-747"></a><span class="cp">#define PNG_RESOLUTION_LAST       2 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-748"></a>
<a name="gbab-749"></a><span class="cm">/* These are for the sRGB chunk.  These values should NOT be changed. */</span>
<a name="gbab-750"></a><span class="cp">#define PNG_sRGB_INTENT_PERCEPTUAL 0</span>
<a name="gbab-751"></a><span class="cp">#define PNG_sRGB_INTENT_RELATIVE   1</span>
<a name="gbab-752"></a><span class="cp">#define PNG_sRGB_INTENT_SATURATION 2</span>
<a name="gbab-753"></a><span class="cp">#define PNG_sRGB_INTENT_ABSOLUTE   3</span>
<a name="gbab-754"></a><span class="cp">#define PNG_sRGB_INTENT_LAST       4 </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-755"></a>
<a name="gbab-756"></a><span class="cm">/* This is for text chunks */</span>
<a name="gbab-757"></a><span class="cp">#define PNG_KEYWORD_MAX_LENGTH     79</span>
<a name="gbab-758"></a>
<a name="gbab-759"></a><span class="cm">/* Maximum number of entries in PLTE/sPLT/tRNS arrays */</span>
<a name="gbab-760"></a><span class="cp">#define PNG_MAX_PALETTE_LENGTH    256</span>
<a name="gbab-761"></a>
<a name="gbab-762"></a><span class="cm">/* These determine if an ancillary chunk&#39;s data has been successfully read</span>
<a name="gbab-763"></a><span class="cm"> * from the PNG header, or if the application has filled in the corresponding</span>
<a name="gbab-764"></a><span class="cm"> * data in the info_struct to be written into the output file.  The values</span>
<a name="gbab-765"></a><span class="cm"> * of the PNG_INFO_&lt;chunk&gt; defines should NOT be changed.</span>
<a name="gbab-766"></a><span class="cm"> */</span>
<a name="gbab-767"></a><span class="cp">#define PNG_INFO_gAMA 0x0001U</span>
<a name="gbab-768"></a><span class="cp">#define PNG_INFO_sBIT 0x0002U</span>
<a name="gbab-769"></a><span class="cp">#define PNG_INFO_cHRM 0x0004U</span>
<a name="gbab-770"></a><span class="cp">#define PNG_INFO_PLTE 0x0008U</span>
<a name="gbab-771"></a><span class="cp">#define PNG_INFO_tRNS 0x0010U</span>
<a name="gbab-772"></a><span class="cp">#define PNG_INFO_bKGD 0x0020U</span>
<a name="gbab-773"></a><span class="cp">#define PNG_INFO_hIST 0x0040U</span>
<a name="gbab-774"></a><span class="cp">#define PNG_INFO_pHYs 0x0080U</span>
<a name="gbab-775"></a><span class="cp">#define PNG_INFO_oFFs 0x0100U</span>
<a name="gbab-776"></a><span class="cp">#define PNG_INFO_tIME 0x0200U</span>
<a name="gbab-777"></a><span class="cp">#define PNG_INFO_pCAL 0x0400U</span>
<a name="gbab-778"></a><span class="cp">#define PNG_INFO_sRGB 0x0800U  </span><span class="cm">/* GR-P, 0.96a */</span><span class="cp"></span>
<a name="gbab-779"></a><span class="cp">#define PNG_INFO_iCCP 0x1000U  </span><span class="cm">/* ESR, 1.0.6 */</span><span class="cp"></span>
<a name="gbab-780"></a><span class="cp">#define PNG_INFO_sPLT 0x2000U  </span><span class="cm">/* ESR, 1.0.6 */</span><span class="cp"></span>
<a name="gbab-781"></a><span class="cp">#define PNG_INFO_sCAL 0x4000U  </span><span class="cm">/* ESR, 1.0.6 */</span><span class="cp"></span>
<a name="gbab-782"></a><span class="cp">#define PNG_INFO_IDAT 0x8000U  </span><span class="cm">/* ESR, 1.0.6 */</span><span class="cp"></span>
<a name="gbab-783"></a>
<a name="gbab-784"></a><span class="cm">/* This is used for the transformation routines, as some of them</span>
<a name="gbab-785"></a><span class="cm"> * change these values for the row.  It also should enable using</span>
<a name="gbab-786"></a><span class="cm"> * the routines for other purposes.</span>
<a name="gbab-787"></a><span class="cm"> */</span>
<a name="gbab-788"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_row_info_struct</span>
<a name="gbab-789"></a><span class="p">{</span>
<a name="gbab-790"></a>   <span class="n">png_uint_32</span> <span class="n">width</span><span class="p">;</span>    <span class="cm">/* width of row */</span>
<a name="gbab-791"></a>   <span class="n">png_size_t</span> <span class="n">rowbytes</span><span class="p">;</span>  <span class="cm">/* number of bytes in row */</span>
<a name="gbab-792"></a>   <span class="n">png_byte</span> <span class="n">color_type</span><span class="p">;</span>  <span class="cm">/* color type of row */</span>
<a name="gbab-793"></a>   <span class="n">png_byte</span> <span class="n">bit_depth</span><span class="p">;</span>   <span class="cm">/* bit depth of row */</span>
<a name="gbab-794"></a>   <span class="n">png_byte</span> <span class="n">channels</span><span class="p">;</span>    <span class="cm">/* number of channels (1, 2, 3, or 4) */</span>
<a name="gbab-795"></a>   <span class="n">png_byte</span> <span class="n">pixel_depth</span><span class="p">;</span> <span class="cm">/* bits per pixel (depth * channels) */</span>
<a name="gbab-796"></a><span class="p">}</span> <span class="n">png_row_info</span><span class="p">;</span>
<a name="gbab-797"></a>
<a name="gbab-798"></a><span class="k">typedef</span> <span class="n">png_row_info</span> <span class="o">*</span> <span class="n">png_row_infop</span><span class="p">;</span>
<a name="gbab-799"></a><span class="k">typedef</span> <span class="n">png_row_info</span> <span class="o">*</span> <span class="o">*</span> <span class="n">png_row_infopp</span><span class="p">;</span>
<a name="gbab-800"></a>
<a name="gbab-801"></a><span class="cm">/* These are the function types for the I/O functions and for the functions</span>
<a name="gbab-802"></a><span class="cm"> * that allow the user to override the default I/O functions with his or her</span>
<a name="gbab-803"></a><span class="cm"> * own.  The png_error_ptr type should match that of user-supplied warning</span>
<a name="gbab-804"></a><span class="cm"> * and error functions, while the png_rw_ptr type should match that of the</span>
<a name="gbab-805"></a><span class="cm"> * user read/write data functions.  Note that the &#39;write&#39; function must not</span>
<a name="gbab-806"></a><span class="cm"> * modify the buffer it is passed. The &#39;read&#39; function, on the other hand, is</span>
<a name="gbab-807"></a><span class="cm"> * expected to return the read data in the buffer.</span>
<a name="gbab-808"></a><span class="cm"> */</span>
<a name="gbab-809"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_error_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">));</span>
<a name="gbab-810"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_rw_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_bytep</span><span class="p">,</span> <span class="n">png_size_t</span><span class="p">));</span>
<a name="gbab-811"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_flush_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">));</span>
<a name="gbab-812"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_read_status_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span>
<a name="gbab-813"></a>    <span class="kt">int</span><span class="p">));</span>
<a name="gbab-814"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_write_status_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span>
<a name="gbab-815"></a>    <span class="kt">int</span><span class="p">));</span>
<a name="gbab-816"></a>
<a name="gbab-817"></a><span class="cp">#ifdef PNG_PROGRESSIVE_READ_SUPPORTED</span>
<a name="gbab-818"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_progressive_info_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_infop</span><span class="p">));</span>
<a name="gbab-819"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_progressive_end_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_infop</span><span class="p">));</span>
<a name="gbab-820"></a>
<a name="gbab-821"></a><span class="cm">/* The following callback receives png_uint_32 row_number, int pass for the</span>
<a name="gbab-822"></a><span class="cm"> * png_bytep data of the row.  When transforming an interlaced image the</span>
<a name="gbab-823"></a><span class="cm"> * row number is the row number within the sub-image of the interlace pass, so</span>
<a name="gbab-824"></a><span class="cm"> * the value will increase to the height of the sub-image (not the full image)</span>
<a name="gbab-825"></a><span class="cm"> * then reset to 0 for the next pass.</span>
<a name="gbab-826"></a><span class="cm"> *</span>
<a name="gbab-827"></a><span class="cm"> * Use PNG_ROW_FROM_PASS_ROW(row, pass) and PNG_COL_FROM_PASS_COL(col, pass) to</span>
<a name="gbab-828"></a><span class="cm"> * find the output pixel (x,y) given an interlaced sub-image pixel</span>
<a name="gbab-829"></a><span class="cm"> * (row,col,pass).  (See below for these macros.)</span>
<a name="gbab-830"></a><span class="cm"> */</span>
<a name="gbab-831"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_progressive_row_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_bytep</span><span class="p">,</span>
<a name="gbab-832"></a>    <span class="n">png_uint_32</span><span class="p">,</span> <span class="kt">int</span><span class="p">));</span>
<a name="gbab-833"></a><span class="cp">#endif</span>
<a name="gbab-834"></a>
<a name="gbab-835"></a><span class="cp">#if defined(PNG_READ_USER_TRANSFORM_SUPPORTED) || \</span>
<a name="gbab-836"></a><span class="cp">    defined(PNG_WRITE_USER_TRANSFORM_SUPPORTED)</span>
<a name="gbab-837"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_user_transform_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_row_infop</span><span class="p">,</span>
<a name="gbab-838"></a>    <span class="n">png_bytep</span><span class="p">));</span>
<a name="gbab-839"></a><span class="cp">#endif</span>
<a name="gbab-840"></a>
<a name="gbab-841"></a><span class="cp">#ifdef PNG_USER_CHUNKS_SUPPORTED</span>
<a name="gbab-842"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="o">*</span><span class="n">png_user_chunk_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span>
<a name="gbab-843"></a>    <span class="n">png_unknown_chunkp</span><span class="p">));</span>
<a name="gbab-844"></a><span class="cp">#endif</span>
<a name="gbab-845"></a><span class="cp">#ifdef PNG_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-846"></a><span class="cm">/* not used anywhere */</span>
<a name="gbab-847"></a><span class="cm">/* typedef PNG_CALLBACK(void, *png_unknown_chunk_ptr, (png_structp)); */</span>
<a name="gbab-848"></a><span class="cp">#endif</span>
<a name="gbab-849"></a>
<a name="gbab-850"></a><span class="cp">#ifdef PNG_SETJMP_SUPPORTED</span>
<a name="gbab-851"></a><span class="cm">/* This must match the function definition in &lt;setjmp.h&gt;, and the application</span>
<a name="gbab-852"></a><span class="cm"> * must include this before png.h to obtain the definition of jmp_buf.  The</span>
<a name="gbab-853"></a><span class="cm"> * function is required to be PNG_NORETURN, but this is not checked.  If the</span>
<a name="gbab-854"></a><span class="cm"> * function does return the application will crash via an abort() or similar</span>
<a name="gbab-855"></a><span class="cm"> * system level call.</span>
<a name="gbab-856"></a><span class="cm"> *</span>
<a name="gbab-857"></a><span class="cm"> * If you get a warning here while building the library you may need to make</span>
<a name="gbab-858"></a><span class="cm"> * changes to ensure that pnglibconf.h records the calling convention used by</span>
<a name="gbab-859"></a><span class="cm"> * your compiler.  This may be very difficult - try using a different compiler</span>
<a name="gbab-860"></a><span class="cm"> * to build the library!</span>
<a name="gbab-861"></a><span class="cm"> */</span>
<a name="gbab-862"></a><span class="n">PNG_FUNCTION</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="p">(</span><span class="n">PNGCAPI</span> <span class="o">*</span><span class="n">png_longjmp_ptr</span><span class="p">),</span> <span class="n">PNGARG</span><span class="p">((</span><span class="kt">jmp_buf</span><span class="p">,</span> <span class="kt">int</span><span class="p">)),</span> <span class="k">typedef</span><span class="p">);</span>
<a name="gbab-863"></a><span class="cp">#endif</span>
<a name="gbab-864"></a>
<a name="gbab-865"></a><span class="cm">/* Transform masks for the high-level interface */</span>
<a name="gbab-866"></a><span class="cp">#define PNG_TRANSFORM_IDENTITY       0x0000    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-867"></a><span class="cp">#define PNG_TRANSFORM_STRIP_16       0x0001    </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-868"></a><span class="cp">#define PNG_TRANSFORM_STRIP_ALPHA    0x0002    </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-869"></a><span class="cp">#define PNG_TRANSFORM_PACKING        0x0004    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-870"></a><span class="cp">#define PNG_TRANSFORM_PACKSWAP       0x0008    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-871"></a><span class="cp">#define PNG_TRANSFORM_EXPAND         0x0010    </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-872"></a><span class="cp">#define PNG_TRANSFORM_INVERT_MONO    0x0020    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-873"></a><span class="cp">#define PNG_TRANSFORM_SHIFT          0x0040    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-874"></a><span class="cp">#define PNG_TRANSFORM_BGR            0x0080    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-875"></a><span class="cp">#define PNG_TRANSFORM_SWAP_ALPHA     0x0100    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-876"></a><span class="cp">#define PNG_TRANSFORM_SWAP_ENDIAN    0x0200    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-877"></a><span class="cp">#define PNG_TRANSFORM_INVERT_ALPHA   0x0400    </span><span class="cm">/* read and write */</span><span class="cp"></span>
<a name="gbab-878"></a><span class="cp">#define PNG_TRANSFORM_STRIP_FILLER   0x0800    </span><span class="cm">/* write only */</span><span class="cp"></span>
<a name="gbab-879"></a><span class="cm">/* Added to libpng-1.2.34 */</span>
<a name="gbab-880"></a><span class="cp">#define PNG_TRANSFORM_STRIP_FILLER_BEFORE PNG_TRANSFORM_STRIP_FILLER</span>
<a name="gbab-881"></a><span class="cp">#define PNG_TRANSFORM_STRIP_FILLER_AFTER 0x1000 </span><span class="cm">/* write only */</span><span class="cp"></span>
<a name="gbab-882"></a><span class="cm">/* Added to libpng-1.4.0 */</span>
<a name="gbab-883"></a><span class="cp">#define PNG_TRANSFORM_GRAY_TO_RGB   0x2000      </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-884"></a><span class="cm">/* Added to libpng-1.5.4 */</span>
<a name="gbab-885"></a><span class="cp">#define PNG_TRANSFORM_EXPAND_16     0x4000      </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-886"></a><span class="cp">#if INT_MAX &gt;= 0x8000 </span><span class="cm">/* else this might break */</span><span class="cp"></span>
<a name="gbab-887"></a><span class="cp">#define PNG_TRANSFORM_SCALE_16      0x8000      </span><span class="cm">/* read only */</span><span class="cp"></span>
<a name="gbab-888"></a><span class="cp">#endif</span>
<a name="gbab-889"></a>
<a name="gbab-890"></a><span class="cm">/* Flags for MNG supported features */</span>
<a name="gbab-891"></a><span class="cp">#define PNG_FLAG_MNG_EMPTY_PLTE     0x01</span>
<a name="gbab-892"></a><span class="cp">#define PNG_FLAG_MNG_FILTER_64      0x04</span>
<a name="gbab-893"></a><span class="cp">#define PNG_ALL_MNG_FEATURES        0x05</span>
<a name="gbab-894"></a>
<a name="gbab-895"></a><span class="cm">/* NOTE: prior to 1.5 these functions had no &#39;API&#39; style declaration,</span>
<a name="gbab-896"></a><span class="cm"> * this allowed the zlib default functions to be used on Windows</span>
<a name="gbab-897"></a><span class="cm"> * platforms.  In 1.5 the zlib default malloc (which just calls malloc and</span>
<a name="gbab-898"></a><span class="cm"> * ignores the first argument) should be completely compatible with the</span>
<a name="gbab-899"></a><span class="cm"> * following.</span>
<a name="gbab-900"></a><span class="cm"> */</span>
<a name="gbab-901"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="n">png_voidp</span><span class="p">,</span> <span class="o">*</span><span class="n">png_malloc_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span>
<a name="gbab-902"></a>    <span class="n">png_alloc_size_t</span><span class="p">));</span>
<a name="gbab-903"></a><span class="k">typedef</span> <span class="nf">PNG_CALLBACK</span><span class="p">(</span><span class="kt">void</span><span class="p">,</span> <span class="o">*</span><span class="n">png_free_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structp</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">));</span>
<a name="gbab-904"></a>
<a name="gbab-905"></a><span class="cm">/* Section 4: exported functions</span>
<a name="gbab-906"></a><span class="cm"> * Here are the function definitions most commonly used.  This is not</span>
<a name="gbab-907"></a><span class="cm"> * the place to find out how to use libpng.  See libpng-manual.txt for the</span>
<a name="gbab-908"></a><span class="cm"> * full explanation, see example.c for the summary.  This just provides</span>
<a name="gbab-909"></a><span class="cm"> * a simple one line description of the use of each function.</span>
<a name="gbab-910"></a><span class="cm"> *</span>
<a name="gbab-911"></a><span class="cm"> * The PNG_EXPORT() and PNG_EXPORTA() macros used below are defined in</span>
<a name="gbab-912"></a><span class="cm"> * pngconf.h and in the *.dfn files in the scripts directory.</span>
<a name="gbab-913"></a><span class="cm"> *</span>
<a name="gbab-914"></a><span class="cm"> *   PNG_EXPORT(ordinal, type, name, (args));</span>
<a name="gbab-915"></a><span class="cm"> *</span>
<a name="gbab-916"></a><span class="cm"> *       ordinal:    ordinal that is used while building</span>
<a name="gbab-917"></a><span class="cm"> *                   *.def files. The ordinal value is only</span>
<a name="gbab-918"></a><span class="cm"> *                   relevant when preprocessing png.h with</span>
<a name="gbab-919"></a><span class="cm"> *                   the *.dfn files for building symbol table</span>
<a name="gbab-920"></a><span class="cm"> *                   entries, and are removed by pngconf.h.</span>
<a name="gbab-921"></a><span class="cm"> *       type:       return type of the function</span>
<a name="gbab-922"></a><span class="cm"> *       name:       function name</span>
<a name="gbab-923"></a><span class="cm"> *       args:       function arguments, with types</span>
<a name="gbab-924"></a><span class="cm"> *</span>
<a name="gbab-925"></a><span class="cm"> * When we wish to append attributes to a function prototype we use</span>
<a name="gbab-926"></a><span class="cm"> * the PNG_EXPORTA() macro instead.</span>
<a name="gbab-927"></a><span class="cm"> *</span>
<a name="gbab-928"></a><span class="cm"> *   PNG_EXPORTA(ordinal, type, name, (args), attributes);</span>
<a name="gbab-929"></a><span class="cm"> *</span>
<a name="gbab-930"></a><span class="cm"> *       ordinal, type, name, and args: same as in PNG_EXPORT().</span>
<a name="gbab-931"></a><span class="cm"> *       attributes: function attributes</span>
<a name="gbab-932"></a><span class="cm"> */</span>
<a name="gbab-933"></a>
<a name="gbab-934"></a><span class="cm">/* Returns the version number of the library */</span>
<a name="gbab-935"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_access_version_number</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="p">));</span>
<a name="gbab-936"></a>
<a name="gbab-937"></a><span class="cm">/* Tell lib we have already handled the first &lt;num_bytes&gt; magic bytes.</span>
<a name="gbab-938"></a><span class="cm"> * Handling more than 8 bytes from the beginning of the file is an error.</span>
<a name="gbab-939"></a><span class="cm"> */</span>
<a name="gbab-940"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sig_bytes</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_bytes</span><span class="p">));</span>
<a name="gbab-941"></a>
<a name="gbab-942"></a><span class="cm">/* Check sig[start] through sig[start + num_to_check - 1] to see if it&#39;s a</span>
<a name="gbab-943"></a><span class="cm"> * PNG file.  Returns zero if the supplied bytes match the 8-byte PNG</span>
<a name="gbab-944"></a><span class="cm"> * signature, and non-zero otherwise.  Having num_to_check == 0 or</span>
<a name="gbab-945"></a><span class="cm"> * start &gt; 7 will always fail (ie return non-zero).</span>
<a name="gbab-946"></a><span class="cm"> */</span>
<a name="gbab-947"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_sig_cmp</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_bytep</span> <span class="n">sig</span><span class="p">,</span> <span class="n">png_size_t</span> <span class="n">start</span><span class="p">,</span>
<a name="gbab-948"></a>    <span class="n">png_size_t</span> <span class="n">num_to_check</span><span class="p">));</span>
<a name="gbab-949"></a>
<a name="gbab-950"></a><span class="cm">/* Simple signature checking function.  This is the same as calling</span>
<a name="gbab-951"></a><span class="cm"> * png_check_sig(sig, n) := !png_sig_cmp(sig, 0, n).</span>
<a name="gbab-952"></a><span class="cm"> */</span>
<a name="gbab-953"></a><span class="cp">#define png_check_sig(sig, n) !png_sig_cmp((sig), 0, (n))</span>
<a name="gbab-954"></a>
<a name="gbab-955"></a><span class="cm">/* Allocate and initialize png_ptr struct for reading, and any other memory. */</span>
<a name="gbab-956"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">png_structp</span><span class="p">,</span> <span class="n">png_create_read_struct</span><span class="p">,</span>
<a name="gbab-957"></a>    <span class="p">(</span><span class="n">png_const_charp</span> <span class="n">user_png_ver</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">,</span>
<a name="gbab-958"></a>    <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">warn_fn</span><span class="p">),</span>
<a name="gbab-959"></a>    <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-960"></a>
<a name="gbab-961"></a><span class="cm">/* Allocate and initialize png_ptr struct for writing, and any other memory */</span>
<a name="gbab-962"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">png_structp</span><span class="p">,</span> <span class="n">png_create_write_struct</span><span class="p">,</span>
<a name="gbab-963"></a>    <span class="p">(</span><span class="n">png_const_charp</span> <span class="n">user_png_ver</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">,</span>
<a name="gbab-964"></a>    <span class="n">png_error_ptr</span> <span class="n">warn_fn</span><span class="p">),</span>
<a name="gbab-965"></a>    <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-966"></a>
<a name="gbab-967"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">png_size_t</span><span class="p">,</span> <span class="n">png_get_compression_buffer_size</span><span class="p">,</span>
<a name="gbab-968"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-969"></a>
<a name="gbab-970"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_buffer_size</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-971"></a>    <span class="n">png_size_t</span> <span class="n">size</span><span class="p">));</span>
<a name="gbab-972"></a>
<a name="gbab-973"></a><span class="cm">/* Moved from pngconf.h in 1.4.0 and modified to ensure setjmp/longjmp</span>
<a name="gbab-974"></a><span class="cm"> * match up.</span>
<a name="gbab-975"></a><span class="cm"> */</span>
<a name="gbab-976"></a><span class="cp">#ifdef PNG_SETJMP_SUPPORTED</span>
<a name="gbab-977"></a><span class="cm">/* This function returns the jmp_buf built in to *png_ptr.  It must be</span>
<a name="gbab-978"></a><span class="cm"> * supplied with an appropriate &#39;longjmp&#39; function to use on that jmp_buf</span>
<a name="gbab-979"></a><span class="cm"> * unless the default error function is overridden in which case NULL is</span>
<a name="gbab-980"></a><span class="cm"> * acceptable.  The size of the jmp_buf is checked against the actual size</span>
<a name="gbab-981"></a><span class="cm"> * allocated by the library - the call will return NULL on a mismatch</span>
<a name="gbab-982"></a><span class="cm"> * indicating an ABI mismatch.</span>
<a name="gbab-983"></a><span class="cm"> */</span>
<a name="gbab-984"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="kt">jmp_buf</span><span class="o">*</span><span class="p">,</span> <span class="n">png_set_longjmp_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-985"></a>    <span class="n">png_longjmp_ptr</span> <span class="n">longjmp_fn</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">jmp_buf_size</span><span class="p">));</span>
<a name="gbab-986"></a><span class="cp">#  define png_jmpbuf(png_ptr) \</span>
<a name="gbab-987"></a><span class="cp">      (*png_set_longjmp_fn((png_ptr), longjmp, (sizeof (jmp_buf))))</span>
<a name="gbab-988"></a><span class="cp">#else</span>
<a name="gbab-989"></a><span class="cp">#  define png_jmpbuf(png_ptr) \</span>
<a name="gbab-990"></a><span class="cp">      (LIBPNG_WAS_COMPILED_WITH__PNG_NO_SETJMP)</span>
<a name="gbab-991"></a><span class="cp">#endif</span>
<a name="gbab-992"></a><span class="cm">/* This function should be used by libpng applications in place of</span>
<a name="gbab-993"></a><span class="cm"> * longjmp(png_ptr-&gt;jmpbuf, val).  If longjmp_fn() has been set, it</span>
<a name="gbab-994"></a><span class="cm"> * will use it; otherwise it will call PNG_ABORT().  This function was</span>
<a name="gbab-995"></a><span class="cm"> * added in libpng-1.5.0.</span>
<a name="gbab-996"></a><span class="cm"> */</span>
<a name="gbab-997"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_longjmp</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span><span class="p">),</span>
<a name="gbab-998"></a>    <span class="n">PNG_NORETURN</span><span class="p">);</span>
<a name="gbab-999"></a>
<a name="gbab-1000"></a><span class="cp">#ifdef PNG_READ_SUPPORTED</span>
<a name="gbab-1001"></a><span class="cm">/* Reset the compression stream */</span>
<a name="gbab-1002"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_reset_zstream</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">),</span> <span class="n">PNG_DEPRECATED</span><span class="p">);</span>
<a name="gbab-1003"></a><span class="cp">#endif</span>
<a name="gbab-1004"></a>
<a name="gbab-1005"></a><span class="cm">/* New functions added in libpng-1.0.2 (not enabled by default until 1.2.0) */</span>
<a name="gbab-1006"></a><span class="cp">#ifdef PNG_USER_MEM_SUPPORTED</span>
<a name="gbab-1007"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">png_structp</span><span class="p">,</span> <span class="n">png_create_read_struct_2</span><span class="p">,</span>
<a name="gbab-1008"></a>    <span class="p">(</span><span class="n">png_const_charp</span> <span class="n">user_png_ver</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">,</span>
<a name="gbab-1009"></a>    <span class="n">png_error_ptr</span> <span class="n">warn_fn</span><span class="p">,</span>
<a name="gbab-1010"></a>    <span class="n">png_voidp</span> <span class="n">mem_ptr</span><span class="p">,</span> <span class="n">png_malloc_ptr</span> <span class="n">malloc_fn</span><span class="p">,</span> <span class="n">png_free_ptr</span> <span class="n">free_fn</span><span class="p">),</span>
<a name="gbab-1011"></a>    <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1012"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">png_structp</span><span class="p">,</span> <span class="n">png_create_write_struct_2</span><span class="p">,</span>
<a name="gbab-1013"></a>    <span class="p">(</span><span class="n">png_const_charp</span> <span class="n">user_png_ver</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">,</span>
<a name="gbab-1014"></a>    <span class="n">png_error_ptr</span> <span class="n">warn_fn</span><span class="p">,</span>
<a name="gbab-1015"></a>    <span class="n">png_voidp</span> <span class="n">mem_ptr</span><span class="p">,</span> <span class="n">png_malloc_ptr</span> <span class="n">malloc_fn</span><span class="p">,</span> <span class="n">png_free_ptr</span> <span class="n">free_fn</span><span class="p">),</span>
<a name="gbab-1016"></a>    <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1017"></a><span class="cp">#endif</span>
<a name="gbab-1018"></a>
<a name="gbab-1019"></a><span class="cm">/* Write the PNG file signature. */</span>
<a name="gbab-1020"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_sig</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1021"></a>
<a name="gbab-1022"></a><span class="cm">/* Write a PNG chunk - size, type, (optional) data, CRC. */</span>
<a name="gbab-1023"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_chunk</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_bytep</span>
<a name="gbab-1024"></a>    <span class="n">chunk_name</span><span class="p">,</span> <span class="n">png_const_bytep</span> <span class="n">data</span><span class="p">,</span> <span class="n">png_size_t</span> <span class="n">length</span><span class="p">));</span>
<a name="gbab-1025"></a>
<a name="gbab-1026"></a><span class="cm">/* Write the start of a PNG chunk - length and chunk name. */</span>
<a name="gbab-1027"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_chunk_start</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1028"></a>    <span class="n">png_const_bytep</span> <span class="n">chunk_name</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">length</span><span class="p">));</span>
<a name="gbab-1029"></a>
<a name="gbab-1030"></a><span class="cm">/* Write the data of a PNG chunk started with png_write_chunk_start(). */</span>
<a name="gbab-1031"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_chunk_data</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1032"></a>    <span class="n">png_const_bytep</span> <span class="n">data</span><span class="p">,</span> <span class="n">png_size_t</span> <span class="n">length</span><span class="p">));</span>
<a name="gbab-1033"></a>
<a name="gbab-1034"></a><span class="cm">/* Finish a chunk started with png_write_chunk_start() (includes CRC). */</span>
<a name="gbab-1035"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_chunk_end</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1036"></a>
<a name="gbab-1037"></a><span class="cm">/* Allocate and initialize the info structure */</span>
<a name="gbab-1038"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">png_infop</span><span class="p">,</span> <span class="n">png_create_info_struct</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">),</span>
<a name="gbab-1039"></a>    <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1040"></a>
<a name="gbab-1041"></a><span class="cm">/* DEPRECATED: this function allowed init structures to be created using the</span>
<a name="gbab-1042"></a><span class="cm"> * default allocation method (typically malloc).  Use is deprecated in 1.6.0 and</span>
<a name="gbab-1043"></a><span class="cm"> * the API will be removed in the future.</span>
<a name="gbab-1044"></a><span class="cm"> */</span>
<a name="gbab-1045"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_info_init_3</span><span class="p">,</span> <span class="p">(</span><span class="n">png_infopp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-1046"></a>    <span class="n">png_size_t</span> <span class="n">png_info_struct_size</span><span class="p">),</span> <span class="n">PNG_DEPRECATED</span><span class="p">);</span>
<a name="gbab-1047"></a>
<a name="gbab-1048"></a><span class="cm">/* Writes all the PNG information before the image. */</span>
<a name="gbab-1049"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_info_before_PLTE</span><span class="p">,</span>
<a name="gbab-1050"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1051"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_info</span><span class="p">,</span>
<a name="gbab-1052"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1053"></a>
<a name="gbab-1054"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-1055"></a><span class="cm">/* Read the information before the actual image data. */</span>
<a name="gbab-1056"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_info</span><span class="p">,</span>
<a name="gbab-1057"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1058"></a><span class="cp">#endif</span>
<a name="gbab-1059"></a>
<a name="gbab-1060"></a><span class="cp">#ifdef PNG_TIME_RFC1123_SUPPORTED</span>
<a name="gbab-1061"></a>   <span class="cm">/* Convert to a US string format: there is no localization support in this</span>
<a name="gbab-1062"></a><span class="cm">    * routine.  The original implementation used a 29 character buffer in</span>
<a name="gbab-1063"></a><span class="cm">    * png_struct, this will be removed in future versions.</span>
<a name="gbab-1064"></a><span class="cm">    */</span>
<a name="gbab-1065"></a><span class="cp">#if PNG_LIBPNG_VER &lt; 10700</span>
<a name="gbab-1066"></a><span class="cm">/* To do: remove this from libpng17 (and from libpng17/png.c and pngstruct.h) */</span>
<a name="gbab-1067"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">,</span> <span class="n">png_convert_to_rfc1123</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1068"></a>    <span class="n">png_const_timep</span> <span class="n">ptime</span><span class="p">),</span><span class="n">PNG_DEPRECATED</span><span class="p">);</span>
<a name="gbab-1069"></a><span class="cp">#endif</span>
<a name="gbab-1070"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">241</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_convert_to_rfc1123_buffer</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span> <span class="n">out</span><span class="p">[</span><span class="mi">29</span><span class="p">],</span>
<a name="gbab-1071"></a>    <span class="n">png_const_timep</span> <span class="n">ptime</span><span class="p">));</span>
<a name="gbab-1072"></a><span class="cp">#endif</span>
<a name="gbab-1073"></a>
<a name="gbab-1074"></a><span class="cp">#ifdef PNG_CONVERT_tIME_SUPPORTED</span>
<a name="gbab-1075"></a><span class="cm">/* Convert from a struct tm to png_time */</span>
<a name="gbab-1076"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_convert_from_struct_tm</span><span class="p">,</span> <span class="p">(</span><span class="n">png_timep</span> <span class="n">ptime</span><span class="p">,</span>
<a name="gbab-1077"></a>    <span class="k">const</span> <span class="k">struct</span> <span class="n">tm</span> <span class="o">*</span> <span class="n">ttime</span><span class="p">));</span>
<a name="gbab-1078"></a>
<a name="gbab-1079"></a><span class="cm">/* Convert from time_t to png_time.  Uses gmtime() */</span>
<a name="gbab-1080"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_convert_from_time_t</span><span class="p">,</span> <span class="p">(</span><span class="n">png_timep</span> <span class="n">ptime</span><span class="p">,</span> <span class="kt">time_t</span> <span class="n">ttime</span><span class="p">));</span>
<a name="gbab-1081"></a><span class="cp">#endif </span><span class="cm">/* CONVERT_tIME */</span><span class="cp"></span>
<a name="gbab-1082"></a>
<a name="gbab-1083"></a><span class="cp">#ifdef PNG_READ_EXPAND_SUPPORTED</span>
<a name="gbab-1084"></a><span class="cm">/* Expand data to 24-bit RGB, or 8-bit grayscale, with alpha if available. */</span>
<a name="gbab-1085"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_expand</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1086"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_expand_gray_1_2_4_to_8</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1087"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_palette_to_rgb</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1088"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_tRNS_to_alpha</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1089"></a><span class="cp">#endif</span>
<a name="gbab-1090"></a>
<a name="gbab-1091"></a><span class="cp">#ifdef PNG_READ_EXPAND_16_SUPPORTED</span>
<a name="gbab-1092"></a><span class="cm">/* Expand to 16-bit channels, forces conversion of palette to RGB and expansion</span>
<a name="gbab-1093"></a><span class="cm"> * of a tRNS chunk if present.</span>
<a name="gbab-1094"></a><span class="cm"> */</span>
<a name="gbab-1095"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_expand_16</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1096"></a><span class="cp">#endif</span>
<a name="gbab-1097"></a>
<a name="gbab-1098"></a><span class="cp">#if defined(PNG_READ_BGR_SUPPORTED) || defined(PNG_WRITE_BGR_SUPPORTED)</span>
<a name="gbab-1099"></a><span class="cm">/* Use blue, green, red order for pixels. */</span>
<a name="gbab-1100"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_bgr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1101"></a><span class="cp">#endif</span>
<a name="gbab-1102"></a>
<a name="gbab-1103"></a><span class="cp">#ifdef PNG_READ_GRAY_TO_RGB_SUPPORTED</span>
<a name="gbab-1104"></a><span class="cm">/* Expand the grayscale to 24-bit RGB if necessary. */</span>
<a name="gbab-1105"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_gray_to_rgb</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1106"></a><span class="cp">#endif</span>
<a name="gbab-1107"></a>
<a name="gbab-1108"></a><span class="cp">#ifdef PNG_READ_RGB_TO_GRAY_SUPPORTED</span>
<a name="gbab-1109"></a><span class="cm">/* Reduce RGB to grayscale. */</span>
<a name="gbab-1110"></a><span class="cp">#define PNG_ERROR_ACTION_NONE  1</span>
<a name="gbab-1111"></a><span class="cp">#define PNG_ERROR_ACTION_WARN  2</span>
<a name="gbab-1112"></a><span class="cp">#define PNG_ERROR_ACTION_ERROR 3</span>
<a name="gbab-1113"></a><span class="cp">#define PNG_RGB_TO_GRAY_DEFAULT (-1)</span><span class="cm">/*for red/green coefficients*/</span><span class="cp"></span>
<a name="gbab-1114"></a>
<a name="gbab-1115"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_rgb_to_gray</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1116"></a>    <span class="kt">int</span> <span class="n">error_action</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red</span><span class="p">,</span> <span class="kt">double</span> <span class="n">green</span><span class="p">))</span>
<a name="gbab-1117"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_rgb_to_gray_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1118"></a>    <span class="kt">int</span> <span class="n">error_action</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">red</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">green</span><span class="p">))</span>
<a name="gbab-1119"></a>
<a name="gbab-1120"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_rgb_to_gray_status</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span>
<a name="gbab-1121"></a>    <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1122"></a><span class="cp">#endif</span>
<a name="gbab-1123"></a>
<a name="gbab-1124"></a><span class="cp">#ifdef PNG_BUILD_GRAYSCALE_PALETTE_SUPPORTED</span>
<a name="gbab-1125"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_build_grayscale_palette</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span> <span class="n">bit_depth</span><span class="p">,</span>
<a name="gbab-1126"></a>    <span class="n">png_colorp</span> <span class="n">palette</span><span class="p">));</span>
<a name="gbab-1127"></a><span class="cp">#endif</span>
<a name="gbab-1128"></a>
<a name="gbab-1129"></a><span class="cp">#ifdef PNG_READ_ALPHA_MODE_SUPPORTED</span>
<a name="gbab-1130"></a><span class="cm">/* How the alpha channel is interpreted - this affects how the color channels</span>
<a name="gbab-1131"></a><span class="cm"> * of a PNG file are returned to the calling application when an alpha channel,</span>
<a name="gbab-1132"></a><span class="cm"> * or a tRNS chunk in a palette file, is present.</span>
<a name="gbab-1133"></a><span class="cm"> *</span>
<a name="gbab-1134"></a><span class="cm"> * This has no effect on the way pixels are written into a PNG output</span>
<a name="gbab-1135"></a><span class="cm"> * datastream. The color samples in a PNG datastream are never premultiplied</span>
<a name="gbab-1136"></a><span class="cm"> * with the alpha samples.</span>
<a name="gbab-1137"></a><span class="cm"> *</span>
<a name="gbab-1138"></a><span class="cm"> * The default is to return data according to the PNG specification: the alpha</span>
<a name="gbab-1139"></a><span class="cm"> * channel is a linear measure of the contribution of the pixel to the</span>
<a name="gbab-1140"></a><span class="cm"> * corresponding composited pixel, and the color channels are unassociated</span>
<a name="gbab-1141"></a><span class="cm"> * (not premultiplied).  The gamma encoded color channels must be scaled</span>
<a name="gbab-1142"></a><span class="cm"> * according to the contribution and to do this it is necessary to undo</span>
<a name="gbab-1143"></a><span class="cm"> * the encoding, scale the color values, perform the composition and reencode</span>
<a name="gbab-1144"></a><span class="cm"> * the values.  This is the &#39;PNG&#39; mode.</span>
<a name="gbab-1145"></a><span class="cm"> *</span>
<a name="gbab-1146"></a><span class="cm"> * The alternative is to &#39;associate&#39; the alpha with the color information by</span>
<a name="gbab-1147"></a><span class="cm"> * storing color channel values that have been scaled by the alpha.</span>
<a name="gbab-1148"></a><span class="cm"> * image.  These are the &#39;STANDARD&#39;, &#39;ASSOCIATED&#39; or &#39;PREMULTIPLIED&#39; modes</span>
<a name="gbab-1149"></a><span class="cm"> * (the latter being the two common names for associated alpha color channels).</span>
<a name="gbab-1150"></a><span class="cm"> *</span>
<a name="gbab-1151"></a><span class="cm"> * For the &#39;OPTIMIZED&#39; mode, a pixel is treated as opaque only if the alpha</span>
<a name="gbab-1152"></a><span class="cm"> * value is equal to the maximum value.</span>
<a name="gbab-1153"></a><span class="cm"> *</span>
<a name="gbab-1154"></a><span class="cm"> * The final choice is to gamma encode the alpha channel as well.  This is</span>
<a name="gbab-1155"></a><span class="cm"> * broken because, in practice, no implementation that uses this choice</span>
<a name="gbab-1156"></a><span class="cm"> * correctly undoes the encoding before handling alpha composition.  Use this</span>
<a name="gbab-1157"></a><span class="cm"> * choice only if other serious errors in the software or hardware you use</span>
<a name="gbab-1158"></a><span class="cm"> * mandate it; the typical serious error is for dark halos to appear around</span>
<a name="gbab-1159"></a><span class="cm"> * opaque areas of the composited PNG image because of arithmetic overflow.</span>
<a name="gbab-1160"></a><span class="cm"> *</span>
<a name="gbab-1161"></a><span class="cm"> * The API function png_set_alpha_mode specifies which of these choices to use</span>
<a name="gbab-1162"></a><span class="cm"> * with an enumerated &#39;mode&#39; value and the gamma of the required output:</span>
<a name="gbab-1163"></a><span class="cm"> */</span>
<a name="gbab-1164"></a><span class="cp">#define PNG_ALPHA_PNG           0 </span><span class="cm">/* according to the PNG standard */</span><span class="cp"></span>
<a name="gbab-1165"></a><span class="cp">#define PNG_ALPHA_STANDARD      1 </span><span class="cm">/* according to Porter/Duff */</span><span class="cp"></span>
<a name="gbab-1166"></a><span class="cp">#define PNG_ALPHA_ASSOCIATED    1 </span><span class="cm">/* as above; this is the normal practice */</span><span class="cp"></span>
<a name="gbab-1167"></a><span class="cp">#define PNG_ALPHA_PREMULTIPLIED 1 </span><span class="cm">/* as above */</span><span class="cp"></span>
<a name="gbab-1168"></a><span class="cp">#define PNG_ALPHA_OPTIMIZED     2 </span><span class="cm">/* &#39;PNG&#39; for opaque pixels, else &#39;STANDARD&#39; */</span><span class="cp"></span>
<a name="gbab-1169"></a><span class="cp">#define PNG_ALPHA_BROKEN        3 </span><span class="cm">/* the alpha channel is gamma encoded */</span><span class="cp"></span>
<a name="gbab-1170"></a>
<a name="gbab-1171"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">227</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_alpha_mode</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">,</span>
<a name="gbab-1172"></a>    <span class="kt">double</span> <span class="n">output_gamma</span><span class="p">))</span>
<a name="gbab-1173"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">228</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_alpha_mode_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1174"></a>    <span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">output_gamma</span><span class="p">))</span>
<a name="gbab-1175"></a><span class="cp">#endif</span>
<a name="gbab-1176"></a>
<a name="gbab-1177"></a><span class="cp">#if defined(PNG_GAMMA_SUPPORTED) || defined(PNG_READ_ALPHA_MODE_SUPPORTED)</span>
<a name="gbab-1178"></a><span class="cm">/* The output_gamma value is a screen gamma in libpng terminology: it expresses</span>
<a name="gbab-1179"></a><span class="cm"> * how to decode the output values, not how they are encoded.</span>
<a name="gbab-1180"></a><span class="cm"> */</span>
<a name="gbab-1181"></a><span class="cp">#define PNG_DEFAULT_sRGB -1       </span><span class="cm">/* sRGB gamma and color space */</span><span class="cp"></span>
<a name="gbab-1182"></a><span class="cp">#define PNG_GAMMA_MAC_18 -2       </span><span class="cm">/* Old Mac &#39;1.8&#39; gamma and color space */</span><span class="cp"></span>
<a name="gbab-1183"></a><span class="cp">#define PNG_GAMMA_sRGB   220000   </span><span class="cm">/* Television standards--matches sRGB gamma */</span><span class="cp"></span>
<a name="gbab-1184"></a><span class="cp">#define PNG_GAMMA_LINEAR PNG_FP_1 </span><span class="cm">/* Linear */</span><span class="cp"></span>
<a name="gbab-1185"></a><span class="cp">#endif</span>
<a name="gbab-1186"></a>
<a name="gbab-1187"></a><span class="cm">/* The following are examples of calls to png_set_alpha_mode to achieve the</span>
<a name="gbab-1188"></a><span class="cm"> * required overall gamma correction and, where necessary, alpha</span>
<a name="gbab-1189"></a><span class="cm"> * premultiplication.</span>
<a name="gbab-1190"></a><span class="cm"> *</span>
<a name="gbab-1191"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_PNG, PNG_DEFAULT_sRGB);</span>
<a name="gbab-1192"></a><span class="cm"> *    This is the default libpng handling of the alpha channel - it is not</span>
<a name="gbab-1193"></a><span class="cm"> *    pre-multiplied into the color components.  In addition the call states</span>
<a name="gbab-1194"></a><span class="cm"> *    that the output is for a sRGB system and causes all PNG files without gAMA</span>
<a name="gbab-1195"></a><span class="cm"> *    chunks to be assumed to be encoded using sRGB.</span>
<a name="gbab-1196"></a><span class="cm"> *</span>
<a name="gbab-1197"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_PNG, PNG_GAMMA_MAC);</span>
<a name="gbab-1198"></a><span class="cm"> *    In this case the output is assumed to be something like an sRGB conformant</span>
<a name="gbab-1199"></a><span class="cm"> *    display preceeded by a power-law lookup table of power 1.45.  This is how</span>
<a name="gbab-1200"></a><span class="cm"> *    early Mac systems behaved.</span>
<a name="gbab-1201"></a><span class="cm"> *</span>
<a name="gbab-1202"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_STANDARD, PNG_GAMMA_LINEAR);</span>
<a name="gbab-1203"></a><span class="cm"> *    This is the classic Jim Blinn approach and will work in academic</span>
<a name="gbab-1204"></a><span class="cm"> *    environments where everything is done by the book.  It has the shortcoming</span>
<a name="gbab-1205"></a><span class="cm"> *    of assuming that input PNG data with no gamma information is linear - this</span>
<a name="gbab-1206"></a><span class="cm"> *    is unlikely to be correct unless the PNG files where generated locally.</span>
<a name="gbab-1207"></a><span class="cm"> *    Most of the time the output precision will be so low as to show</span>
<a name="gbab-1208"></a><span class="cm"> *    significant banding in dark areas of the image.</span>
<a name="gbab-1209"></a><span class="cm"> *</span>
<a name="gbab-1210"></a><span class="cm"> * png_set_expand_16(pp);</span>
<a name="gbab-1211"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_STANDARD, PNG_DEFAULT_sRGB);</span>
<a name="gbab-1212"></a><span class="cm"> *    This is a somewhat more realistic Jim Blinn inspired approach.  PNG files</span>
<a name="gbab-1213"></a><span class="cm"> *    are assumed to have the sRGB encoding if not marked with a gamma value and</span>
<a name="gbab-1214"></a><span class="cm"> *    the output is always 16 bits per component.  This permits accurate scaling</span>
<a name="gbab-1215"></a><span class="cm"> *    and processing of the data.  If you know that your input PNG files were</span>
<a name="gbab-1216"></a><span class="cm"> *    generated locally you might need to replace PNG_DEFAULT_sRGB with the</span>
<a name="gbab-1217"></a><span class="cm"> *    correct value for your system.</span>
<a name="gbab-1218"></a><span class="cm"> *</span>
<a name="gbab-1219"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_OPTIMIZED, PNG_DEFAULT_sRGB);</span>
<a name="gbab-1220"></a><span class="cm"> *    If you just need to composite the PNG image onto an existing background</span>
<a name="gbab-1221"></a><span class="cm"> *    and if you control the code that does this you can use the optimization</span>
<a name="gbab-1222"></a><span class="cm"> *    setting.  In this case you just copy completely opaque pixels to the</span>
<a name="gbab-1223"></a><span class="cm"> *    output.  For pixels that are not completely transparent (you just skip</span>
<a name="gbab-1224"></a><span class="cm"> *    those) you do the composition math using png_composite or png_composite_16</span>
<a name="gbab-1225"></a><span class="cm"> *    below then encode the resultant 8-bit or 16-bit values to match the output</span>
<a name="gbab-1226"></a><span class="cm"> *    encoding.</span>
<a name="gbab-1227"></a><span class="cm"> *</span>
<a name="gbab-1228"></a><span class="cm"> * Other cases</span>
<a name="gbab-1229"></a><span class="cm"> *    If neither the PNG nor the standard linear encoding work for you because</span>
<a name="gbab-1230"></a><span class="cm"> *    of the software or hardware you use then you have a big problem.  The PNG</span>
<a name="gbab-1231"></a><span class="cm"> *    case will probably result in halos around the image.  The linear encoding</span>
<a name="gbab-1232"></a><span class="cm"> *    will probably result in a washed out, too bright, image (it&#39;s actually too</span>
<a name="gbab-1233"></a><span class="cm"> *    contrasty.)  Try the ALPHA_OPTIMIZED mode above - this will probably</span>
<a name="gbab-1234"></a><span class="cm"> *    substantially reduce the halos.  Alternatively try:</span>
<a name="gbab-1235"></a><span class="cm"> *</span>
<a name="gbab-1236"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_BROKEN, PNG_DEFAULT_sRGB);</span>
<a name="gbab-1237"></a><span class="cm"> *    This option will also reduce the halos, but there will be slight dark</span>
<a name="gbab-1238"></a><span class="cm"> *    halos round the opaque parts of the image where the background is light.</span>
<a name="gbab-1239"></a><span class="cm"> *    In the OPTIMIZED mode the halos will be light halos where the background</span>
<a name="gbab-1240"></a><span class="cm"> *    is dark.  Take your pick - the halos are unavoidable unless you can get</span>
<a name="gbab-1241"></a><span class="cm"> *    your hardware/software fixed!  (The OPTIMIZED approach is slightly</span>
<a name="gbab-1242"></a><span class="cm"> *    faster.)</span>
<a name="gbab-1243"></a><span class="cm"> *</span>
<a name="gbab-1244"></a><span class="cm"> * When the default gamma of PNG files doesn&#39;t match the output gamma.</span>
<a name="gbab-1245"></a><span class="cm"> *    If you have PNG files with no gamma information png_set_alpha_mode allows</span>
<a name="gbab-1246"></a><span class="cm"> *    you to provide a default gamma, but it also sets the ouput gamma to the</span>
<a name="gbab-1247"></a><span class="cm"> *    matching value.  If you know your PNG files have a gamma that doesn&#39;t</span>
<a name="gbab-1248"></a><span class="cm"> *    match the output you can take advantage of the fact that</span>
<a name="gbab-1249"></a><span class="cm"> *    png_set_alpha_mode always sets the output gamma but only sets the PNG</span>
<a name="gbab-1250"></a><span class="cm"> *    default if it is not already set:</span>
<a name="gbab-1251"></a><span class="cm"> *</span>
<a name="gbab-1252"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_PNG, PNG_DEFAULT_sRGB);</span>
<a name="gbab-1253"></a><span class="cm"> * png_set_alpha_mode(pp, PNG_ALPHA_PNG, PNG_GAMMA_MAC);</span>
<a name="gbab-1254"></a><span class="cm"> *    The first call sets both the default and the output gamma values, the</span>
<a name="gbab-1255"></a><span class="cm"> *    second call overrides the output gamma without changing the default.  This</span>
<a name="gbab-1256"></a><span class="cm"> *    is easier than achieving the same effect with png_set_gamma.  You must use</span>
<a name="gbab-1257"></a><span class="cm"> *    PNG_ALPHA_PNG for the first call - internal checking in png_set_alpha will</span>
<a name="gbab-1258"></a><span class="cm"> *    fire if more than one call to png_set_alpha_mode and png_set_background is</span>
<a name="gbab-1259"></a><span class="cm"> *    made in the same read operation, however multiple calls with PNG_ALPHA_PNG</span>
<a name="gbab-1260"></a><span class="cm"> *    are ignored.</span>
<a name="gbab-1261"></a><span class="cm"> */</span>
<a name="gbab-1262"></a>
<a name="gbab-1263"></a><span class="cp">#ifdef PNG_READ_STRIP_ALPHA_SUPPORTED</span>
<a name="gbab-1264"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_strip_alpha</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1265"></a><span class="cp">#endif</span>
<a name="gbab-1266"></a>
<a name="gbab-1267"></a><span class="cp">#if defined(PNG_READ_SWAP_ALPHA_SUPPORTED) || \</span>
<a name="gbab-1268"></a><span class="cp">    defined(PNG_WRITE_SWAP_ALPHA_SUPPORTED)</span>
<a name="gbab-1269"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_swap_alpha</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1270"></a><span class="cp">#endif</span>
<a name="gbab-1271"></a>
<a name="gbab-1272"></a><span class="cp">#if defined(PNG_READ_INVERT_ALPHA_SUPPORTED) || \</span>
<a name="gbab-1273"></a><span class="cp">    defined(PNG_WRITE_INVERT_ALPHA_SUPPORTED)</span>
<a name="gbab-1274"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_invert_alpha</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1275"></a><span class="cp">#endif</span>
<a name="gbab-1276"></a>
<a name="gbab-1277"></a><span class="cp">#if defined(PNG_READ_FILLER_SUPPORTED) || defined(PNG_WRITE_FILLER_SUPPORTED)</span>
<a name="gbab-1278"></a><span class="cm">/* Add a filler byte to 8-bit or 16-bit Gray or 24-bit or 48-bit RGB images. */</span>
<a name="gbab-1279"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_filler</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">filler</span><span class="p">,</span>
<a name="gbab-1280"></a>    <span class="kt">int</span> <span class="n">flags</span><span class="p">));</span>
<a name="gbab-1281"></a><span class="cm">/* The values of the PNG_FILLER_ defines should NOT be changed */</span>
<a name="gbab-1282"></a><span class="cp">#  define PNG_FILLER_BEFORE 0</span>
<a name="gbab-1283"></a><span class="cp">#  define PNG_FILLER_AFTER 1</span>
<a name="gbab-1284"></a><span class="cm">/* Add an alpha byte to 8-bit or 16-bit Gray or 24-bit or 48-bit RGB images. */</span>
<a name="gbab-1285"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_add_alpha</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1286"></a>    <span class="n">png_uint_32</span> <span class="n">filler</span><span class="p">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="p">));</span>
<a name="gbab-1287"></a><span class="cp">#endif </span><span class="cm">/* READ_FILLER || WRITE_FILLER */</span><span class="cp"></span>
<a name="gbab-1288"></a>
<a name="gbab-1289"></a><span class="cp">#if defined(PNG_READ_SWAP_SUPPORTED) || defined(PNG_WRITE_SWAP_SUPPORTED)</span>
<a name="gbab-1290"></a><span class="cm">/* Swap bytes in 16-bit depth files. */</span>
<a name="gbab-1291"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_swap</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1292"></a><span class="cp">#endif</span>
<a name="gbab-1293"></a>
<a name="gbab-1294"></a><span class="cp">#if defined(PNG_READ_PACK_SUPPORTED) || defined(PNG_WRITE_PACK_SUPPORTED)</span>
<a name="gbab-1295"></a><span class="cm">/* Use 1 byte per pixel in 1, 2, or 4-bit depth files. */</span>
<a name="gbab-1296"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_packing</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1297"></a><span class="cp">#endif</span>
<a name="gbab-1298"></a>
<a name="gbab-1299"></a><span class="cp">#if defined(PNG_READ_PACKSWAP_SUPPORTED) || \</span>
<a name="gbab-1300"></a><span class="cp">    defined(PNG_WRITE_PACKSWAP_SUPPORTED)</span>
<a name="gbab-1301"></a><span class="cm">/* Swap packing order of pixels in bytes. */</span>
<a name="gbab-1302"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">43</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_packswap</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1303"></a><span class="cp">#endif</span>
<a name="gbab-1304"></a>
<a name="gbab-1305"></a><span class="cp">#if defined(PNG_READ_SHIFT_SUPPORTED) || defined(PNG_WRITE_SHIFT_SUPPORTED)</span>
<a name="gbab-1306"></a><span class="cm">/* Converts files to legal bit depths. */</span>
<a name="gbab-1307"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_shift</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_color_8p</span>
<a name="gbab-1308"></a>    <span class="n">true_bits</span><span class="p">));</span>
<a name="gbab-1309"></a><span class="cp">#endif</span>
<a name="gbab-1310"></a>
<a name="gbab-1311"></a><span class="cp">#if defined(PNG_READ_INTERLACING_SUPPORTED) || \</span>
<a name="gbab-1312"></a><span class="cp">    defined(PNG_WRITE_INTERLACING_SUPPORTED)</span>
<a name="gbab-1313"></a><span class="cm">/* Have the code handle the interlacing.  Returns the number of passes.</span>
<a name="gbab-1314"></a><span class="cm"> * MUST be called before png_read_update_info or png_start_read_image,</span>
<a name="gbab-1315"></a><span class="cm"> * otherwise it will not have the desired effect.  Note that it is still</span>
<a name="gbab-1316"></a><span class="cm"> * necessary to call png_read_row or png_read_rows png_get_image_height</span>
<a name="gbab-1317"></a><span class="cm"> * times for each pass.</span>
<a name="gbab-1318"></a><span class="cm">*/</span>
<a name="gbab-1319"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_set_interlace_handling</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1320"></a><span class="cp">#endif</span>
<a name="gbab-1321"></a>
<a name="gbab-1322"></a><span class="cp">#if defined(PNG_READ_INVERT_SUPPORTED) || defined(PNG_WRITE_INVERT_SUPPORTED)</span>
<a name="gbab-1323"></a><span class="cm">/* Invert monochrome files */</span>
<a name="gbab-1324"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_invert_mono</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1325"></a><span class="cp">#endif</span>
<a name="gbab-1326"></a>
<a name="gbab-1327"></a><span class="cp">#ifdef PNG_READ_BACKGROUND_SUPPORTED</span>
<a name="gbab-1328"></a><span class="cm">/* Handle alpha and tRNS by replacing with a background color.  Prior to</span>
<a name="gbab-1329"></a><span class="cm"> * libpng-1.5.4 this API must not be called before the PNG file header has been</span>
<a name="gbab-1330"></a><span class="cm"> * read.  Doing so will result in unexpected behavior and possible warnings or</span>
<a name="gbab-1331"></a><span class="cm"> * errors if the PNG file contains a bKGD chunk.</span>
<a name="gbab-1332"></a><span class="cm"> */</span>
<a name="gbab-1333"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_background</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1334"></a>    <span class="n">png_const_color_16p</span> <span class="n">background_color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">background_gamma_code</span><span class="p">,</span>
<a name="gbab-1335"></a>    <span class="kt">int</span> <span class="n">need_expand</span><span class="p">,</span> <span class="kt">double</span> <span class="n">background_gamma</span><span class="p">))</span>
<a name="gbab-1336"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">215</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_background_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1337"></a>    <span class="n">png_const_color_16p</span> <span class="n">background_color</span><span class="p">,</span> <span class="kt">int</span> <span class="n">background_gamma_code</span><span class="p">,</span>
<a name="gbab-1338"></a>    <span class="kt">int</span> <span class="n">need_expand</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">background_gamma</span><span class="p">))</span>
<a name="gbab-1339"></a><span class="cp">#endif</span>
<a name="gbab-1340"></a><span class="cp">#ifdef PNG_READ_BACKGROUND_SUPPORTED</span>
<a name="gbab-1341"></a><span class="cp">#  define PNG_BACKGROUND_GAMMA_UNKNOWN 0</span>
<a name="gbab-1342"></a><span class="cp">#  define PNG_BACKGROUND_GAMMA_SCREEN  1</span>
<a name="gbab-1343"></a><span class="cp">#  define PNG_BACKGROUND_GAMMA_FILE    2</span>
<a name="gbab-1344"></a><span class="cp">#  define PNG_BACKGROUND_GAMMA_UNIQUE  3</span>
<a name="gbab-1345"></a><span class="cp">#endif</span>
<a name="gbab-1346"></a>
<a name="gbab-1347"></a><span class="cp">#ifdef PNG_READ_SCALE_16_TO_8_SUPPORTED</span>
<a name="gbab-1348"></a><span class="cm">/* Scale a 16-bit depth file down to 8-bit, accurately. */</span>
<a name="gbab-1349"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">229</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_scale_16</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1350"></a><span class="cp">#endif</span>
<a name="gbab-1351"></a>
<a name="gbab-1352"></a><span class="cp">#ifdef PNG_READ_STRIP_16_TO_8_SUPPORTED</span>
<a name="gbab-1353"></a><span class="cp">#define PNG_READ_16_TO_8_SUPPORTED </span><span class="cm">/* Name prior to 1.5.4 */</span><span class="cp"></span>
<a name="gbab-1354"></a><span class="cm">/* Strip the second byte of information from a 16-bit depth file. */</span>
<a name="gbab-1355"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_strip_16</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1356"></a><span class="cp">#endif</span>
<a name="gbab-1357"></a>
<a name="gbab-1358"></a><span class="cp">#ifdef PNG_READ_QUANTIZE_SUPPORTED</span>
<a name="gbab-1359"></a><span class="cm">/* Turn on quantizing, and reduce the palette to the number of colors</span>
<a name="gbab-1360"></a><span class="cm"> * available.</span>
<a name="gbab-1361"></a><span class="cm"> */</span>
<a name="gbab-1362"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_quantize</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1363"></a>    <span class="n">png_colorp</span> <span class="n">palette</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_palette</span><span class="p">,</span> <span class="kt">int</span> <span class="n">maximum_colors</span><span class="p">,</span>
<a name="gbab-1364"></a>    <span class="n">png_const_uint_16p</span> <span class="n">histogram</span><span class="p">,</span> <span class="kt">int</span> <span class="n">full_quantize</span><span class="p">));</span>
<a name="gbab-1365"></a><span class="cp">#endif</span>
<a name="gbab-1366"></a>
<a name="gbab-1367"></a><span class="cp">#ifdef PNG_READ_GAMMA_SUPPORTED</span>
<a name="gbab-1368"></a><span class="cm">/* The threshold on gamma processing is configurable but hard-wired into the</span>
<a name="gbab-1369"></a><span class="cm"> * library.  The following is the floating point variant.</span>
<a name="gbab-1370"></a><span class="cm"> */</span>
<a name="gbab-1371"></a><span class="cp">#define PNG_GAMMA_THRESHOLD (PNG_GAMMA_THRESHOLD_FIXED*.00001)</span>
<a name="gbab-1372"></a>
<a name="gbab-1373"></a><span class="cm">/* Handle gamma correction. Screen_gamma=(display_exponent).</span>
<a name="gbab-1374"></a><span class="cm"> * NOTE: this API simply sets the screen and file gamma values. It will</span>
<a name="gbab-1375"></a><span class="cm"> * therefore override the value for gamma in a PNG file if it is called after</span>
<a name="gbab-1376"></a><span class="cm"> * the file header has been read - use with care  - call before reading the PNG</span>
<a name="gbab-1377"></a><span class="cm"> * file for best results!</span>
<a name="gbab-1378"></a><span class="cm"> *</span>
<a name="gbab-1379"></a><span class="cm"> * These routines accept the same gamma values as png_set_alpha_mode (described</span>
<a name="gbab-1380"></a><span class="cm"> * above).  The PNG_GAMMA_ defines and PNG_DEFAULT_sRGB can be passed to either</span>
<a name="gbab-1381"></a><span class="cm"> * API (floating point or fixed.)  Notice, however, that the &#39;file_gamma&#39; value</span>
<a name="gbab-1382"></a><span class="cm"> * is the inverse of a &#39;screen gamma&#39; value.</span>
<a name="gbab-1383"></a><span class="cm"> */</span>
<a name="gbab-1384"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_gamma</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1385"></a>    <span class="kt">double</span> <span class="n">screen_gamma</span><span class="p">,</span> <span class="kt">double</span> <span class="n">override_file_gamma</span><span class="p">))</span>
<a name="gbab-1386"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">208</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_gamma_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1387"></a>    <span class="n">png_fixed_point</span> <span class="n">screen_gamma</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">override_file_gamma</span><span class="p">))</span>
<a name="gbab-1388"></a><span class="cp">#endif</span>
<a name="gbab-1389"></a>
<a name="gbab-1390"></a><span class="cp">#ifdef PNG_WRITE_FLUSH_SUPPORTED</span>
<a name="gbab-1391"></a><span class="cm">/* Set how many lines between output flushes - 0 for no flushing */</span>
<a name="gbab-1392"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_flush</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nrows</span><span class="p">));</span>
<a name="gbab-1393"></a><span class="cm">/* Flush the current PNG output buffer */</span>
<a name="gbab-1394"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">52</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_flush</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1395"></a><span class="cp">#endif</span>
<a name="gbab-1396"></a>
<a name="gbab-1397"></a><span class="cm">/* Optional update palette with requested transformations */</span>
<a name="gbab-1398"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_start_read_image</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1399"></a>
<a name="gbab-1400"></a><span class="cm">/* Optional call to update the users info structure */</span>
<a name="gbab-1401"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">54</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_update_info</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1402"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1403"></a>
<a name="gbab-1404"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-1405"></a><span class="cm">/* Read one or more rows of image data. */</span>
<a name="gbab-1406"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">55</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_rows</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_bytepp</span> <span class="n">row</span><span class="p">,</span>
<a name="gbab-1407"></a>    <span class="n">png_bytepp</span> <span class="n">display_row</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">num_rows</span><span class="p">));</span>
<a name="gbab-1408"></a><span class="cp">#endif</span>
<a name="gbab-1409"></a>
<a name="gbab-1410"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-1411"></a><span class="cm">/* Read a row of data. */</span>
<a name="gbab-1412"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">56</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_row</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_bytep</span> <span class="n">row</span><span class="p">,</span>
<a name="gbab-1413"></a>    <span class="n">png_bytep</span> <span class="n">display_row</span><span class="p">));</span>
<a name="gbab-1414"></a><span class="cp">#endif</span>
<a name="gbab-1415"></a>
<a name="gbab-1416"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-1417"></a><span class="cm">/* Read the whole image into memory at once. */</span>
<a name="gbab-1418"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">57</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_image</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_bytepp</span> <span class="n">image</span><span class="p">));</span>
<a name="gbab-1419"></a><span class="cp">#endif</span>
<a name="gbab-1420"></a>
<a name="gbab-1421"></a><span class="cm">/* Write a row of image data */</span>
<a name="gbab-1422"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">58</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_row</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1423"></a>    <span class="n">png_const_bytep</span> <span class="n">row</span><span class="p">));</span>
<a name="gbab-1424"></a>
<a name="gbab-1425"></a><span class="cm">/* Write a few rows of image data: (*row) is not written; however, the type</span>
<a name="gbab-1426"></a><span class="cm"> * is declared as writeable to maintain compatibility with previous versions</span>
<a name="gbab-1427"></a><span class="cm"> * of libpng and to allow the &#39;display_row&#39; array from read_rows to be passed</span>
<a name="gbab-1428"></a><span class="cm"> * unchanged to write_rows.</span>
<a name="gbab-1429"></a><span class="cm"> */</span>
<a name="gbab-1430"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_rows</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_bytepp</span> <span class="n">row</span><span class="p">,</span>
<a name="gbab-1431"></a>    <span class="n">png_uint_32</span> <span class="n">num_rows</span><span class="p">));</span>
<a name="gbab-1432"></a>
<a name="gbab-1433"></a><span class="cm">/* Write the image data */</span>
<a name="gbab-1434"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_image</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_bytepp</span> <span class="n">image</span><span class="p">));</span>
<a name="gbab-1435"></a>
<a name="gbab-1436"></a><span class="cm">/* Write the end of the PNG file. */</span>
<a name="gbab-1437"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_end</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1438"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1439"></a>
<a name="gbab-1440"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-1441"></a><span class="cm">/* Read the end of the PNG file. */</span>
<a name="gbab-1442"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_end</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1443"></a><span class="cp">#endif</span>
<a name="gbab-1444"></a>
<a name="gbab-1445"></a><span class="cm">/* Free any memory associated with the png_info_struct */</span>
<a name="gbab-1446"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">63</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_destroy_info_struct</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1447"></a>    <span class="n">png_infopp</span> <span class="n">info_ptr_ptr</span><span class="p">));</span>
<a name="gbab-1448"></a>
<a name="gbab-1449"></a><span class="cm">/* Free any memory associated with the png_struct and the png_info_structs */</span>
<a name="gbab-1450"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_destroy_read_struct</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structpp</span> <span class="n">png_ptr_ptr</span><span class="p">,</span>
<a name="gbab-1451"></a>    <span class="n">png_infopp</span> <span class="n">info_ptr_ptr</span><span class="p">,</span> <span class="n">png_infopp</span> <span class="n">end_info_ptr_ptr</span><span class="p">));</span>
<a name="gbab-1452"></a>
<a name="gbab-1453"></a><span class="cm">/* Free any memory associated with the png_struct and the png_info_structs */</span>
<a name="gbab-1454"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_destroy_write_struct</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structpp</span> <span class="n">png_ptr_ptr</span><span class="p">,</span>
<a name="gbab-1455"></a>    <span class="n">png_infopp</span> <span class="n">info_ptr_ptr</span><span class="p">));</span>
<a name="gbab-1456"></a>
<a name="gbab-1457"></a><span class="cm">/* Set the libpng method of handling chunk CRC errors */</span>
<a name="gbab-1458"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">66</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_crc_action</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">crit_action</span><span class="p">,</span>
<a name="gbab-1459"></a>    <span class="kt">int</span> <span class="n">ancil_action</span><span class="p">));</span>
<a name="gbab-1460"></a>
<a name="gbab-1461"></a><span class="cm">/* Values for png_set_crc_action() say how to handle CRC errors in</span>
<a name="gbab-1462"></a><span class="cm"> * ancillary and critical chunks, and whether to use the data contained</span>
<a name="gbab-1463"></a><span class="cm"> * therein.  Note that it is impossible to &quot;discard&quot; data in a critical</span>
<a name="gbab-1464"></a><span class="cm"> * chunk.  For versions prior to 0.90, the action was always error/quit,</span>
<a name="gbab-1465"></a><span class="cm"> * whereas in version 0.90 and later, the action for CRC errors in ancillary</span>
<a name="gbab-1466"></a><span class="cm"> * chunks is warn/discard.  These values should NOT be changed.</span>
<a name="gbab-1467"></a><span class="cm"> *</span>
<a name="gbab-1468"></a><span class="cm"> *      value                       action:critical     action:ancillary</span>
<a name="gbab-1469"></a><span class="cm"> */</span>
<a name="gbab-1470"></a><span class="cp">#define PNG_CRC_DEFAULT       0  </span><span class="cm">/* error/quit          warn/discard data */</span><span class="cp"></span>
<a name="gbab-1471"></a><span class="cp">#define PNG_CRC_ERROR_QUIT    1  </span><span class="cm">/* error/quit          error/quit        */</span><span class="cp"></span>
<a name="gbab-1472"></a><span class="cp">#define PNG_CRC_WARN_DISCARD  2  </span><span class="cm">/* (INVALID)           warn/discard data */</span><span class="cp"></span>
<a name="gbab-1473"></a><span class="cp">#define PNG_CRC_WARN_USE      3  </span><span class="cm">/* warn/use data       warn/use data     */</span><span class="cp"></span>
<a name="gbab-1474"></a><span class="cp">#define PNG_CRC_QUIET_USE     4  </span><span class="cm">/* quiet/use data      quiet/use data    */</span><span class="cp"></span>
<a name="gbab-1475"></a><span class="cp">#define PNG_CRC_NO_CHANGE     5  </span><span class="cm">/* use current value   use current value */</span><span class="cp"></span>
<a name="gbab-1476"></a>
<a name="gbab-1477"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-1478"></a><span class="cm">/* These functions give the user control over the scan-line filtering in</span>
<a name="gbab-1479"></a><span class="cm"> * libpng and the compression methods used by zlib.  These functions are</span>
<a name="gbab-1480"></a><span class="cm"> * mainly useful for testing, as the defaults should work with most users.</span>
<a name="gbab-1481"></a><span class="cm"> * Those users who are tight on memory or want faster performance at the</span>
<a name="gbab-1482"></a><span class="cm"> * expense of compression can modify them.  See the compression library</span>
<a name="gbab-1483"></a><span class="cm"> * header file (zlib.h) for an explination of the compression functions.</span>
<a name="gbab-1484"></a><span class="cm"> */</span>
<a name="gbab-1485"></a>
<a name="gbab-1486"></a><span class="cm">/* Set the filtering method(s) used by libpng.  Currently, the only valid</span>
<a name="gbab-1487"></a><span class="cm"> * value for &quot;method&quot; is 0.</span>
<a name="gbab-1488"></a><span class="cm"> */</span>
<a name="gbab-1489"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_filter</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">method</span><span class="p">,</span>
<a name="gbab-1490"></a>    <span class="kt">int</span> <span class="n">filters</span><span class="p">));</span>
<a name="gbab-1491"></a><span class="cp">#endif </span><span class="cm">/* WRITE */</span><span class="cp"></span>
<a name="gbab-1492"></a>
<a name="gbab-1493"></a><span class="cm">/* Flags for png_set_filter() to say which filters to use.  The flags</span>
<a name="gbab-1494"></a><span class="cm"> * are chosen so that they don&#39;t conflict with real filter types</span>
<a name="gbab-1495"></a><span class="cm"> * below, in case they are supplied instead of the #defined constants.</span>
<a name="gbab-1496"></a><span class="cm"> * These values should NOT be changed.</span>
<a name="gbab-1497"></a><span class="cm"> */</span>
<a name="gbab-1498"></a><span class="cp">#define PNG_NO_FILTERS     0x00</span>
<a name="gbab-1499"></a><span class="cp">#define PNG_FILTER_NONE    0x08</span>
<a name="gbab-1500"></a><span class="cp">#define PNG_FILTER_SUB     0x10</span>
<a name="gbab-1501"></a><span class="cp">#define PNG_FILTER_UP      0x20</span>
<a name="gbab-1502"></a><span class="cp">#define PNG_FILTER_AVG     0x40</span>
<a name="gbab-1503"></a><span class="cp">#define PNG_FILTER_PAETH   0x80</span>
<a name="gbab-1504"></a><span class="cp">#define PNG_FAST_FILTERS (PNG_FILTER_NONE | PNG_FILTER_SUB | PNG_FILTER_UP)</span>
<a name="gbab-1505"></a><span class="cp">#define PNG_ALL_FILTERS (PNG_FAST_FILTERS | PNG_FILTER_AVG | PNG_FILTER_PAETH)</span>
<a name="gbab-1506"></a>
<a name="gbab-1507"></a><span class="cm">/* Filter values (not flags) - used in pngwrite.c, pngwutil.c for now.</span>
<a name="gbab-1508"></a><span class="cm"> * These defines should NOT be changed.</span>
<a name="gbab-1509"></a><span class="cm"> */</span>
<a name="gbab-1510"></a><span class="cp">#define PNG_FILTER_VALUE_NONE  0</span>
<a name="gbab-1511"></a><span class="cp">#define PNG_FILTER_VALUE_SUB   1</span>
<a name="gbab-1512"></a><span class="cp">#define PNG_FILTER_VALUE_UP    2</span>
<a name="gbab-1513"></a><span class="cp">#define PNG_FILTER_VALUE_AVG   3</span>
<a name="gbab-1514"></a><span class="cp">#define PNG_FILTER_VALUE_PAETH 4</span>
<a name="gbab-1515"></a><span class="cp">#define PNG_FILTER_VALUE_LAST  5</span>
<a name="gbab-1516"></a>
<a name="gbab-1517"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-1518"></a><span class="cp">#ifdef PNG_WRITE_WEIGHTED_FILTER_SUPPORTED </span><span class="cm">/* DEPRECATED */</span><span class="cp"></span>
<a name="gbab-1519"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_filter_heuristics</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1520"></a>    <span class="kt">int</span> <span class="n">heuristic_method</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_weights</span><span class="p">,</span> <span class="n">png_const_doublep</span> <span class="n">filter_weights</span><span class="p">,</span>
<a name="gbab-1521"></a>    <span class="n">png_const_doublep</span> <span class="n">filter_costs</span><span class="p">))</span>
<a name="gbab-1522"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">209</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_filter_heuristics_fixed</span><span class="p">,</span>
<a name="gbab-1523"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">heuristic_method</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_weights</span><span class="p">,</span>
<a name="gbab-1524"></a>    <span class="n">png_const_fixed_point_p</span> <span class="n">filter_weights</span><span class="p">,</span>
<a name="gbab-1525"></a>    <span class="n">png_const_fixed_point_p</span> <span class="n">filter_costs</span><span class="p">))</span>
<a name="gbab-1526"></a><span class="cp">#endif </span><span class="cm">/* WRITE_WEIGHTED_FILTER */</span><span class="cp"></span>
<a name="gbab-1527"></a>
<a name="gbab-1528"></a><span class="cm">/* The following are no longer used and will be removed from libpng-1.7: */</span>
<a name="gbab-1529"></a><span class="cp">#define PNG_FILTER_HEURISTIC_DEFAULT    0  </span><span class="cm">/* Currently &quot;UNWEIGHTED&quot; */</span><span class="cp"></span>
<a name="gbab-1530"></a><span class="cp">#define PNG_FILTER_HEURISTIC_UNWEIGHTED 1  </span><span class="cm">/* Used by libpng &lt; 0.95 */</span><span class="cp"></span>
<a name="gbab-1531"></a><span class="cp">#define PNG_FILTER_HEURISTIC_WEIGHTED   2  </span><span class="cm">/* Experimental feature */</span><span class="cp"></span>
<a name="gbab-1532"></a><span class="cp">#define PNG_FILTER_HEURISTIC_LAST       3  </span><span class="cm">/* Not a valid value */</span><span class="cp"></span>
<a name="gbab-1533"></a>
<a name="gbab-1534"></a><span class="cm">/* Set the library compression level.  Currently, valid values range from</span>
<a name="gbab-1535"></a><span class="cm"> * 0 - 9, corresponding directly to the zlib compression levels 0 - 9</span>
<a name="gbab-1536"></a><span class="cm"> * (0 - no compression, 9 - &quot;maximal&quot; compression).  Note that tests have</span>
<a name="gbab-1537"></a><span class="cm"> * shown that zlib compression levels 3-6 usually perform as well as level 9</span>
<a name="gbab-1538"></a><span class="cm"> * for PNG images, and do considerably fewer caclulations.  In the future,</span>
<a name="gbab-1539"></a><span class="cm"> * these values may not correspond directly to the zlib compression levels.</span>
<a name="gbab-1540"></a><span class="cm"> */</span>
<a name="gbab-1541"></a><span class="cp">#ifdef PNG_WRITE_CUSTOMIZE_COMPRESSION_SUPPORTED</span>
<a name="gbab-1542"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_level</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1543"></a>    <span class="kt">int</span> <span class="n">level</span><span class="p">));</span>
<a name="gbab-1544"></a>
<a name="gbab-1545"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_mem_level</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1546"></a>    <span class="kt">int</span> <span class="n">mem_level</span><span class="p">));</span>
<a name="gbab-1547"></a>
<a name="gbab-1548"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">71</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_strategy</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1549"></a>    <span class="kt">int</span> <span class="n">strategy</span><span class="p">));</span>
<a name="gbab-1550"></a>
<a name="gbab-1551"></a><span class="cm">/* If PNG_WRITE_OPTIMIZE_CMF_SUPPORTED is defined, libpng will use a</span>
<a name="gbab-1552"></a><span class="cm"> * smaller value of window_bits if it can do so safely.</span>
<a name="gbab-1553"></a><span class="cm"> */</span>
<a name="gbab-1554"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_window_bits</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1555"></a>    <span class="kt">int</span> <span class="n">window_bits</span><span class="p">));</span>
<a name="gbab-1556"></a>
<a name="gbab-1557"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">73</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_compression_method</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1558"></a>    <span class="kt">int</span> <span class="n">method</span><span class="p">));</span>
<a name="gbab-1559"></a><span class="cp">#endif </span><span class="cm">/* WRITE_CUSTOMIZE_COMPRESSION */</span><span class="cp"></span>
<a name="gbab-1560"></a>
<a name="gbab-1561"></a><span class="cp">#ifdef PNG_WRITE_CUSTOMIZE_ZTXT_COMPRESSION_SUPPORTED</span>
<a name="gbab-1562"></a><span class="cm">/* Also set zlib parameters for compressing non-IDAT chunks */</span>
<a name="gbab-1563"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text_compression_level</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1564"></a>    <span class="kt">int</span> <span class="n">level</span><span class="p">));</span>
<a name="gbab-1565"></a>
<a name="gbab-1566"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text_compression_mem_level</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1567"></a>    <span class="kt">int</span> <span class="n">mem_level</span><span class="p">));</span>
<a name="gbab-1568"></a>
<a name="gbab-1569"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text_compression_strategy</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1570"></a>    <span class="kt">int</span> <span class="n">strategy</span><span class="p">));</span>
<a name="gbab-1571"></a>
<a name="gbab-1572"></a><span class="cm">/* If PNG_WRITE_OPTIMIZE_CMF_SUPPORTED is defined, libpng will use a</span>
<a name="gbab-1573"></a><span class="cm"> * smaller value of window_bits if it can do so safely.</span>
<a name="gbab-1574"></a><span class="cm"> */</span>
<a name="gbab-1575"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">225</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text_compression_window_bits</span><span class="p">,</span>
<a name="gbab-1576"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">window_bits</span><span class="p">));</span>
<a name="gbab-1577"></a>
<a name="gbab-1578"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">226</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text_compression_method</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1579"></a>    <span class="kt">int</span> <span class="n">method</span><span class="p">));</span>
<a name="gbab-1580"></a><span class="cp">#endif </span><span class="cm">/* WRITE_CUSTOMIZE_ZTXT_COMPRESSION */</span><span class="cp"></span>
<a name="gbab-1581"></a><span class="cp">#endif </span><span class="cm">/* WRITE */</span><span class="cp"></span>
<a name="gbab-1582"></a>
<a name="gbab-1583"></a><span class="cm">/* These next functions are called for input/output, memory, and error</span>
<a name="gbab-1584"></a><span class="cm"> * handling.  They are in the file pngrio.c, pngwio.c, and pngerror.c,</span>
<a name="gbab-1585"></a><span class="cm"> * and call standard C I/O routines such as fread(), fwrite(), and</span>
<a name="gbab-1586"></a><span class="cm"> * fprintf().  These functions can be made to use other I/O routines</span>
<a name="gbab-1587"></a><span class="cm"> * at run time for those applications that need to handle I/O in a</span>
<a name="gbab-1588"></a><span class="cm"> * different manner by calling png_set_???_fn().  See libpng-manual.txt for</span>
<a name="gbab-1589"></a><span class="cm"> * more information.</span>
<a name="gbab-1590"></a><span class="cm"> */</span>
<a name="gbab-1591"></a>
<a name="gbab-1592"></a><span class="cp">#ifdef PNG_STDIO_SUPPORTED</span>
<a name="gbab-1593"></a><span class="cm">/* Initialize the input/output for the PNG file to the default functions. */</span>
<a name="gbab-1594"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_init_io</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_FILE_p</span> <span class="n">fp</span><span class="p">));</span>
<a name="gbab-1595"></a><span class="cp">#endif</span>
<a name="gbab-1596"></a>
<a name="gbab-1597"></a><span class="cm">/* Replace the (error and abort), and warning functions with user</span>
<a name="gbab-1598"></a><span class="cm"> * supplied functions.  If no messages are to be printed you must still</span>
<a name="gbab-1599"></a><span class="cm"> * write and use replacement functions. The replacement error_fn should</span>
<a name="gbab-1600"></a><span class="cm"> * still do a longjmp to the last setjmp location if you are using this</span>
<a name="gbab-1601"></a><span class="cm"> * method of error handling.  If error_fn or warning_fn is NULL, the</span>
<a name="gbab-1602"></a><span class="cm"> * default function will be used.</span>
<a name="gbab-1603"></a><span class="cm"> */</span>
<a name="gbab-1604"></a>
<a name="gbab-1605"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_error_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1606"></a>    <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">,</span> <span class="n">png_error_ptr</span> <span class="n">warning_fn</span><span class="p">));</span>
<a name="gbab-1607"></a>
<a name="gbab-1608"></a><span class="cm">/* Return the user pointer associated with the error functions */</span>
<a name="gbab-1609"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">76</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_error_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1610"></a>
<a name="gbab-1611"></a><span class="cm">/* Replace the default data output functions with a user supplied one(s).</span>
<a name="gbab-1612"></a><span class="cm"> * If buffered output is not used, then output_flush_fn can be set to NULL.</span>
<a name="gbab-1613"></a><span class="cm"> * If PNG_WRITE_FLUSH_SUPPORTED is not defined at libpng compile time</span>
<a name="gbab-1614"></a><span class="cm"> * output_flush_fn will be ignored (and thus can be NULL).</span>
<a name="gbab-1615"></a><span class="cm"> * It is probably a mistake to use NULL for output_flush_fn if</span>
<a name="gbab-1616"></a><span class="cm"> * write_data_fn is not also NULL unless you have built libpng with</span>
<a name="gbab-1617"></a><span class="cm"> * PNG_WRITE_FLUSH_SUPPORTED undefined, because in this case libpng&#39;s</span>
<a name="gbab-1618"></a><span class="cm"> * default flush function, which uses the standard *FILE structure, will</span>
<a name="gbab-1619"></a><span class="cm"> * be used.</span>
<a name="gbab-1620"></a><span class="cm"> */</span>
<a name="gbab-1621"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">77</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_write_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">io_ptr</span><span class="p">,</span>
<a name="gbab-1622"></a>    <span class="n">png_rw_ptr</span> <span class="n">write_data_fn</span><span class="p">,</span> <span class="n">png_flush_ptr</span> <span class="n">output_flush_fn</span><span class="p">));</span>
<a name="gbab-1623"></a>
<a name="gbab-1624"></a><span class="cm">/* Replace the default data input function with a user supplied one. */</span>
<a name="gbab-1625"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_read_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">io_ptr</span><span class="p">,</span>
<a name="gbab-1626"></a>    <span class="n">png_rw_ptr</span> <span class="n">read_data_fn</span><span class="p">));</span>
<a name="gbab-1627"></a>
<a name="gbab-1628"></a><span class="cm">/* Return the user pointer associated with the I/O functions */</span>
<a name="gbab-1629"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">79</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_io_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1630"></a>
<a name="gbab-1631"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_read_status_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1632"></a>    <span class="n">png_read_status_ptr</span> <span class="n">read_row_fn</span><span class="p">));</span>
<a name="gbab-1633"></a>
<a name="gbab-1634"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">81</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_write_status_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1635"></a>    <span class="n">png_write_status_ptr</span> <span class="n">write_row_fn</span><span class="p">));</span>
<a name="gbab-1636"></a>
<a name="gbab-1637"></a><span class="cp">#ifdef PNG_USER_MEM_SUPPORTED</span>
<a name="gbab-1638"></a><span class="cm">/* Replace the default memory allocation functions with user supplied one(s). */</span>
<a name="gbab-1639"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_mem_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">mem_ptr</span><span class="p">,</span>
<a name="gbab-1640"></a>    <span class="n">png_malloc_ptr</span> <span class="n">malloc_fn</span><span class="p">,</span> <span class="n">png_free_ptr</span> <span class="n">free_fn</span><span class="p">));</span>
<a name="gbab-1641"></a><span class="cm">/* Return the user pointer associated with the memory functions */</span>
<a name="gbab-1642"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">83</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_mem_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1643"></a><span class="cp">#endif</span>
<a name="gbab-1644"></a>
<a name="gbab-1645"></a><span class="cp">#ifdef PNG_READ_USER_TRANSFORM_SUPPORTED</span>
<a name="gbab-1646"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_read_user_transform_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1647"></a>    <span class="n">png_user_transform_ptr</span> <span class="n">read_user_transform_fn</span><span class="p">));</span>
<a name="gbab-1648"></a><span class="cp">#endif</span>
<a name="gbab-1649"></a>
<a name="gbab-1650"></a><span class="cp">#ifdef PNG_WRITE_USER_TRANSFORM_SUPPORTED</span>
<a name="gbab-1651"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_write_user_transform_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1652"></a>    <span class="n">png_user_transform_ptr</span> <span class="n">write_user_transform_fn</span><span class="p">));</span>
<a name="gbab-1653"></a><span class="cp">#endif</span>
<a name="gbab-1654"></a>
<a name="gbab-1655"></a><span class="cp">#ifdef PNG_USER_TRANSFORM_PTR_SUPPORTED</span>
<a name="gbab-1656"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_user_transform_info</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1657"></a>    <span class="n">png_voidp</span> <span class="n">user_transform_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">user_transform_depth</span><span class="p">,</span>
<a name="gbab-1658"></a>    <span class="kt">int</span> <span class="n">user_transform_channels</span><span class="p">));</span>
<a name="gbab-1659"></a><span class="cm">/* Return the user pointer associated with the user transform functions */</span>
<a name="gbab-1660"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">87</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_user_transform_ptr</span><span class="p">,</span>
<a name="gbab-1661"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1662"></a><span class="cp">#endif</span>
<a name="gbab-1663"></a>
<a name="gbab-1664"></a><span class="cp">#ifdef PNG_USER_TRANSFORM_INFO_SUPPORTED</span>
<a name="gbab-1665"></a><span class="cm">/* Return information about the row currently being processed.  Note that these</span>
<a name="gbab-1666"></a><span class="cm"> * APIs do not fail but will return unexpected results if called outside a user</span>
<a name="gbab-1667"></a><span class="cm"> * transform callback.  Also note that when transforming an interlaced image the</span>
<a name="gbab-1668"></a><span class="cm"> * row number is the row number within the sub-image of the interlace pass, so</span>
<a name="gbab-1669"></a><span class="cm"> * the value will increase to the height of the sub-image (not the full image)</span>
<a name="gbab-1670"></a><span class="cm"> * then reset to 0 for the next pass.</span>
<a name="gbab-1671"></a><span class="cm"> *</span>
<a name="gbab-1672"></a><span class="cm"> * Use PNG_ROW_FROM_PASS_ROW(row, pass) and PNG_COL_FROM_PASS_COL(col, pass) to</span>
<a name="gbab-1673"></a><span class="cm"> * find the output pixel (x,y) given an interlaced sub-image pixel</span>
<a name="gbab-1674"></a><span class="cm"> * (row,col,pass).  (See below for these macros.)</span>
<a name="gbab-1675"></a><span class="cm"> */</span>
<a name="gbab-1676"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">217</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_current_row_number</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span><span class="p">));</span>
<a name="gbab-1677"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_current_pass_number</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span><span class="p">));</span>
<a name="gbab-1678"></a><span class="cp">#endif</span>
<a name="gbab-1679"></a>
<a name="gbab-1680"></a><span class="cp">#ifdef PNG_READ_USER_CHUNKS_SUPPORTED</span>
<a name="gbab-1681"></a><span class="cm">/* This callback is called only for *unknown* chunks.  If</span>
<a name="gbab-1682"></a><span class="cm"> * PNG_HANDLE_AS_UNKNOWN_SUPPORTED is set then it is possible to set known</span>
<a name="gbab-1683"></a><span class="cm"> * chunks to be treated as unknown, however in this case the callback must do</span>
<a name="gbab-1684"></a><span class="cm"> * any processing required by the chunk (e.g. by calling the appropriate</span>
<a name="gbab-1685"></a><span class="cm"> * png_set_ APIs.)</span>
<a name="gbab-1686"></a><span class="cm"> *</span>
<a name="gbab-1687"></a><span class="cm"> * There is no write support - on write, by default, all the chunks in the</span>
<a name="gbab-1688"></a><span class="cm"> * &#39;unknown&#39; list are written in the specified position.</span>
<a name="gbab-1689"></a><span class="cm"> *</span>
<a name="gbab-1690"></a><span class="cm"> * The integer return from the callback function is interpreted thus:</span>
<a name="gbab-1691"></a><span class="cm"> *</span>
<a name="gbab-1692"></a><span class="cm"> * negative: An error occurred; png_chunk_error will be called.</span>
<a name="gbab-1693"></a><span class="cm"> *     zero: The chunk was not handled, the chunk will be saved. A critical</span>
<a name="gbab-1694"></a><span class="cm"> *           chunk will cause an error at this point unless it is to be saved.</span>
<a name="gbab-1695"></a><span class="cm"> * positive: The chunk was handled, libpng will ignore/discard it.</span>
<a name="gbab-1696"></a><span class="cm"> *</span>
<a name="gbab-1697"></a><span class="cm"> * See &quot;INTERACTION WTIH USER CHUNK CALLBACKS&quot; below for important notes about</span>
<a name="gbab-1698"></a><span class="cm"> * how this behavior will change in libpng 1.7</span>
<a name="gbab-1699"></a><span class="cm"> */</span>
<a name="gbab-1700"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_read_user_chunk_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1701"></a>    <span class="n">png_voidp</span> <span class="n">user_chunk_ptr</span><span class="p">,</span> <span class="n">png_user_chunk_ptr</span> <span class="n">read_user_chunk_fn</span><span class="p">));</span>
<a name="gbab-1702"></a><span class="cp">#endif</span>
<a name="gbab-1703"></a>
<a name="gbab-1704"></a><span class="cp">#ifdef PNG_USER_CHUNKS_SUPPORTED</span>
<a name="gbab-1705"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_user_chunk_ptr</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1706"></a><span class="cp">#endif</span>
<a name="gbab-1707"></a>
<a name="gbab-1708"></a><span class="cp">#ifdef PNG_PROGRESSIVE_READ_SUPPORTED</span>
<a name="gbab-1709"></a><span class="cm">/* Sets the function callbacks for the push reader, and a pointer to a</span>
<a name="gbab-1710"></a><span class="cm"> * user-defined structure available to the callback functions.</span>
<a name="gbab-1711"></a><span class="cm"> */</span>
<a name="gbab-1712"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_progressive_read_fn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1713"></a>    <span class="n">png_voidp</span> <span class="n">progressive_ptr</span><span class="p">,</span> <span class="n">png_progressive_info_ptr</span> <span class="n">info_fn</span><span class="p">,</span>
<a name="gbab-1714"></a>    <span class="n">png_progressive_row_ptr</span> <span class="n">row_fn</span><span class="p">,</span> <span class="n">png_progressive_end_ptr</span> <span class="n">end_fn</span><span class="p">));</span>
<a name="gbab-1715"></a>
<a name="gbab-1716"></a><span class="cm">/* Returns the user pointer associated with the push read functions */</span>
<a name="gbab-1717"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">91</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_get_progressive_ptr</span><span class="p">,</span>
<a name="gbab-1718"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-1719"></a>
<a name="gbab-1720"></a><span class="cm">/* Function to be called when data becomes available */</span>
<a name="gbab-1721"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">92</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_process_data</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1722"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_bytep</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">png_size_t</span> <span class="n">buffer_size</span><span class="p">));</span>
<a name="gbab-1723"></a>
<a name="gbab-1724"></a><span class="cm">/* A function which may be called *only* within png_process_data to stop the</span>
<a name="gbab-1725"></a><span class="cm"> * processing of any more data.  The function returns the number of bytes</span>
<a name="gbab-1726"></a><span class="cm"> * remaining, excluding any that libpng has cached internally.  A subsequent</span>
<a name="gbab-1727"></a><span class="cm"> * call to png_process_data must supply these bytes again.  If the argument</span>
<a name="gbab-1728"></a><span class="cm"> * &#39;save&#39; is set to true the routine will first save all the pending data and</span>
<a name="gbab-1729"></a><span class="cm"> * will always return 0.</span>
<a name="gbab-1730"></a><span class="cm"> */</span>
<a name="gbab-1731"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">219</span><span class="p">,</span> <span class="n">png_size_t</span><span class="p">,</span> <span class="n">png_process_data_pause</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">save</span><span class="p">));</span>
<a name="gbab-1732"></a>
<a name="gbab-1733"></a><span class="cm">/* A function which may be called *only* outside (after) a call to</span>
<a name="gbab-1734"></a><span class="cm"> * png_process_data.  It returns the number of bytes of data to skip in the</span>
<a name="gbab-1735"></a><span class="cm"> * input.  Normally it will return 0, but if it returns a non-zero value the</span>
<a name="gbab-1736"></a><span class="cm"> * application must skip than number of bytes of input data and pass the</span>
<a name="gbab-1737"></a><span class="cm"> * following data to the next call to png_process_data.</span>
<a name="gbab-1738"></a><span class="cm"> */</span>
<a name="gbab-1739"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_process_data_skip</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span><span class="p">));</span>
<a name="gbab-1740"></a>
<a name="gbab-1741"></a><span class="cm">/* Function that combines rows.  &#39;new_row&#39; is a flag that should come from</span>
<a name="gbab-1742"></a><span class="cm"> * the callback and be non-NULL if anything needs to be done; the library</span>
<a name="gbab-1743"></a><span class="cm"> * stores its own version of the new data internally and ignores the passed</span>
<a name="gbab-1744"></a><span class="cm"> * in value.</span>
<a name="gbab-1745"></a><span class="cm"> */</span>
<a name="gbab-1746"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_progressive_combine_row</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1747"></a>    <span class="n">png_bytep</span> <span class="n">old_row</span><span class="p">,</span> <span class="n">png_const_bytep</span> <span class="n">new_row</span><span class="p">));</span>
<a name="gbab-1748"></a><span class="cp">#endif </span><span class="cm">/* PROGRESSIVE_READ */</span><span class="cp"></span>
<a name="gbab-1749"></a>
<a name="gbab-1750"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_malloc</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1751"></a>    <span class="n">png_alloc_size_t</span> <span class="n">size</span><span class="p">),</span> <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1752"></a><span class="cm">/* Added at libpng version 1.4.0 */</span>
<a name="gbab-1753"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_calloc</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1754"></a>    <span class="n">png_alloc_size_t</span> <span class="n">size</span><span class="p">),</span> <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1755"></a>
<a name="gbab-1756"></a><span class="cm">/* Added at libpng version 1.2.4 */</span>
<a name="gbab-1757"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_malloc_warn</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1758"></a>    <span class="n">png_alloc_size_t</span> <span class="n">size</span><span class="p">),</span> <span class="n">PNG_ALLOCATED</span><span class="p">);</span>
<a name="gbab-1759"></a>
<a name="gbab-1760"></a><span class="cm">/* Frees a pointer allocated by png_malloc() */</span>
<a name="gbab-1761"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_free</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">ptr</span><span class="p">));</span>
<a name="gbab-1762"></a>
<a name="gbab-1763"></a><span class="cm">/* Free data that was allocated internally */</span>
<a name="gbab-1764"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_free_data</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1765"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">free_me</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num</span><span class="p">));</span>
<a name="gbab-1766"></a>
<a name="gbab-1767"></a><span class="cm">/* Reassign responsibility for freeing existing data, whether allocated</span>
<a name="gbab-1768"></a><span class="cm"> * by libpng or by the application; this works on the png_info structure passed</span>
<a name="gbab-1769"></a><span class="cm"> * in, it does not change the state for other png_info structures.</span>
<a name="gbab-1770"></a><span class="cm"> *</span>
<a name="gbab-1771"></a><span class="cm"> * It is unlikely that this function works correctly as of 1.6.0 and using it</span>
<a name="gbab-1772"></a><span class="cm"> * may result either in memory leaks or double free of allocated data.</span>
<a name="gbab-1773"></a><span class="cm"> */</span>
<a name="gbab-1774"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">99</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_data_freer</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1775"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">freer</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">mask</span><span class="p">));</span>
<a name="gbab-1776"></a>
<a name="gbab-1777"></a><span class="cm">/* Assignments for png_data_freer */</span>
<a name="gbab-1778"></a><span class="cp">#define PNG_DESTROY_WILL_FREE_DATA 1</span>
<a name="gbab-1779"></a><span class="cp">#define PNG_SET_WILL_FREE_DATA 1</span>
<a name="gbab-1780"></a><span class="cp">#define PNG_USER_WILL_FREE_DATA 2</span>
<a name="gbab-1781"></a><span class="cm">/* Flags for png_ptr-&gt;free_me and info_ptr-&gt;free_me */</span>
<a name="gbab-1782"></a><span class="cp">#define PNG_FREE_HIST 0x0008U</span>
<a name="gbab-1783"></a><span class="cp">#define PNG_FREE_ICCP 0x0010U</span>
<a name="gbab-1784"></a><span class="cp">#define PNG_FREE_SPLT 0x0020U</span>
<a name="gbab-1785"></a><span class="cp">#define PNG_FREE_ROWS 0x0040U</span>
<a name="gbab-1786"></a><span class="cp">#define PNG_FREE_PCAL 0x0080U</span>
<a name="gbab-1787"></a><span class="cp">#define PNG_FREE_SCAL 0x0100U</span>
<a name="gbab-1788"></a><span class="cp">#ifdef PNG_STORE_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-1789"></a><span class="cp">#  define PNG_FREE_UNKN 0x0200U</span>
<a name="gbab-1790"></a><span class="cp">#endif</span>
<a name="gbab-1791"></a><span class="cm">/*      PNG_FREE_LIST 0x0400U   removed in 1.6.0 because it is ignored */</span>
<a name="gbab-1792"></a><span class="cp">#define PNG_FREE_PLTE 0x1000U</span>
<a name="gbab-1793"></a><span class="cp">#define PNG_FREE_TRNS 0x2000U</span>
<a name="gbab-1794"></a><span class="cp">#define PNG_FREE_TEXT 0x4000U</span>
<a name="gbab-1795"></a><span class="cp">#define PNG_FREE_ALL  0x7fffU</span>
<a name="gbab-1796"></a><span class="cp">#define PNG_FREE_MUL  0x4220U </span><span class="cm">/* PNG_FREE_SPLT|PNG_FREE_TEXT|PNG_FREE_UNKN */</span><span class="cp"></span>
<a name="gbab-1797"></a>
<a name="gbab-1798"></a><span class="cp">#ifdef PNG_USER_MEM_SUPPORTED</span>
<a name="gbab-1799"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">png_voidp</span><span class="p">,</span> <span class="n">png_malloc_default</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1800"></a>    <span class="n">png_alloc_size_t</span> <span class="n">size</span><span class="p">),</span> <span class="n">PNG_ALLOCATED</span> <span class="n">PNG_DEPRECATED</span><span class="p">);</span>
<a name="gbab-1801"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_free_default</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1802"></a>    <span class="n">png_voidp</span> <span class="n">ptr</span><span class="p">),</span> <span class="n">PNG_DEPRECATED</span><span class="p">);</span>
<a name="gbab-1803"></a><span class="cp">#endif</span>
<a name="gbab-1804"></a>
<a name="gbab-1805"></a><span class="cp">#ifdef PNG_ERROR_TEXT_SUPPORTED</span>
<a name="gbab-1806"></a><span class="cm">/* Fatal error in PNG image of libpng - can&#39;t continue */</span>
<a name="gbab-1807"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_error</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1808"></a>    <span class="n">png_const_charp</span> <span class="n">error_message</span><span class="p">),</span> <span class="n">PNG_NORETURN</span><span class="p">);</span>
<a name="gbab-1809"></a>
<a name="gbab-1810"></a><span class="cm">/* The same, but the chunk name is prepended to the error string. */</span>
<a name="gbab-1811"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_chunk_error</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1812"></a>    <span class="n">png_const_charp</span> <span class="n">error_message</span><span class="p">),</span> <span class="n">PNG_NORETURN</span><span class="p">);</span>
<a name="gbab-1813"></a>
<a name="gbab-1814"></a><span class="cp">#else</span>
<a name="gbab-1815"></a><span class="cm">/* Fatal error in PNG image of libpng - can&#39;t continue */</span>
<a name="gbab-1816"></a><span class="n">PNG_EXPORTA</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_err</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">),</span> <span class="n">PNG_NORETURN</span><span class="p">);</span>
<a name="gbab-1817"></a><span class="cp">#  define png_error(s1,s2) png_err(s1)</span>
<a name="gbab-1818"></a><span class="cp">#  define png_chunk_error(s1,s2) png_err(s1)</span>
<a name="gbab-1819"></a><span class="cp">#endif</span>
<a name="gbab-1820"></a>
<a name="gbab-1821"></a><span class="cp">#ifdef PNG_WARNINGS_SUPPORTED</span>
<a name="gbab-1822"></a><span class="cm">/* Non-fatal error in libpng.  Can continue, but may have a problem. */</span>
<a name="gbab-1823"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">105</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_warning</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1824"></a>    <span class="n">png_const_charp</span> <span class="n">warning_message</span><span class="p">));</span>
<a name="gbab-1825"></a>
<a name="gbab-1826"></a><span class="cm">/* Non-fatal error in libpng, chunk name is prepended to message. */</span>
<a name="gbab-1827"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">106</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_chunk_warning</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1828"></a>    <span class="n">png_const_charp</span> <span class="n">warning_message</span><span class="p">));</span>
<a name="gbab-1829"></a><span class="cp">#else</span>
<a name="gbab-1830"></a><span class="cp">#  define png_warning(s1,s2) ((void)(s1))</span>
<a name="gbab-1831"></a><span class="cp">#  define png_chunk_warning(s1,s2) ((void)(s1))</span>
<a name="gbab-1832"></a><span class="cp">#endif</span>
<a name="gbab-1833"></a>
<a name="gbab-1834"></a><span class="cp">#ifdef PNG_BENIGN_ERRORS_SUPPORTED</span>
<a name="gbab-1835"></a><span class="cm">/* Benign error in libpng.  Can continue, but may have a problem.</span>
<a name="gbab-1836"></a><span class="cm"> * User can choose whether to handle as a fatal error or as a warning. */</span>
<a name="gbab-1837"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">107</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_benign_error</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1838"></a>    <span class="n">png_const_charp</span> <span class="n">warning_message</span><span class="p">));</span>
<a name="gbab-1839"></a>
<a name="gbab-1840"></a><span class="cp">#ifdef PNG_READ_SUPPORTED</span>
<a name="gbab-1841"></a><span class="cm">/* Same, chunk name is prepended to message (only during read) */</span>
<a name="gbab-1842"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">108</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_chunk_benign_error</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1843"></a>    <span class="n">png_const_charp</span> <span class="n">warning_message</span><span class="p">));</span>
<a name="gbab-1844"></a><span class="cp">#endif</span>
<a name="gbab-1845"></a>
<a name="gbab-1846"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">109</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_benign_errors</span><span class="p">,</span>
<a name="gbab-1847"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">allowed</span><span class="p">));</span>
<a name="gbab-1848"></a><span class="cp">#else</span>
<a name="gbab-1849"></a><span class="cp">#  ifdef PNG_ALLOW_BENIGN_ERRORS</span>
<a name="gbab-1850"></a><span class="cp">#    define png_benign_error png_warning</span>
<a name="gbab-1851"></a><span class="cp">#    define png_chunk_benign_error png_chunk_warning</span>
<a name="gbab-1852"></a><span class="cp">#  else</span>
<a name="gbab-1853"></a><span class="cp">#    define png_benign_error png_error</span>
<a name="gbab-1854"></a><span class="cp">#    define png_chunk_benign_error png_chunk_error</span>
<a name="gbab-1855"></a><span class="cp">#  endif</span>
<a name="gbab-1856"></a><span class="cp">#endif</span>
<a name="gbab-1857"></a>
<a name="gbab-1858"></a><span class="cm">/* The png_set_&lt;chunk&gt; functions are for storing values in the png_info_struct.</span>
<a name="gbab-1859"></a><span class="cm"> * Similarly, the png_get_&lt;chunk&gt; calls are used to read values from the</span>
<a name="gbab-1860"></a><span class="cm"> * png_info_struct, either storing the parameters in the passed variables, or</span>
<a name="gbab-1861"></a><span class="cm"> * setting pointers into the png_info_struct where the data is stored.  The</span>
<a name="gbab-1862"></a><span class="cm"> * png_get_&lt;chunk&gt; functions return a non-zero value if the data was available</span>
<a name="gbab-1863"></a><span class="cm"> * in info_ptr, or return zero and do not change any of the parameters if the</span>
<a name="gbab-1864"></a><span class="cm"> * data was not available.</span>
<a name="gbab-1865"></a><span class="cm"> *</span>
<a name="gbab-1866"></a><span class="cm"> * These functions should be used instead of directly accessing png_info</span>
<a name="gbab-1867"></a><span class="cm"> * to avoid problems with future changes in the size and internal layout of</span>
<a name="gbab-1868"></a><span class="cm"> * png_info_struct.</span>
<a name="gbab-1869"></a><span class="cm"> */</span>
<a name="gbab-1870"></a><span class="cm">/* Returns &quot;flag&quot; if chunk data is valid in info_ptr. */</span>
<a name="gbab-1871"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_valid</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1872"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">flag</span><span class="p">));</span>
<a name="gbab-1873"></a>
<a name="gbab-1874"></a><span class="cm">/* Returns number of bytes needed to hold a transformed row. */</span>
<a name="gbab-1875"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">png_size_t</span><span class="p">,</span> <span class="n">png_get_rowbytes</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1876"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1877"></a>
<a name="gbab-1878"></a><span class="cp">#ifdef PNG_INFO_IMAGE_SUPPORTED</span>
<a name="gbab-1879"></a><span class="cm">/* Returns row_pointers, which is an array of pointers to scanlines that was</span>
<a name="gbab-1880"></a><span class="cm"> * returned from png_read_png().</span>
<a name="gbab-1881"></a><span class="cm"> */</span>
<a name="gbab-1882"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="n">png_bytepp</span><span class="p">,</span> <span class="n">png_get_rows</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1883"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1884"></a>
<a name="gbab-1885"></a><span class="cm">/* Set row_pointers, which is an array of pointers to scanlines for use</span>
<a name="gbab-1886"></a><span class="cm"> * by png_write_png().</span>
<a name="gbab-1887"></a><span class="cm"> */</span>
<a name="gbab-1888"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">113</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_rows</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1889"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_bytepp</span> <span class="n">row_pointers</span><span class="p">));</span>
<a name="gbab-1890"></a><span class="cp">#endif</span>
<a name="gbab-1891"></a>
<a name="gbab-1892"></a><span class="cm">/* Returns number of color channels in image. */</span>
<a name="gbab-1893"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">114</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_channels</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1894"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1895"></a>
<a name="gbab-1896"></a><span class="cp">#ifdef PNG_EASY_ACCESS_SUPPORTED</span>
<a name="gbab-1897"></a><span class="cm">/* Returns image width in pixels. */</span>
<a name="gbab-1898"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">115</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_image_width</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1899"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1900"></a>
<a name="gbab-1901"></a><span class="cm">/* Returns image height in pixels. */</span>
<a name="gbab-1902"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">116</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_image_height</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1903"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1904"></a>
<a name="gbab-1905"></a><span class="cm">/* Returns image bit_depth. */</span>
<a name="gbab-1906"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">117</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_bit_depth</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1907"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1908"></a>
<a name="gbab-1909"></a><span class="cm">/* Returns image color_type. */</span>
<a name="gbab-1910"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">118</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_color_type</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1911"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1912"></a>
<a name="gbab-1913"></a><span class="cm">/* Returns image filter_type. */</span>
<a name="gbab-1914"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">119</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_filter_type</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1915"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1916"></a>
<a name="gbab-1917"></a><span class="cm">/* Returns image interlace_type. */</span>
<a name="gbab-1918"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_interlace_type</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1919"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1920"></a>
<a name="gbab-1921"></a><span class="cm">/* Returns image compression_type. */</span>
<a name="gbab-1922"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">121</span><span class="p">,</span> <span class="n">png_byte</span><span class="p">,</span> <span class="n">png_get_compression_type</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1923"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1924"></a>
<a name="gbab-1925"></a><span class="cm">/* Returns image resolution in pixels per meter, from pHYs chunk data. */</span>
<a name="gbab-1926"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">122</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_pixels_per_meter</span><span class="p">,</span>
<a name="gbab-1927"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1928"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_x_pixels_per_meter</span><span class="p">,</span>
<a name="gbab-1929"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1930"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">124</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_y_pixels_per_meter</span><span class="p">,</span>
<a name="gbab-1931"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1932"></a>
<a name="gbab-1933"></a><span class="cm">/* Returns pixel aspect ratio, computed from pHYs chunk data.  */</span>
<a name="gbab-1934"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">125</span><span class="p">,</span> <span class="kt">float</span><span class="p">,</span> <span class="n">png_get_pixel_aspect_ratio</span><span class="p">,</span>
<a name="gbab-1935"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-1936"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="n">png_fixed_point</span><span class="p">,</span> <span class="n">png_get_pixel_aspect_ratio_fixed</span><span class="p">,</span>
<a name="gbab-1937"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-1938"></a>
<a name="gbab-1939"></a><span class="cm">/* Returns image x, y offset in pixels or microns, from oFFs chunk data. */</span>
<a name="gbab-1940"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">126</span><span class="p">,</span> <span class="n">png_int_32</span><span class="p">,</span> <span class="n">png_get_x_offset_pixels</span><span class="p">,</span>
<a name="gbab-1941"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1942"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">127</span><span class="p">,</span> <span class="n">png_int_32</span><span class="p">,</span> <span class="n">png_get_y_offset_pixels</span><span class="p">,</span>
<a name="gbab-1943"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1944"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="n">png_int_32</span><span class="p">,</span> <span class="n">png_get_x_offset_microns</span><span class="p">,</span>
<a name="gbab-1945"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1946"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">129</span><span class="p">,</span> <span class="n">png_int_32</span><span class="p">,</span> <span class="n">png_get_y_offset_microns</span><span class="p">,</span>
<a name="gbab-1947"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1948"></a>
<a name="gbab-1949"></a><span class="cp">#endif </span><span class="cm">/* EASY_ACCESS */</span><span class="cp"></span>
<a name="gbab-1950"></a>
<a name="gbab-1951"></a><span class="cp">#ifdef PNG_READ_SUPPORTED</span>
<a name="gbab-1952"></a><span class="cm">/* Returns pointer to signature string read from PNG header */</span>
<a name="gbab-1953"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">130</span><span class="p">,</span> <span class="n">png_const_bytep</span><span class="p">,</span> <span class="n">png_get_signature</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1954"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-1955"></a><span class="cp">#endif</span>
<a name="gbab-1956"></a>
<a name="gbab-1957"></a><span class="cp">#ifdef PNG_bKGD_SUPPORTED</span>
<a name="gbab-1958"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">131</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_bKGD</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1959"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_color_16p</span> <span class="o">*</span><span class="n">background</span><span class="p">));</span>
<a name="gbab-1960"></a><span class="cp">#endif</span>
<a name="gbab-1961"></a>
<a name="gbab-1962"></a><span class="cp">#ifdef PNG_bKGD_SUPPORTED</span>
<a name="gbab-1963"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">132</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_bKGD</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1964"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_color_16p</span> <span class="n">background</span><span class="p">));</span>
<a name="gbab-1965"></a><span class="cp">#endif</span>
<a name="gbab-1966"></a>
<a name="gbab-1967"></a><span class="cp">#ifdef PNG_cHRM_SUPPORTED</span>
<a name="gbab-1968"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">133</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_cHRM</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1969"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">white_x</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">white_y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">red_x</span><span class="p">,</span>
<a name="gbab-1970"></a>    <span class="kt">double</span> <span class="o">*</span><span class="n">red_y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">green_x</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">green_y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">blue_x</span><span class="p">,</span>
<a name="gbab-1971"></a>    <span class="kt">double</span> <span class="o">*</span><span class="n">blue_y</span><span class="p">))</span>
<a name="gbab-1972"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">230</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_cHRM_XYZ</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1973"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">red_X</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">red_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">red_Z</span><span class="p">,</span>
<a name="gbab-1974"></a>    <span class="kt">double</span> <span class="o">*</span><span class="n">green_X</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">green_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">green_Z</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">blue_X</span><span class="p">,</span>
<a name="gbab-1975"></a>    <span class="kt">double</span> <span class="o">*</span><span class="n">blue_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">blue_Z</span><span class="p">))</span>
<a name="gbab-1976"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">134</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_cHRM_fixed</span><span class="p">,</span>
<a name="gbab-1977"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-1978"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_white_x</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_white_y</span><span class="p">,</span>
<a name="gbab-1979"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_red_x</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_red_y</span><span class="p">,</span>
<a name="gbab-1980"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_green_x</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_green_y</span><span class="p">,</span>
<a name="gbab-1981"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_blue_x</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_blue_y</span><span class="p">))</span>
<a name="gbab-1982"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">231</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_cHRM_XYZ_fixed</span><span class="p">,</span>
<a name="gbab-1983"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-1984"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_red_X</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_red_Y</span><span class="p">,</span>
<a name="gbab-1985"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_red_Z</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_green_X</span><span class="p">,</span>
<a name="gbab-1986"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_green_Y</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_green_Z</span><span class="p">,</span>
<a name="gbab-1987"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_blue_X</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_blue_Y</span><span class="p">,</span>
<a name="gbab-1988"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_blue_Z</span><span class="p">))</span>
<a name="gbab-1989"></a><span class="cp">#endif</span>
<a name="gbab-1990"></a>
<a name="gbab-1991"></a><span class="cp">#ifdef PNG_cHRM_SUPPORTED</span>
<a name="gbab-1992"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">135</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_cHRM</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1993"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-1994"></a>    <span class="kt">double</span> <span class="n">white_x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">white_y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red_x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red_y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">green_x</span><span class="p">,</span>
<a name="gbab-1995"></a>    <span class="kt">double</span> <span class="n">green_y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">blue_x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">blue_y</span><span class="p">))</span>
<a name="gbab-1996"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_cHRM_XYZ</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-1997"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red_X</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">red_Z</span><span class="p">,</span>
<a name="gbab-1998"></a>    <span class="kt">double</span> <span class="n">green_X</span><span class="p">,</span> <span class="kt">double</span> <span class="n">green_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">green_Z</span><span class="p">,</span> <span class="kt">double</span> <span class="n">blue_X</span><span class="p">,</span>
<a name="gbab-1999"></a>    <span class="kt">double</span> <span class="n">blue_Y</span><span class="p">,</span> <span class="kt">double</span> <span class="n">blue_Z</span><span class="p">))</span>
<a name="gbab-2000"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">136</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_cHRM_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2001"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_white_x</span><span class="p">,</span>
<a name="gbab-2002"></a>    <span class="n">png_fixed_point</span> <span class="n">int_white_y</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_red_x</span><span class="p">,</span>
<a name="gbab-2003"></a>    <span class="n">png_fixed_point</span> <span class="n">int_red_y</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_green_x</span><span class="p">,</span>
<a name="gbab-2004"></a>    <span class="n">png_fixed_point</span> <span class="n">int_green_y</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_blue_x</span><span class="p">,</span>
<a name="gbab-2005"></a>    <span class="n">png_fixed_point</span> <span class="n">int_blue_y</span><span class="p">))</span>
<a name="gbab-2006"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_cHRM_XYZ_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2007"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_red_X</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_red_Y</span><span class="p">,</span>
<a name="gbab-2008"></a>    <span class="n">png_fixed_point</span> <span class="n">int_red_Z</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_green_X</span><span class="p">,</span>
<a name="gbab-2009"></a>    <span class="n">png_fixed_point</span> <span class="n">int_green_Y</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_green_Z</span><span class="p">,</span>
<a name="gbab-2010"></a>    <span class="n">png_fixed_point</span> <span class="n">int_blue_X</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_blue_Y</span><span class="p">,</span>
<a name="gbab-2011"></a>    <span class="n">png_fixed_point</span> <span class="n">int_blue_Z</span><span class="p">))</span>
<a name="gbab-2012"></a><span class="cp">#endif</span>
<a name="gbab-2013"></a>
<a name="gbab-2014"></a><span class="cp">#ifdef PNG_gAMA_SUPPORTED</span>
<a name="gbab-2015"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">137</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_gAMA</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2016"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">file_gamma</span><span class="p">))</span>
<a name="gbab-2017"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">138</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_gAMA_fixed</span><span class="p">,</span>
<a name="gbab-2018"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-2019"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">int_file_gamma</span><span class="p">))</span>
<a name="gbab-2020"></a><span class="cp">#endif</span>
<a name="gbab-2021"></a>
<a name="gbab-2022"></a><span class="cp">#ifdef PNG_gAMA_SUPPORTED</span>
<a name="gbab-2023"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_gAMA</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2024"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">double</span> <span class="n">file_gamma</span><span class="p">))</span>
<a name="gbab-2025"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_gAMA_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2026"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">int_file_gamma</span><span class="p">))</span>
<a name="gbab-2027"></a><span class="cp">#endif</span>
<a name="gbab-2028"></a>
<a name="gbab-2029"></a><span class="cp">#ifdef PNG_hIST_SUPPORTED</span>
<a name="gbab-2030"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">141</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_hIST</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2031"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_16p</span> <span class="o">*</span><span class="n">hist</span><span class="p">));</span>
<a name="gbab-2032"></a><span class="cp">#endif</span>
<a name="gbab-2033"></a>
<a name="gbab-2034"></a><span class="cp">#ifdef PNG_hIST_SUPPORTED</span>
<a name="gbab-2035"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">142</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_hIST</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2036"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_uint_16p</span> <span class="n">hist</span><span class="p">));</span>
<a name="gbab-2037"></a><span class="cp">#endif</span>
<a name="gbab-2038"></a>
<a name="gbab-2039"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">143</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_IHDR</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2040"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">width</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">height</span><span class="p">,</span>
<a name="gbab-2041"></a>    <span class="kt">int</span> <span class="o">*</span><span class="n">bit_depth</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">color_type</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">interlace_method</span><span class="p">,</span>
<a name="gbab-2042"></a>    <span class="kt">int</span> <span class="o">*</span><span class="n">compression_method</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">filter_method</span><span class="p">));</span>
<a name="gbab-2043"></a>
<a name="gbab-2044"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_IHDR</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2045"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">width</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bit_depth</span><span class="p">,</span>
<a name="gbab-2046"></a>    <span class="kt">int</span> <span class="n">color_type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">interlace_method</span><span class="p">,</span> <span class="kt">int</span> <span class="n">compression_method</span><span class="p">,</span>
<a name="gbab-2047"></a>    <span class="kt">int</span> <span class="n">filter_method</span><span class="p">));</span>
<a name="gbab-2048"></a>
<a name="gbab-2049"></a><span class="cp">#ifdef PNG_oFFs_SUPPORTED</span>
<a name="gbab-2050"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_oFFs</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2051"></a>   <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="o">*</span><span class="n">offset_x</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="o">*</span><span class="n">offset_y</span><span class="p">,</span>
<a name="gbab-2052"></a>   <span class="kt">int</span> <span class="o">*</span><span class="n">unit_type</span><span class="p">));</span>
<a name="gbab-2053"></a><span class="cp">#endif</span>
<a name="gbab-2054"></a>
<a name="gbab-2055"></a><span class="cp">#ifdef PNG_oFFs_SUPPORTED</span>
<a name="gbab-2056"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">146</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_oFFs</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2057"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">offset_x</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">offset_y</span><span class="p">,</span>
<a name="gbab-2058"></a>    <span class="kt">int</span> <span class="n">unit_type</span><span class="p">));</span>
<a name="gbab-2059"></a><span class="cp">#endif</span>
<a name="gbab-2060"></a>
<a name="gbab-2061"></a><span class="cp">#ifdef PNG_pCAL_SUPPORTED</span>
<a name="gbab-2062"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_pCAL</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2063"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_charp</span> <span class="o">*</span><span class="n">purpose</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="o">*</span><span class="n">X0</span><span class="p">,</span>
<a name="gbab-2064"></a>    <span class="n">png_int_32</span> <span class="o">*</span><span class="n">X1</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">nparams</span><span class="p">,</span> <span class="n">png_charp</span> <span class="o">*</span><span class="n">units</span><span class="p">,</span>
<a name="gbab-2065"></a>    <span class="n">png_charpp</span> <span class="o">*</span><span class="n">params</span><span class="p">));</span>
<a name="gbab-2066"></a><span class="cp">#endif</span>
<a name="gbab-2067"></a>
<a name="gbab-2068"></a><span class="cp">#ifdef PNG_pCAL_SUPPORTED</span>
<a name="gbab-2069"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">148</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_pCAL</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2070"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_charp</span> <span class="n">purpose</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">X0</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">X1</span><span class="p">,</span>
<a name="gbab-2071"></a>    <span class="kt">int</span> <span class="n">type</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nparams</span><span class="p">,</span> <span class="n">png_const_charp</span> <span class="n">units</span><span class="p">,</span> <span class="n">png_charpp</span> <span class="n">params</span><span class="p">));</span>
<a name="gbab-2072"></a><span class="cp">#endif</span>
<a name="gbab-2073"></a>
<a name="gbab-2074"></a><span class="cp">#ifdef PNG_pHYs_SUPPORTED</span>
<a name="gbab-2075"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">149</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_pHYs</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2076"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">res_x</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">res_y</span><span class="p">,</span>
<a name="gbab-2077"></a>    <span class="kt">int</span> <span class="o">*</span><span class="n">unit_type</span><span class="p">));</span>
<a name="gbab-2078"></a><span class="cp">#endif</span>
<a name="gbab-2079"></a>
<a name="gbab-2080"></a><span class="cp">#ifdef PNG_pHYs_SUPPORTED</span>
<a name="gbab-2081"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_pHYs</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2082"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">res_x</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">res_y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">unit_type</span><span class="p">));</span>
<a name="gbab-2083"></a><span class="cp">#endif</span>
<a name="gbab-2084"></a>
<a name="gbab-2085"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">151</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_PLTE</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2086"></a>   <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_colorp</span> <span class="o">*</span><span class="n">palette</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">num_palette</span><span class="p">));</span>
<a name="gbab-2087"></a>
<a name="gbab-2088"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">152</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_PLTE</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2089"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_colorp</span> <span class="n">palette</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_palette</span><span class="p">));</span>
<a name="gbab-2090"></a>
<a name="gbab-2091"></a><span class="cp">#ifdef PNG_sBIT_SUPPORTED</span>
<a name="gbab-2092"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">153</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_sBIT</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2093"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_color_8p</span> <span class="o">*</span><span class="n">sig_bit</span><span class="p">));</span>
<a name="gbab-2094"></a><span class="cp">#endif</span>
<a name="gbab-2095"></a>
<a name="gbab-2096"></a><span class="cp">#ifdef PNG_sBIT_SUPPORTED</span>
<a name="gbab-2097"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">154</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sBIT</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2098"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_color_8p</span> <span class="n">sig_bit</span><span class="p">));</span>
<a name="gbab-2099"></a><span class="cp">#endif</span>
<a name="gbab-2100"></a>
<a name="gbab-2101"></a><span class="cp">#ifdef PNG_sRGB_SUPPORTED</span>
<a name="gbab-2102"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">155</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_sRGB</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2103"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">file_srgb_intent</span><span class="p">));</span>
<a name="gbab-2104"></a><span class="cp">#endif</span>
<a name="gbab-2105"></a>
<a name="gbab-2106"></a><span class="cp">#ifdef PNG_sRGB_SUPPORTED</span>
<a name="gbab-2107"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">156</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sRGB</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2108"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">srgb_intent</span><span class="p">));</span>
<a name="gbab-2109"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">157</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sRGB_gAMA_and_cHRM</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2110"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">srgb_intent</span><span class="p">));</span>
<a name="gbab-2111"></a><span class="cp">#endif</span>
<a name="gbab-2112"></a>
<a name="gbab-2113"></a><span class="cp">#ifdef PNG_iCCP_SUPPORTED</span>
<a name="gbab-2114"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">158</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_iCCP</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2115"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_charpp</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">compression_type</span><span class="p">,</span>
<a name="gbab-2116"></a>    <span class="n">png_bytepp</span> <span class="n">profile</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">proflen</span><span class="p">));</span>
<a name="gbab-2117"></a><span class="cp">#endif</span>
<a name="gbab-2118"></a>
<a name="gbab-2119"></a><span class="cp">#ifdef PNG_iCCP_SUPPORTED</span>
<a name="gbab-2120"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">159</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_iCCP</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2121"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_charp</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">compression_type</span><span class="p">,</span>
<a name="gbab-2122"></a>    <span class="n">png_const_bytep</span> <span class="n">profile</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">proflen</span><span class="p">));</span>
<a name="gbab-2123"></a><span class="cp">#endif</span>
<a name="gbab-2124"></a>
<a name="gbab-2125"></a><span class="cp">#ifdef PNG_sPLT_SUPPORTED</span>
<a name="gbab-2126"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_get_sPLT</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2127"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_sPLT_tpp</span> <span class="n">entries</span><span class="p">));</span>
<a name="gbab-2128"></a><span class="cp">#endif</span>
<a name="gbab-2129"></a>
<a name="gbab-2130"></a><span class="cp">#ifdef PNG_sPLT_SUPPORTED</span>
<a name="gbab-2131"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">161</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sPLT</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2132"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_sPLT_tp</span> <span class="n">entries</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nentries</span><span class="p">));</span>
<a name="gbab-2133"></a><span class="cp">#endif</span>
<a name="gbab-2134"></a>
<a name="gbab-2135"></a><span class="cp">#ifdef PNG_TEXT_SUPPORTED</span>
<a name="gbab-2136"></a><span class="cm">/* png_get_text also returns the number of text chunks in *num_text */</span>
<a name="gbab-2137"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">162</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_get_text</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2138"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_textp</span> <span class="o">*</span><span class="n">text_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">num_text</span><span class="p">));</span>
<a name="gbab-2139"></a><span class="cp">#endif</span>
<a name="gbab-2140"></a>
<a name="gbab-2141"></a><span class="cm">/* Note while png_set_text() will accept a structure whose text,</span>
<a name="gbab-2142"></a><span class="cm"> * language, and  translated keywords are NULL pointers, the structure</span>
<a name="gbab-2143"></a><span class="cm"> * returned by png_get_text will always contain regular</span>
<a name="gbab-2144"></a><span class="cm"> * zero-terminated C strings.  They might be empty strings but</span>
<a name="gbab-2145"></a><span class="cm"> * they will never be NULL pointers.</span>
<a name="gbab-2146"></a><span class="cm"> */</span>
<a name="gbab-2147"></a>
<a name="gbab-2148"></a><span class="cp">#ifdef PNG_TEXT_SUPPORTED</span>
<a name="gbab-2149"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">163</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_text</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2150"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_textp</span> <span class="n">text_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_text</span><span class="p">));</span>
<a name="gbab-2151"></a><span class="cp">#endif</span>
<a name="gbab-2152"></a>
<a name="gbab-2153"></a><span class="cp">#ifdef PNG_tIME_SUPPORTED</span>
<a name="gbab-2154"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">164</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_tIME</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2155"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_timep</span> <span class="o">*</span><span class="n">mod_time</span><span class="p">));</span>
<a name="gbab-2156"></a><span class="cp">#endif</span>
<a name="gbab-2157"></a>
<a name="gbab-2158"></a><span class="cp">#ifdef PNG_tIME_SUPPORTED</span>
<a name="gbab-2159"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">165</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_tIME</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2160"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_timep</span> <span class="n">mod_time</span><span class="p">));</span>
<a name="gbab-2161"></a><span class="cp">#endif</span>
<a name="gbab-2162"></a>
<a name="gbab-2163"></a><span class="cp">#ifdef PNG_tRNS_SUPPORTED</span>
<a name="gbab-2164"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">166</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_tRNS</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2165"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_bytep</span> <span class="o">*</span><span class="n">trans_alpha</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">num_trans</span><span class="p">,</span>
<a name="gbab-2166"></a>    <span class="n">png_color_16p</span> <span class="o">*</span><span class="n">trans_color</span><span class="p">));</span>
<a name="gbab-2167"></a><span class="cp">#endif</span>
<a name="gbab-2168"></a>
<a name="gbab-2169"></a><span class="cp">#ifdef PNG_tRNS_SUPPORTED</span>
<a name="gbab-2170"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">167</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_tRNS</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2171"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_bytep</span> <span class="n">trans_alpha</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_trans</span><span class="p">,</span>
<a name="gbab-2172"></a>    <span class="n">png_const_color_16p</span> <span class="n">trans_color</span><span class="p">));</span>
<a name="gbab-2173"></a><span class="cp">#endif</span>
<a name="gbab-2174"></a>
<a name="gbab-2175"></a><span class="cp">#ifdef PNG_sCAL_SUPPORTED</span>
<a name="gbab-2176"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">168</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_sCAL</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2177"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">unit</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">width</span><span class="p">,</span> <span class="kt">double</span> <span class="o">*</span><span class="n">height</span><span class="p">))</span>
<a name="gbab-2178"></a><span class="cp">#if defined(PNG_FLOATING_ARITHMETIC_SUPPORTED) || \</span>
<a name="gbab-2179"></a><span class="cp">   defined(PNG_FLOATING_POINT_SUPPORTED)</span>
<a name="gbab-2180"></a><span class="cm">/* NOTE: this API is currently implemented using floating point arithmetic,</span>
<a name="gbab-2181"></a><span class="cm"> * consequently it can only be used on systems with floating point support.</span>
<a name="gbab-2182"></a><span class="cm"> * In any case the range of values supported by png_fixed_point is small and it</span>
<a name="gbab-2183"></a><span class="cm"> * is highly recommended that png_get_sCAL_s be used instead.</span>
<a name="gbab-2184"></a><span class="cm"> */</span>
<a name="gbab-2185"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">214</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_sCAL_fixed</span><span class="p">,</span>
<a name="gbab-2186"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">unit</span><span class="p">,</span>
<a name="gbab-2187"></a>    <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">width</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="o">*</span><span class="n">height</span><span class="p">))</span>
<a name="gbab-2188"></a><span class="cp">#endif</span>
<a name="gbab-2189"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">169</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_sCAL_s</span><span class="p">,</span>
<a name="gbab-2190"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">unit</span><span class="p">,</span>
<a name="gbab-2191"></a>    <span class="n">png_charpp</span> <span class="n">swidth</span><span class="p">,</span> <span class="n">png_charpp</span> <span class="n">sheight</span><span class="p">));</span>
<a name="gbab-2192"></a>
<a name="gbab-2193"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sCAL</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2194"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">unit</span><span class="p">,</span> <span class="kt">double</span> <span class="n">width</span><span class="p">,</span> <span class="kt">double</span> <span class="n">height</span><span class="p">))</span>
<a name="gbab-2195"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">213</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sCAL_fixed</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2196"></a>   <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">unit</span><span class="p">,</span> <span class="n">png_fixed_point</span> <span class="n">width</span><span class="p">,</span>
<a name="gbab-2197"></a>   <span class="n">png_fixed_point</span> <span class="n">height</span><span class="p">))</span>
<a name="gbab-2198"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">171</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_sCAL_s</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2199"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">unit</span><span class="p">,</span>
<a name="gbab-2200"></a>    <span class="n">png_const_charp</span> <span class="n">swidth</span><span class="p">,</span> <span class="n">png_const_charp</span> <span class="n">sheight</span><span class="p">));</span>
<a name="gbab-2201"></a><span class="cp">#endif </span><span class="cm">/* sCAL */</span><span class="cp"></span>
<a name="gbab-2202"></a>
<a name="gbab-2203"></a><span class="cp">#ifdef PNG_SET_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-2204"></a><span class="cm">/* Provide the default handling for all unknown chunks or, optionally, for</span>
<a name="gbab-2205"></a><span class="cm"> * specific unknown chunks.</span>
<a name="gbab-2206"></a><span class="cm"> *</span>
<a name="gbab-2207"></a><span class="cm"> * NOTE: prior to 1.6.0 the handling specified for particular chunks on read was</span>
<a name="gbab-2208"></a><span class="cm"> * ignored and the default was used, the per-chunk setting only had an effect on</span>
<a name="gbab-2209"></a><span class="cm"> * write.  If you wish to have chunk-specific handling on read in code that must</span>
<a name="gbab-2210"></a><span class="cm"> * work on earlier versions you must use a user chunk callback to specify the</span>
<a name="gbab-2211"></a><span class="cm"> * desired handling (keep or discard.)</span>
<a name="gbab-2212"></a><span class="cm"> *</span>
<a name="gbab-2213"></a><span class="cm"> * The &#39;keep&#39; parameter is a PNG_HANDLE_CHUNK_ value as listed below.  The</span>
<a name="gbab-2214"></a><span class="cm"> * parameter is interpreted as follows:</span>
<a name="gbab-2215"></a><span class="cm"> *</span>
<a name="gbab-2216"></a><span class="cm"> * READ:</span>
<a name="gbab-2217"></a><span class="cm"> *    PNG_HANDLE_CHUNK_AS_DEFAULT:</span>
<a name="gbab-2218"></a><span class="cm"> *       Known chunks: do normal libpng processing, do not keep the chunk (but</span>
<a name="gbab-2219"></a><span class="cm"> *          see the comments below about PNG_HANDLE_AS_UNKNOWN_SUPPORTED)</span>
<a name="gbab-2220"></a><span class="cm"> *       Unknown chunks: for a specific chunk use the global default, when used</span>
<a name="gbab-2221"></a><span class="cm"> *          as the default discard the chunk data.</span>
<a name="gbab-2222"></a><span class="cm"> *    PNG_HANDLE_CHUNK_NEVER:</span>
<a name="gbab-2223"></a><span class="cm"> *       Discard the chunk data.</span>
<a name="gbab-2224"></a><span class="cm"> *    PNG_HANDLE_CHUNK_IF_SAFE:</span>
<a name="gbab-2225"></a><span class="cm"> *       Keep the chunk data if the chunk is not critical else raise a chunk</span>
<a name="gbab-2226"></a><span class="cm"> *       error.</span>
<a name="gbab-2227"></a><span class="cm"> *    PNG_HANDLE_CHUNK_ALWAYS:</span>
<a name="gbab-2228"></a><span class="cm"> *       Keep the chunk data.</span>
<a name="gbab-2229"></a><span class="cm"> *</span>
<a name="gbab-2230"></a><span class="cm"> * If the chunk data is saved it can be retrieved using png_get_unknown_chunks,</span>
<a name="gbab-2231"></a><span class="cm"> * below.  Notice that specifying &quot;AS_DEFAULT&quot; as a global default is equivalent</span>
<a name="gbab-2232"></a><span class="cm"> * to specifying &quot;NEVER&quot;, however when &quot;AS_DEFAULT&quot; is used for specific chunks</span>
<a name="gbab-2233"></a><span class="cm"> * it simply resets the behavior to the libpng default.</span>
<a name="gbab-2234"></a><span class="cm"> *</span>
<a name="gbab-2235"></a><span class="cm"> * INTERACTION WTIH USER CHUNK CALLBACKS:</span>
<a name="gbab-2236"></a><span class="cm"> * The per-chunk handling is always used when there is a png_user_chunk_ptr</span>
<a name="gbab-2237"></a><span class="cm"> * callback and the callback returns 0; the chunk is then always stored *unless*</span>
<a name="gbab-2238"></a><span class="cm"> * it is critical and the per-chunk setting is other than ALWAYS.  Notice that</span>
<a name="gbab-2239"></a><span class="cm"> * the global default is *not* used in this case.  (In effect the per-chunk</span>
<a name="gbab-2240"></a><span class="cm"> * value is incremented to at least IF_SAFE.)</span>
<a name="gbab-2241"></a><span class="cm"> *</span>
<a name="gbab-2242"></a><span class="cm"> * IMPORTANT NOTE: this behavior will change in libpng 1.7 - the global and</span>
<a name="gbab-2243"></a><span class="cm"> * per-chunk defaults will be honored.  If you want to preserve the current</span>
<a name="gbab-2244"></a><span class="cm"> * behavior when your callback returns 0 you must set PNG_HANDLE_CHUNK_IF_SAFE</span>
<a name="gbab-2245"></a><span class="cm"> * as the default - if you don&#39;t do this libpng 1.6 will issue a warning.</span>
<a name="gbab-2246"></a><span class="cm"> *</span>
<a name="gbab-2247"></a><span class="cm"> * If you want unhandled unknown chunks to be discarded in libpng 1.6 and</span>
<a name="gbab-2248"></a><span class="cm"> * earlier simply return &#39;1&#39; (handled).</span>
<a name="gbab-2249"></a><span class="cm"> *</span>
<a name="gbab-2250"></a><span class="cm"> * PNG_HANDLE_AS_UNKNOWN_SUPPORTED:</span>
<a name="gbab-2251"></a><span class="cm"> *    If this is *not* set known chunks will always be handled by libpng and</span>
<a name="gbab-2252"></a><span class="cm"> *    will never be stored in the unknown chunk list.  Known chunks listed to</span>
<a name="gbab-2253"></a><span class="cm"> *    png_set_keep_unknown_chunks will have no effect.  If it is set then known</span>
<a name="gbab-2254"></a><span class="cm"> *    chunks listed with a keep other than AS_DEFAULT will *never* be processed</span>
<a name="gbab-2255"></a><span class="cm"> *    by libpng, in addition critical chunks must either be processed by the</span>
<a name="gbab-2256"></a><span class="cm"> *    callback or saved.</span>
<a name="gbab-2257"></a><span class="cm"> *</span>
<a name="gbab-2258"></a><span class="cm"> *    The IHDR and IEND chunks must not be listed.  Because this turns off the</span>
<a name="gbab-2259"></a><span class="cm"> *    default handling for chunks that would otherwise be recognized the</span>
<a name="gbab-2260"></a><span class="cm"> *    behavior of libpng transformations may well become incorrect!</span>
<a name="gbab-2261"></a><span class="cm"> *</span>
<a name="gbab-2262"></a><span class="cm"> * WRITE:</span>
<a name="gbab-2263"></a><span class="cm"> *    When writing chunks the options only apply to the chunks specified by</span>
<a name="gbab-2264"></a><span class="cm"> *    png_set_unknown_chunks (below), libpng will *always* write known chunks</span>
<a name="gbab-2265"></a><span class="cm"> *    required by png_set_ calls and will always write the core critical chunks</span>
<a name="gbab-2266"></a><span class="cm"> *    (as required for PLTE).</span>
<a name="gbab-2267"></a><span class="cm"> *</span>
<a name="gbab-2268"></a><span class="cm"> *    Each chunk in the png_set_unknown_chunks list is looked up in the</span>
<a name="gbab-2269"></a><span class="cm"> *    png_set_keep_unknown_chunks list to find the keep setting, this is then</span>
<a name="gbab-2270"></a><span class="cm"> *    interpreted as follows:</span>
<a name="gbab-2271"></a><span class="cm"> *</span>
<a name="gbab-2272"></a><span class="cm"> *    PNG_HANDLE_CHUNK_AS_DEFAULT:</span>
<a name="gbab-2273"></a><span class="cm"> *       Write safe-to-copy chunks and write other chunks if the global</span>
<a name="gbab-2274"></a><span class="cm"> *       default is set to _ALWAYS, otherwise don&#39;t write this chunk.</span>
<a name="gbab-2275"></a><span class="cm"> *    PNG_HANDLE_CHUNK_NEVER:</span>
<a name="gbab-2276"></a><span class="cm"> *       Do not write the chunk.</span>
<a name="gbab-2277"></a><span class="cm"> *    PNG_HANDLE_CHUNK_IF_SAFE:</span>
<a name="gbab-2278"></a><span class="cm"> *       Write the chunk if it is safe-to-copy, otherwise do not write it.</span>
<a name="gbab-2279"></a><span class="cm"> *    PNG_HANDLE_CHUNK_ALWAYS:</span>
<a name="gbab-2280"></a><span class="cm"> *       Write the chunk.</span>
<a name="gbab-2281"></a><span class="cm"> *</span>
<a name="gbab-2282"></a><span class="cm"> * Note that the default behavior is effectively the opposite of the read case -</span>
<a name="gbab-2283"></a><span class="cm"> * in read unknown chunks are not stored by default, in write they are written</span>
<a name="gbab-2284"></a><span class="cm"> * by default.  Also the behavior of PNG_HANDLE_CHUNK_IF_SAFE is very different</span>
<a name="gbab-2285"></a><span class="cm"> * - on write the safe-to-copy bit is checked, on read the critical bit is</span>
<a name="gbab-2286"></a><span class="cm"> * checked and on read if the chunk is critical an error will be raised.</span>
<a name="gbab-2287"></a><span class="cm"> *</span>
<a name="gbab-2288"></a><span class="cm"> * num_chunks:</span>
<a name="gbab-2289"></a><span class="cm"> * ===========</span>
<a name="gbab-2290"></a><span class="cm"> *    If num_chunks is positive, then the &quot;keep&quot; parameter specifies the manner</span>
<a name="gbab-2291"></a><span class="cm"> *    for handling only those chunks appearing in the chunk_list array,</span>
<a name="gbab-2292"></a><span class="cm"> *    otherwise the chunk list array is ignored.</span>
<a name="gbab-2293"></a><span class="cm"> *</span>
<a name="gbab-2294"></a><span class="cm"> *    If num_chunks is 0 the &quot;keep&quot; parameter specifies the default behavior for</span>
<a name="gbab-2295"></a><span class="cm"> *    unknown chunks, as described above.</span>
<a name="gbab-2296"></a><span class="cm"> *</span>
<a name="gbab-2297"></a><span class="cm"> *    If num_chunks is negative, then the &quot;keep&quot; parameter specifies the manner</span>
<a name="gbab-2298"></a><span class="cm"> *    for handling all unknown chunks plus all chunks recognized by libpng</span>
<a name="gbab-2299"></a><span class="cm"> *    except for the IHDR, PLTE, tRNS, IDAT, and IEND chunks (which continue to</span>
<a name="gbab-2300"></a><span class="cm"> *    be processed by libpng.</span>
<a name="gbab-2301"></a><span class="cm">*/</span>
<a name="gbab-2302"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">172</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_keep_unknown_chunks</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2303"></a>    <span class="kt">int</span> <span class="n">keep</span><span class="p">,</span> <span class="n">png_const_bytep</span> <span class="n">chunk_list</span><span class="p">,</span> <span class="kt">int</span> <span class="n">num_chunks</span><span class="p">));</span>
<a name="gbab-2304"></a>
<a name="gbab-2305"></a><span class="cm">/* The &quot;keep&quot; PNG_HANDLE_CHUNK_ parameter for the specified chunk is returned;</span>
<a name="gbab-2306"></a><span class="cm"> * the result is therefore true (non-zero) if special handling is required,</span>
<a name="gbab-2307"></a><span class="cm"> * false for the default handling.</span>
<a name="gbab-2308"></a><span class="cm"> */</span>
<a name="gbab-2309"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">173</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_handle_as_unknown</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2310"></a>    <span class="n">png_const_bytep</span> <span class="n">chunk_name</span><span class="p">));</span>
<a name="gbab-2311"></a><span class="cp">#endif</span>
<a name="gbab-2312"></a>
<a name="gbab-2313"></a><span class="cp">#ifdef PNG_STORE_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-2314"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">174</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_unknown_chunks</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2315"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_const_unknown_chunkp</span> <span class="n">unknowns</span><span class="p">,</span>
<a name="gbab-2316"></a>    <span class="kt">int</span> <span class="n">num_unknowns</span><span class="p">));</span>
<a name="gbab-2317"></a>   <span class="cm">/* NOTE: prior to 1.6.0 this routine set the &#39;location&#39; field of the added</span>
<a name="gbab-2318"></a><span class="cm">    * unknowns to the location currently stored in the png_struct.  This is</span>
<a name="gbab-2319"></a><span class="cm">    * invariably the wrong value on write.  To fix this call the following API</span>
<a name="gbab-2320"></a><span class="cm">    * for each chunk in the list with the correct location.  If you know your</span>
<a name="gbab-2321"></a><span class="cm">    * code won&#39;t be compiled on earlier versions you can rely on</span>
<a name="gbab-2322"></a><span class="cm">    * png_set_unknown_chunks(write-ptr, png_get_unknown_chunks(read-ptr)) doing</span>
<a name="gbab-2323"></a><span class="cm">    * the correct thing.</span>
<a name="gbab-2324"></a><span class="cm">    */</span>
<a name="gbab-2325"></a>
<a name="gbab-2326"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">175</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_unknown_chunk_location</span><span class="p">,</span>
<a name="gbab-2327"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">chunk</span><span class="p">,</span> <span class="kt">int</span> <span class="n">location</span><span class="p">));</span>
<a name="gbab-2328"></a>
<a name="gbab-2329"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">176</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_get_unknown_chunks</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2330"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_unknown_chunkpp</span> <span class="n">entries</span><span class="p">));</span>
<a name="gbab-2331"></a><span class="cp">#endif</span>
<a name="gbab-2332"></a>
<a name="gbab-2333"></a><span class="cm">/* Png_free_data() will turn off the &quot;valid&quot; flag for anything it frees.</span>
<a name="gbab-2334"></a><span class="cm"> * If you need to turn it off for a chunk that your application has freed,</span>
<a name="gbab-2335"></a><span class="cm"> * you can use png_set_invalid(png_ptr, info_ptr, PNG_INFO_CHNK);</span>
<a name="gbab-2336"></a><span class="cm"> */</span>
<a name="gbab-2337"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">177</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_invalid</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2338"></a>    <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mask</span><span class="p">));</span>
<a name="gbab-2339"></a>
<a name="gbab-2340"></a><span class="cp">#ifdef PNG_INFO_IMAGE_SUPPORTED</span>
<a name="gbab-2341"></a><span class="cm">/* The &quot;params&quot; pointer is currently not used and is for future expansion. */</span>
<a name="gbab-2342"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-2343"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">178</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_read_png</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-2344"></a>    <span class="kt">int</span> <span class="n">transforms</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">params</span><span class="p">));</span>
<a name="gbab-2345"></a><span class="cp">#endif</span>
<a name="gbab-2346"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-2347"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">179</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_write_png</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_inforp</span> <span class="n">info_ptr</span><span class="p">,</span>
<a name="gbab-2348"></a>    <span class="kt">int</span> <span class="n">transforms</span><span class="p">,</span> <span class="n">png_voidp</span> <span class="n">params</span><span class="p">));</span>
<a name="gbab-2349"></a><span class="cp">#endif</span>
<a name="gbab-2350"></a><span class="cp">#endif</span>
<a name="gbab-2351"></a>
<a name="gbab-2352"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">,</span> <span class="n">png_get_copyright</span><span class="p">,</span>
<a name="gbab-2353"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2354"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">181</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">,</span> <span class="n">png_get_header_ver</span><span class="p">,</span>
<a name="gbab-2355"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2356"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">182</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">,</span> <span class="n">png_get_header_version</span><span class="p">,</span>
<a name="gbab-2357"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2358"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">183</span><span class="p">,</span> <span class="n">png_const_charp</span><span class="p">,</span> <span class="n">png_get_libpng_ver</span><span class="p">,</span>
<a name="gbab-2359"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2360"></a>
<a name="gbab-2361"></a><span class="cp">#ifdef PNG_MNG_FEATURES_SUPPORTED</span>
<a name="gbab-2362"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">184</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_permit_mng_features</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2363"></a>    <span class="n">png_uint_32</span> <span class="n">mng_features_permitted</span><span class="p">));</span>
<a name="gbab-2364"></a><span class="cp">#endif</span>
<a name="gbab-2365"></a>
<a name="gbab-2366"></a><span class="cm">/* For use in png_set_keep_unknown, added to version 1.2.6 */</span>
<a name="gbab-2367"></a><span class="cp">#define PNG_HANDLE_CHUNK_AS_DEFAULT   0</span>
<a name="gbab-2368"></a><span class="cp">#define PNG_HANDLE_CHUNK_NEVER        1</span>
<a name="gbab-2369"></a><span class="cp">#define PNG_HANDLE_CHUNK_IF_SAFE      2</span>
<a name="gbab-2370"></a><span class="cp">#define PNG_HANDLE_CHUNK_ALWAYS       3</span>
<a name="gbab-2371"></a><span class="cp">#define PNG_HANDLE_CHUNK_LAST         4</span>
<a name="gbab-2372"></a>
<a name="gbab-2373"></a><span class="cm">/* Strip the prepended error numbers (&quot;#nnn &quot;) from error and warning</span>
<a name="gbab-2374"></a><span class="cm"> * messages before passing them to the error or warning handler.</span>
<a name="gbab-2375"></a><span class="cm"> */</span>
<a name="gbab-2376"></a><span class="cp">#ifdef PNG_ERROR_NUMBERS_SUPPORTED</span>
<a name="gbab-2377"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">185</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_strip_error_numbers</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2378"></a>    <span class="n">png_uint_32</span> <span class="n">strip_mode</span><span class="p">));</span>
<a name="gbab-2379"></a><span class="cp">#endif</span>
<a name="gbab-2380"></a>
<a name="gbab-2381"></a><span class="cm">/* Added in libpng-1.2.6 */</span>
<a name="gbab-2382"></a><span class="cp">#ifdef PNG_SET_USER_LIMITS_SUPPORTED</span>
<a name="gbab-2383"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_user_limits</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2384"></a>    <span class="n">png_uint_32</span> <span class="n">user_width_max</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">user_height_max</span><span class="p">));</span>
<a name="gbab-2385"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">187</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_user_width_max</span><span class="p">,</span>
<a name="gbab-2386"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2387"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">188</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_user_height_max</span><span class="p">,</span>
<a name="gbab-2388"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2389"></a><span class="cm">/* Added in libpng-1.4.0 */</span>
<a name="gbab-2390"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">189</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_chunk_cache_max</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2391"></a>    <span class="n">png_uint_32</span> <span class="n">user_chunk_cache_max</span><span class="p">));</span>
<a name="gbab-2392"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_chunk_cache_max</span><span class="p">,</span>
<a name="gbab-2393"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2394"></a><span class="cm">/* Added in libpng-1.4.1 */</span>
<a name="gbab-2395"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_chunk_malloc_max</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2396"></a>    <span class="n">png_alloc_size_t</span> <span class="n">user_chunk_cache_max</span><span class="p">));</span>
<a name="gbab-2397"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">192</span><span class="p">,</span> <span class="n">png_alloc_size_t</span><span class="p">,</span> <span class="n">png_get_chunk_malloc_max</span><span class="p">,</span>
<a name="gbab-2398"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2399"></a><span class="cp">#endif</span>
<a name="gbab-2400"></a>
<a name="gbab-2401"></a><span class="cp">#if defined(PNG_INCH_CONVERSIONS_SUPPORTED)</span>
<a name="gbab-2402"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">193</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_pixels_per_inch</span><span class="p">,</span>
<a name="gbab-2403"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-2404"></a>
<a name="gbab-2405"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">194</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_x_pixels_per_inch</span><span class="p">,</span>
<a name="gbab-2406"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-2407"></a>
<a name="gbab-2408"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">195</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_y_pixels_per_inch</span><span class="p">,</span>
<a name="gbab-2409"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-2410"></a>
<a name="gbab-2411"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">196</span><span class="p">,</span> <span class="kt">float</span><span class="p">,</span> <span class="n">png_get_x_offset_inches</span><span class="p">,</span>
<a name="gbab-2412"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-2413"></a><span class="cp">#ifdef PNG_FIXED_POINT_SUPPORTED </span><span class="cm">/* otherwise not implemented. */</span><span class="cp"></span>
<a name="gbab-2414"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="n">png_fixed_point</span><span class="p">,</span> <span class="n">png_get_x_offset_inches_fixed</span><span class="p">,</span>
<a name="gbab-2415"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-2416"></a><span class="cp">#endif</span>
<a name="gbab-2417"></a>
<a name="gbab-2418"></a><span class="n">PNG_FP_EXPORT</span><span class="p">(</span><span class="mi">197</span><span class="p">,</span> <span class="kt">float</span><span class="p">,</span> <span class="n">png_get_y_offset_inches</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2419"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-2420"></a><span class="cp">#ifdef PNG_FIXED_POINT_SUPPORTED </span><span class="cm">/* otherwise not implemented. */</span><span class="cp"></span>
<a name="gbab-2421"></a><span class="n">PNG_FIXED_EXPORT</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">png_fixed_point</span><span class="p">,</span> <span class="n">png_get_y_offset_inches_fixed</span><span class="p">,</span>
<a name="gbab-2422"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">))</span>
<a name="gbab-2423"></a><span class="cp">#endif</span>
<a name="gbab-2424"></a>
<a name="gbab-2425"></a><span class="cp">#  ifdef PNG_pHYs_SUPPORTED</span>
<a name="gbab-2426"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">198</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_pHYs_dpi</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2427"></a>    <span class="n">png_const_inforp</span> <span class="n">info_ptr</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">res_x</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="o">*</span><span class="n">res_y</span><span class="p">,</span>
<a name="gbab-2428"></a>    <span class="kt">int</span> <span class="o">*</span><span class="n">unit_type</span><span class="p">));</span>
<a name="gbab-2429"></a><span class="cp">#  endif </span><span class="cm">/* pHYs */</span><span class="cp"></span>
<a name="gbab-2430"></a><span class="cp">#endif  </span><span class="cm">/* INCH_CONVERSIONS */</span><span class="cp"></span>
<a name="gbab-2431"></a>
<a name="gbab-2432"></a><span class="cm">/* Added in libpng-1.4.0 */</span>
<a name="gbab-2433"></a><span class="cp">#ifdef PNG_IO_STATE_SUPPORTED</span>
<a name="gbab-2434"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">199</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_io_state</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2435"></a>
<a name="gbab-2436"></a><span class="cm">/* Removed from libpng 1.6; use png_get_io_chunk_type. */</span>
<a name="gbab-2437"></a><span class="n">PNG_REMOVED</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="n">png_const_bytep</span><span class="p">,</span> <span class="n">png_get_io_chunk_name</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">),</span>
<a name="gbab-2438"></a>    <span class="n">PNG_DEPRECATED</span><span class="p">)</span>
<a name="gbab-2439"></a>
<a name="gbab-2440"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_io_chunk_type</span><span class="p">,</span>
<a name="gbab-2441"></a>    <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">));</span>
<a name="gbab-2442"></a>
<a name="gbab-2443"></a><span class="cm">/* The flags returned by png_get_io_state() are the following: */</span>
<a name="gbab-2444"></a><span class="cp">#  define PNG_IO_NONE        0x0000   </span><span class="cm">/* no I/O at this moment */</span><span class="cp"></span>
<a name="gbab-2445"></a><span class="cp">#  define PNG_IO_READING     0x0001   </span><span class="cm">/* currently reading */</span><span class="cp"></span>
<a name="gbab-2446"></a><span class="cp">#  define PNG_IO_WRITING     0x0002   </span><span class="cm">/* currently writing */</span><span class="cp"></span>
<a name="gbab-2447"></a><span class="cp">#  define PNG_IO_SIGNATURE   0x0010   </span><span class="cm">/* currently at the file signature */</span><span class="cp"></span>
<a name="gbab-2448"></a><span class="cp">#  define PNG_IO_CHUNK_HDR   0x0020   </span><span class="cm">/* currently at the chunk header */</span><span class="cp"></span>
<a name="gbab-2449"></a><span class="cp">#  define PNG_IO_CHUNK_DATA  0x0040   </span><span class="cm">/* currently at the chunk data */</span><span class="cp"></span>
<a name="gbab-2450"></a><span class="cp">#  define PNG_IO_CHUNK_CRC   0x0080   </span><span class="cm">/* currently at the chunk crc */</span><span class="cp"></span>
<a name="gbab-2451"></a><span class="cp">#  define PNG_IO_MASK_OP     0x000f   </span><span class="cm">/* current operation: reading/writing */</span><span class="cp"></span>
<a name="gbab-2452"></a><span class="cp">#  define PNG_IO_MASK_LOC    0x00f0   </span><span class="cm">/* current location: sig/hdr/data/crc */</span><span class="cp"></span>
<a name="gbab-2453"></a><span class="cp">#endif </span><span class="cm">/* IO_STATE */</span><span class="cp"></span>
<a name="gbab-2454"></a>
<a name="gbab-2455"></a><span class="cm">/* Interlace support.  The following macros are always defined so that if</span>
<a name="gbab-2456"></a><span class="cm"> * libpng interlace handling is turned off the macros may be used to handle</span>
<a name="gbab-2457"></a><span class="cm"> * interlaced images within the application.</span>
<a name="gbab-2458"></a><span class="cm"> */</span>
<a name="gbab-2459"></a><span class="cp">#define PNG_INTERLACE_ADAM7_PASSES 7</span>
<a name="gbab-2460"></a>
<a name="gbab-2461"></a><span class="cm">/* Two macros to return the first row and first column of the original,</span>
<a name="gbab-2462"></a><span class="cm"> * full, image which appears in a given pass.  &#39;pass&#39; is in the range 0</span>
<a name="gbab-2463"></a><span class="cm"> * to 6 and the result is in the range 0 to 7.</span>
<a name="gbab-2464"></a><span class="cm"> */</span>
<a name="gbab-2465"></a><span class="cp">#define PNG_PASS_START_ROW(pass) (((1&amp;~(pass))&lt;&lt;(3-((pass)&gt;&gt;1)))&amp;7)</span>
<a name="gbab-2466"></a><span class="cp">#define PNG_PASS_START_COL(pass) (((1&amp; (pass))&lt;&lt;(3-(((pass)+1)&gt;&gt;1)))&amp;7)</span>
<a name="gbab-2467"></a>
<a name="gbab-2468"></a><span class="cm">/* A macro to return the offset between pixels in the output row for a pair of</span>
<a name="gbab-2469"></a><span class="cm"> * pixels in the input - effectively the inverse of the &#39;COL_SHIFT&#39; macro that</span>
<a name="gbab-2470"></a><span class="cm"> * follows.  Note that ROW_OFFSET is the offset from one row to the next whereas</span>
<a name="gbab-2471"></a><span class="cm"> * COL_OFFSET is from one column to the next, within a row.</span>
<a name="gbab-2472"></a><span class="cm"> */</span>
<a name="gbab-2473"></a><span class="cp">#define PNG_PASS_ROW_OFFSET(pass) ((pass)&gt;2?(8&gt;&gt;(((pass)-1)&gt;&gt;1)):8)</span>
<a name="gbab-2474"></a><span class="cp">#define PNG_PASS_COL_OFFSET(pass) (1&lt;&lt;((7-(pass))&gt;&gt;1))</span>
<a name="gbab-2475"></a>
<a name="gbab-2476"></a><span class="cm">/* Two macros to help evaluate the number of rows or columns in each</span>
<a name="gbab-2477"></a><span class="cm"> * pass.  This is expressed as a shift - effectively log2 of the number or</span>
<a name="gbab-2478"></a><span class="cm"> * rows or columns in each 8x8 tile of the original image.</span>
<a name="gbab-2479"></a><span class="cm"> */</span>
<a name="gbab-2480"></a><span class="cp">#define PNG_PASS_ROW_SHIFT(pass) ((pass)&gt;2?(8-(pass))&gt;&gt;1:3)</span>
<a name="gbab-2481"></a><span class="cp">#define PNG_PASS_COL_SHIFT(pass) ((pass)&gt;1?(7-(pass))&gt;&gt;1:3)</span>
<a name="gbab-2482"></a>
<a name="gbab-2483"></a><span class="cm">/* Hence two macros to determine the number of rows or columns in a given</span>
<a name="gbab-2484"></a><span class="cm"> * pass of an image given its height or width.  In fact these macros may</span>
<a name="gbab-2485"></a><span class="cm"> * return non-zero even though the sub-image is empty, because the other</span>
<a name="gbab-2486"></a><span class="cm"> * dimension may be empty for a small image.</span>
<a name="gbab-2487"></a><span class="cm"> */</span>
<a name="gbab-2488"></a><span class="cp">#define PNG_PASS_ROWS(height, pass) (((height)+(((1&lt;&lt;PNG_PASS_ROW_SHIFT(pass))\</span>
<a name="gbab-2489"></a><span class="cp">   -1)-PNG_PASS_START_ROW(pass)))&gt;&gt;PNG_PASS_ROW_SHIFT(pass))</span>
<a name="gbab-2490"></a><span class="cp">#define PNG_PASS_COLS(width, pass) (((width)+(((1&lt;&lt;PNG_PASS_COL_SHIFT(pass))\</span>
<a name="gbab-2491"></a><span class="cp">   -1)-PNG_PASS_START_COL(pass)))&gt;&gt;PNG_PASS_COL_SHIFT(pass))</span>
<a name="gbab-2492"></a>
<a name="gbab-2493"></a><span class="cm">/* For the reader row callbacks (both progressive and sequential) it is</span>
<a name="gbab-2494"></a><span class="cm"> * necessary to find the row in the output image given a row in an interlaced</span>
<a name="gbab-2495"></a><span class="cm"> * image, so two more macros:</span>
<a name="gbab-2496"></a><span class="cm"> */</span>
<a name="gbab-2497"></a><span class="cp">#define PNG_ROW_FROM_PASS_ROW(y_in, pass) \</span>
<a name="gbab-2498"></a><span class="cp">   (((y_in)&lt;&lt;PNG_PASS_ROW_SHIFT(pass))+PNG_PASS_START_ROW(pass))</span>
<a name="gbab-2499"></a><span class="cp">#define PNG_COL_FROM_PASS_COL(x_in, pass) \</span>
<a name="gbab-2500"></a><span class="cp">   (((x_in)&lt;&lt;PNG_PASS_COL_SHIFT(pass))+PNG_PASS_START_COL(pass))</span>
<a name="gbab-2501"></a>
<a name="gbab-2502"></a><span class="cm">/* Two macros which return a boolean (0 or 1) saying whether the given row</span>
<a name="gbab-2503"></a><span class="cm"> * or column is in a particular pass.  These use a common utility macro that</span>
<a name="gbab-2504"></a><span class="cm"> * returns a mask for a given pass - the offset &#39;off&#39; selects the row or</span>
<a name="gbab-2505"></a><span class="cm"> * column version.  The mask has the appropriate bit set for each column in</span>
<a name="gbab-2506"></a><span class="cm"> * the tile.</span>
<a name="gbab-2507"></a><span class="cm"> */</span>
<a name="gbab-2508"></a><span class="cp">#define PNG_PASS_MASK(pass,off) ( \</span>
<a name="gbab-2509"></a><span class="cp">   ((0x110145AF&gt;&gt;(((7-(off))-(pass))&lt;&lt;2)) &amp; 0xF) | \</span>
<a name="gbab-2510"></a><span class="cp">   ((0x01145AF0&gt;&gt;(((7-(off))-(pass))&lt;&lt;2)) &amp; 0xF0))</span>
<a name="gbab-2511"></a>
<a name="gbab-2512"></a><span class="cp">#define PNG_ROW_IN_INTERLACE_PASS(y, pass) \</span>
<a name="gbab-2513"></a><span class="cp">   ((PNG_PASS_MASK(pass,0) &gt;&gt; ((y)&amp;7)) &amp; 1)</span>
<a name="gbab-2514"></a><span class="cp">#define PNG_COL_IN_INTERLACE_PASS(x, pass) \</span>
<a name="gbab-2515"></a><span class="cp">   ((PNG_PASS_MASK(pass,1) &gt;&gt; ((x)&amp;7)) &amp; 1)</span>
<a name="gbab-2516"></a>
<a name="gbab-2517"></a><span class="cp">#ifdef PNG_READ_COMPOSITE_NODIV_SUPPORTED</span>
<a name="gbab-2518"></a><span class="cm">/* With these routines we avoid an integer divide, which will be slower on</span>
<a name="gbab-2519"></a><span class="cm"> * most machines.  However, it does take more operations than the corresponding</span>
<a name="gbab-2520"></a><span class="cm"> * divide method, so it may be slower on a few RISC systems.  There are two</span>
<a name="gbab-2521"></a><span class="cm"> * shifts (by 8 or 16 bits) and an addition, versus a single integer divide.</span>
<a name="gbab-2522"></a><span class="cm"> *</span>
<a name="gbab-2523"></a><span class="cm"> * Note that the rounding factors are NOT supposed to be the same!  128 and</span>
<a name="gbab-2524"></a><span class="cm"> * 32768 are correct for the NODIV code; 127 and 32767 are correct for the</span>
<a name="gbab-2525"></a><span class="cm"> * standard method.</span>
<a name="gbab-2526"></a><span class="cm"> *</span>
<a name="gbab-2527"></a><span class="cm"> * [Optimized code by Greg Roelofs and Mark Adler...blame us for bugs. :-) ]</span>
<a name="gbab-2528"></a><span class="cm"> */</span>
<a name="gbab-2529"></a>
<a name="gbab-2530"></a> <span class="cm">/* fg and bg should be in `gamma 1.0&#39; space; alpha is the opacity */</span>
<a name="gbab-2531"></a>
<a name="gbab-2532"></a><span class="cp">#  define png_composite(composite, fg, alpha, bg)         \</span>
<a name="gbab-2533"></a><span class="cp">     { png_uint_16 temp = (png_uint_16)((png_uint_16)(fg) \</span>
<a name="gbab-2534"></a><span class="cp">           * (png_uint_16)(alpha)                         \</span>
<a name="gbab-2535"></a><span class="cp">           + (png_uint_16)(bg)*(png_uint_16)(255          \</span>
<a name="gbab-2536"></a><span class="cp">           - (png_uint_16)(alpha)) + 128);                \</span>
<a name="gbab-2537"></a><span class="cp">       (composite) = (png_byte)(((temp + (temp &gt;&gt; 8)) &gt;&gt; 8) &amp; 0xff); }</span>
<a name="gbab-2538"></a>
<a name="gbab-2539"></a><span class="cp">#  define png_composite_16(composite, fg, alpha, bg)       \</span>
<a name="gbab-2540"></a><span class="cp">     { png_uint_32 temp = (png_uint_32)((png_uint_32)(fg)  \</span>
<a name="gbab-2541"></a><span class="cp">           * (png_uint_32)(alpha)                          \</span>
<a name="gbab-2542"></a><span class="cp">           + (png_uint_32)(bg)*(65535                      \</span>
<a name="gbab-2543"></a><span class="cp">           - (png_uint_32)(alpha)) + 32768);               \</span>
<a name="gbab-2544"></a><span class="cp">       (composite) = (png_uint_16)(0xffff &amp; ((temp + (temp &gt;&gt; 16)) &gt;&gt; 16)); }</span>
<a name="gbab-2545"></a>
<a name="gbab-2546"></a><span class="cp">#else  </span><span class="cm">/* Standard method using integer division */</span><span class="cp"></span>
<a name="gbab-2547"></a>
<a name="gbab-2548"></a><span class="cp">#  define png_composite(composite, fg, alpha, bg)                          \</span>
<a name="gbab-2549"></a><span class="cp">     (composite) =                                                       \</span>
<a name="gbab-2550"></a><span class="cp">         (png_byte)(0xff &amp; (((png_uint_16)(fg) * (png_uint_16)(alpha) +  \</span>
<a name="gbab-2551"></a><span class="cp">     (png_uint_16)(bg) * (png_uint_16)(255 - (png_uint_16)(alpha)) +       \</span>
<a name="gbab-2552"></a><span class="cp">         127) / 255))</span>
<a name="gbab-2553"></a>
<a name="gbab-2554"></a><span class="cp">#  define png_composite_16(composite, fg, alpha, bg)                         \</span>
<a name="gbab-2555"></a><span class="cp">     (composite) =                                                           \</span>
<a name="gbab-2556"></a><span class="cp">         (png_uint_16)(0xffff &amp; (((png_uint_32)(fg) * (png_uint_32)(alpha) + \</span>
<a name="gbab-2557"></a><span class="cp">     (png_uint_32)(bg)*(png_uint_32)(65535 - (png_uint_32)(alpha)) +         \</span>
<a name="gbab-2558"></a><span class="cp">         32767) / 65535))</span>
<a name="gbab-2559"></a><span class="cp">#endif </span><span class="cm">/* READ_COMPOSITE_NODIV */</span><span class="cp"></span>
<a name="gbab-2560"></a>
<a name="gbab-2561"></a><span class="cp">#ifdef PNG_READ_INT_FUNCTIONS_SUPPORTED</span>
<a name="gbab-2562"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_uint_32</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_bytep</span> <span class="n">buf</span><span class="p">));</span>
<a name="gbab-2563"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">202</span><span class="p">,</span> <span class="n">png_uint_16</span><span class="p">,</span> <span class="n">png_get_uint_16</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_bytep</span> <span class="n">buf</span><span class="p">));</span>
<a name="gbab-2564"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">203</span><span class="p">,</span> <span class="n">png_int_32</span><span class="p">,</span> <span class="n">png_get_int_32</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_bytep</span> <span class="n">buf</span><span class="p">));</span>
<a name="gbab-2565"></a><span class="cp">#endif</span>
<a name="gbab-2566"></a>
<a name="gbab-2567"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">204</span><span class="p">,</span> <span class="n">png_uint_32</span><span class="p">,</span> <span class="n">png_get_uint_31</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structrp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2568"></a>    <span class="n">png_const_bytep</span> <span class="n">buf</span><span class="p">));</span>
<a name="gbab-2569"></a><span class="cm">/* No png_get_int_16 -- may be added if there&#39;s a real need for it. */</span>
<a name="gbab-2570"></a>
<a name="gbab-2571"></a><span class="cm">/* Place a 32-bit number into a buffer in PNG byte order (big-endian). */</span>
<a name="gbab-2572"></a><span class="cp">#ifdef PNG_WRITE_INT_FUNCTIONS_SUPPORTED</span>
<a name="gbab-2573"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">205</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_save_uint_32</span><span class="p">,</span> <span class="p">(</span><span class="n">png_bytep</span> <span class="n">buf</span><span class="p">,</span> <span class="n">png_uint_32</span> <span class="n">i</span><span class="p">));</span>
<a name="gbab-2574"></a><span class="cp">#endif</span>
<a name="gbab-2575"></a><span class="cp">#ifdef PNG_SAVE_INT_32_SUPPORTED</span>
<a name="gbab-2576"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">206</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_save_int_32</span><span class="p">,</span> <span class="p">(</span><span class="n">png_bytep</span> <span class="n">buf</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">i</span><span class="p">));</span>
<a name="gbab-2577"></a><span class="cp">#endif</span>
<a name="gbab-2578"></a>
<a name="gbab-2579"></a><span class="cm">/* Place a 16-bit number into a buffer in PNG byte order.</span>
<a name="gbab-2580"></a><span class="cm"> * The parameter is declared unsigned int, not png_uint_16,</span>
<a name="gbab-2581"></a><span class="cm"> * just to avoid potential problems on pre-ANSI C compilers.</span>
<a name="gbab-2582"></a><span class="cm"> */</span>
<a name="gbab-2583"></a><span class="cp">#ifdef PNG_WRITE_INT_FUNCTIONS_SUPPORTED</span>
<a name="gbab-2584"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">207</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_save_uint_16</span><span class="p">,</span> <span class="p">(</span><span class="n">png_bytep</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span><span class="p">));</span>
<a name="gbab-2585"></a><span class="cm">/* No png_save_int_16 -- may be added if there&#39;s a real need for it. */</span>
<a name="gbab-2586"></a><span class="cp">#endif</span>
<a name="gbab-2587"></a>
<a name="gbab-2588"></a><span class="cp">#ifdef PNG_USE_READ_MACROS</span>
<a name="gbab-2589"></a><span class="cm">/* Inline macros to do direct reads of bytes from the input buffer.</span>
<a name="gbab-2590"></a><span class="cm"> * The png_get_int_32() routine assumes we are using two&#39;s complement</span>
<a name="gbab-2591"></a><span class="cm"> * format for negative values, which is almost certainly true.</span>
<a name="gbab-2592"></a><span class="cm"> */</span>
<a name="gbab-2593"></a><span class="cp">#  define PNG_get_uint_32(buf) \</span>
<a name="gbab-2594"></a><span class="cp">     (((png_uint_32)(*(buf)) &lt;&lt; 24) + \</span>
<a name="gbab-2595"></a><span class="cp">      ((png_uint_32)(*((buf) + 1)) &lt;&lt; 16) + \</span>
<a name="gbab-2596"></a><span class="cp">      ((png_uint_32)(*((buf) + 2)) &lt;&lt; 8) + \</span>
<a name="gbab-2597"></a><span class="cp">      ((png_uint_32)(*((buf) + 3))))</span>
<a name="gbab-2598"></a>
<a name="gbab-2599"></a>   <span class="cm">/* From libpng-1.4.0 until 1.4.4, the png_get_uint_16 macro (but not the</span>
<a name="gbab-2600"></a><span class="cm">    * function) incorrectly returned a value of type png_uint_32.</span>
<a name="gbab-2601"></a><span class="cm">    */</span>
<a name="gbab-2602"></a><span class="cp">#  define PNG_get_uint_16(buf) \</span>
<a name="gbab-2603"></a><span class="cp">     ((png_uint_16) \</span>
<a name="gbab-2604"></a><span class="cp">      (((unsigned int)(*(buf)) &lt;&lt; 8) + \</span>
<a name="gbab-2605"></a><span class="cp">       ((unsigned int)(*((buf) + 1)))))</span>
<a name="gbab-2606"></a>
<a name="gbab-2607"></a><span class="cp">#  define PNG_get_int_32(buf) \</span>
<a name="gbab-2608"></a><span class="cp">     ((png_int_32)((*(buf) &amp; 0x80) \</span>
<a name="gbab-2609"></a><span class="cp">      ? -((png_int_32)(((png_get_uint_32(buf)^0xffffffffU)+1U)&amp;0x7fffffffU)) \</span>
<a name="gbab-2610"></a><span class="cp">      : (png_int_32)png_get_uint_32(buf)))</span>
<a name="gbab-2611"></a>
<a name="gbab-2612"></a>   <span class="cm">/* If PNG_PREFIX is defined the same thing as below happens in pnglibconf.h,</span>
<a name="gbab-2613"></a><span class="cm">    * but defining a macro name prefixed with PNG_PREFIX.</span>
<a name="gbab-2614"></a><span class="cm">    */</span>
<a name="gbab-2615"></a><span class="cp">#  ifndef PNG_PREFIX</span>
<a name="gbab-2616"></a><span class="cp">#     define png_get_uint_32(buf) PNG_get_uint_32(buf)</span>
<a name="gbab-2617"></a><span class="cp">#     define png_get_uint_16(buf) PNG_get_uint_16(buf)</span>
<a name="gbab-2618"></a><span class="cp">#     define png_get_int_32(buf)  PNG_get_int_32(buf)</span>
<a name="gbab-2619"></a><span class="cp">#  endif</span>
<a name="gbab-2620"></a><span class="cp">#else</span>
<a name="gbab-2621"></a><span class="cp">#  ifdef PNG_PREFIX</span>
<a name="gbab-2622"></a>      <span class="cm">/* No macros; revert to the (redefined) function */</span>
<a name="gbab-2623"></a><span class="cp">#     define PNG_get_uint_32 (png_get_uint_32)</span>
<a name="gbab-2624"></a><span class="cp">#     define PNG_get_uint_16 (png_get_uint_16)</span>
<a name="gbab-2625"></a><span class="cp">#     define PNG_get_int_32  (png_get_int_32)</span>
<a name="gbab-2626"></a><span class="cp">#  endif</span>
<a name="gbab-2627"></a><span class="cp">#endif</span>
<a name="gbab-2628"></a>
<a name="gbab-2629"></a><span class="cp">#ifdef PNG_CHECK_FOR_INVALID_INDEX_SUPPORTED</span>
<a name="gbab-2630"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">242</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_set_check_for_invalid_index</span><span class="p">,</span>
<a name="gbab-2631"></a>    <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">allowed</span><span class="p">));</span>
<a name="gbab-2632"></a><span class="cp">#  ifdef PNG_GET_PALETTE_MAX_SUPPORTED</span>
<a name="gbab-2633"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">243</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_get_palette_max</span><span class="p">,</span> <span class="p">(</span><span class="n">png_const_structp</span> <span class="n">png_ptr</span><span class="p">,</span>
<a name="gbab-2634"></a>    <span class="n">png_const_infop</span> <span class="n">info_ptr</span><span class="p">));</span>
<a name="gbab-2635"></a><span class="cp">#  endif</span>
<a name="gbab-2636"></a><span class="cp">#endif </span><span class="cm">/* CHECK_FOR_INVALID_INDEX */</span><span class="cp"></span>
<a name="gbab-2637"></a>
<a name="gbab-2638"></a><span class="cm">/*******************************************************************************</span>
<a name="gbab-2639"></a><span class="cm"> * Section 5: SIMPLIFIED API</span>
<a name="gbab-2640"></a><span class="cm"> *******************************************************************************</span>
<a name="gbab-2641"></a><span class="cm"> *</span>
<a name="gbab-2642"></a><span class="cm"> * Please read the documentation in libpng-manual.txt (TODO: write said</span>
<a name="gbab-2643"></a><span class="cm"> * documentation) if you don&#39;t understand what follows.</span>
<a name="gbab-2644"></a><span class="cm"> *</span>
<a name="gbab-2645"></a><span class="cm"> * The simplified API hides the details of both libpng and the PNG file format</span>
<a name="gbab-2646"></a><span class="cm"> * itself.  It allows PNG files to be read into a very limited number of</span>
<a name="gbab-2647"></a><span class="cm"> * in-memory bitmap formats or to be written from the same formats.  If these</span>
<a name="gbab-2648"></a><span class="cm"> * formats do not accomodate your needs then you can, and should, use the more</span>
<a name="gbab-2649"></a><span class="cm"> * sophisticated APIs above - these support a wide variety of in-memory formats</span>
<a name="gbab-2650"></a><span class="cm"> * and a wide variety of sophisticated transformations to those formats as well</span>
<a name="gbab-2651"></a><span class="cm"> * as a wide variety of APIs to manipulate ancillary information.</span>
<a name="gbab-2652"></a><span class="cm"> *</span>
<a name="gbab-2653"></a><span class="cm"> * To read a PNG file using the simplified API:</span>
<a name="gbab-2654"></a><span class="cm"> *</span>
<a name="gbab-2655"></a><span class="cm"> * 1) Declare a &#39;png_image&#39; structure (see below) on the stack, set the</span>
<a name="gbab-2656"></a><span class="cm"> *    version field to PNG_IMAGE_VERSION and the &#39;opaque&#39; pointer to NULL</span>
<a name="gbab-2657"></a><span class="cm"> *    (this is REQUIRED, your program may crash if you don&#39;t do it.)</span>
<a name="gbab-2658"></a><span class="cm"> * 2) Call the appropriate png_image_begin_read... function.</span>
<a name="gbab-2659"></a><span class="cm"> * 3) Set the png_image &#39;format&#39; member to the required sample format.</span>
<a name="gbab-2660"></a><span class="cm"> * 4) Allocate a buffer for the image and, if required, the color-map.</span>
<a name="gbab-2661"></a><span class="cm"> * 5) Call png_image_finish_read to read the image and, if required, the</span>
<a name="gbab-2662"></a><span class="cm"> *    color-map into your buffers.</span>
<a name="gbab-2663"></a><span class="cm"> *</span>
<a name="gbab-2664"></a><span class="cm"> * There are no restrictions on the format of the PNG input itself; all valid</span>
<a name="gbab-2665"></a><span class="cm"> * color types, bit depths, and interlace methods are acceptable, and the</span>
<a name="gbab-2666"></a><span class="cm"> * input image is transformed as necessary to the requested in-memory format</span>
<a name="gbab-2667"></a><span class="cm"> * during the png_image_finish_read() step.  The only caveat is that if you</span>
<a name="gbab-2668"></a><span class="cm"> * request a color-mapped image from a PNG that is full-color or makes</span>
<a name="gbab-2669"></a><span class="cm"> * complex use of an alpha channel the transformation is extremely lossy and the</span>
<a name="gbab-2670"></a><span class="cm"> * result may look terrible.</span>
<a name="gbab-2671"></a><span class="cm"> *</span>
<a name="gbab-2672"></a><span class="cm"> * To write a PNG file using the simplified API:</span>
<a name="gbab-2673"></a><span class="cm"> *</span>
<a name="gbab-2674"></a><span class="cm"> * 1) Declare a &#39;png_image&#39; structure on the stack and memset() it to all zero.</span>
<a name="gbab-2675"></a><span class="cm"> * 2) Initialize the members of the structure that describe the image, setting</span>
<a name="gbab-2676"></a><span class="cm"> *    the &#39;format&#39; member to the format of the image samples.</span>
<a name="gbab-2677"></a><span class="cm"> * 3) Call the appropriate png_image_write... function with a pointer to the</span>
<a name="gbab-2678"></a><span class="cm"> *    image and, if necessary, the color-map to write the PNG data.</span>
<a name="gbab-2679"></a><span class="cm"> *</span>
<a name="gbab-2680"></a><span class="cm"> * png_image is a structure that describes the in-memory format of an image</span>
<a name="gbab-2681"></a><span class="cm"> * when it is being read or defines the in-memory format of an image that you</span>
<a name="gbab-2682"></a><span class="cm"> * need to write:</span>
<a name="gbab-2683"></a><span class="cm"> */</span>
<a name="gbab-2684"></a><span class="cp">#if defined(PNG_SIMPLIFIED_READ_SUPPORTED) || \</span>
<a name="gbab-2685"></a><span class="cp">    defined(PNG_SIMPLIFIED_WRITE_SUPPORTED)</span>
<a name="gbab-2686"></a>
<a name="gbab-2687"></a><span class="cp">#define PNG_IMAGE_VERSION 1</span>
<a name="gbab-2688"></a>
<a name="gbab-2689"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_control</span> <span class="o">*</span><span class="n">png_controlp</span><span class="p">;</span>
<a name="gbab-2690"></a><span class="k">typedef</span> <span class="k">struct</span>
<a name="gbab-2691"></a><span class="p">{</span>
<a name="gbab-2692"></a>   <span class="n">png_controlp</span> <span class="n">opaque</span><span class="p">;</span>    <span class="cm">/* Initialize to NULL, free with png_image_free */</span>
<a name="gbab-2693"></a>   <span class="n">png_uint_32</span>  <span class="n">version</span><span class="p">;</span>   <span class="cm">/* Set to PNG_IMAGE_VERSION */</span>
<a name="gbab-2694"></a>   <span class="n">png_uint_32</span>  <span class="n">width</span><span class="p">;</span>     <span class="cm">/* Image width in pixels (columns) */</span>
<a name="gbab-2695"></a>   <span class="n">png_uint_32</span>  <span class="n">height</span><span class="p">;</span>    <span class="cm">/* Image height in pixels (rows) */</span>
<a name="gbab-2696"></a>   <span class="n">png_uint_32</span>  <span class="n">format</span><span class="p">;</span>    <span class="cm">/* Image format as defined below */</span>
<a name="gbab-2697"></a>   <span class="n">png_uint_32</span>  <span class="n">flags</span><span class="p">;</span>     <span class="cm">/* A bit mask containing informational flags */</span>
<a name="gbab-2698"></a>   <span class="n">png_uint_32</span>  <span class="n">colormap_entries</span><span class="p">;</span>
<a name="gbab-2699"></a>                           <span class="cm">/* Number of entries in the color-map */</span>
<a name="gbab-2700"></a>
<a name="gbab-2701"></a>   <span class="cm">/* In the event of an error or warning the following field will be set to a</span>
<a name="gbab-2702"></a><span class="cm">    * non-zero value and the &#39;message&#39; field will contain a &#39;\0&#39; terminated</span>
<a name="gbab-2703"></a><span class="cm">    * string with the libpng error or warning message.  If both warnings and</span>
<a name="gbab-2704"></a><span class="cm">    * an error were encountered, only the error is recorded.  If there</span>
<a name="gbab-2705"></a><span class="cm">    * are multiple warnings, only the first one is recorded.</span>
<a name="gbab-2706"></a><span class="cm">    *</span>
<a name="gbab-2707"></a><span class="cm">    * The upper 30 bits of this value are reserved, the low two bits contain</span>
<a name="gbab-2708"></a><span class="cm">    * a value as follows:</span>
<a name="gbab-2709"></a><span class="cm">    */</span>
<a name="gbab-2710"></a><span class="cp">#  define PNG_IMAGE_WARNING 1</span>
<a name="gbab-2711"></a><span class="cp">#  define PNG_IMAGE_ERROR 2</span>
<a name="gbab-2712"></a>   <span class="cm">/*</span>
<a name="gbab-2713"></a><span class="cm">    * The result is a two-bit code such that a value more than 1 indicates</span>
<a name="gbab-2714"></a><span class="cm">    * a failure in the API just called:</span>
<a name="gbab-2715"></a><span class="cm">    *</span>
<a name="gbab-2716"></a><span class="cm">    *    0 - no warning or error</span>
<a name="gbab-2717"></a><span class="cm">    *    1 - warning</span>
<a name="gbab-2718"></a><span class="cm">    *    2 - error</span>
<a name="gbab-2719"></a><span class="cm">    *    3 - error preceded by warning</span>
<a name="gbab-2720"></a><span class="cm">    */</span>
<a name="gbab-2721"></a><span class="cp">#  define PNG_IMAGE_FAILED(png_cntrl) ((((png_cntrl).warning_or_error)&amp;0x03)&gt;1)</span>
<a name="gbab-2722"></a>
<a name="gbab-2723"></a>   <span class="n">png_uint_32</span>  <span class="n">warning_or_error</span><span class="p">;</span>
<a name="gbab-2724"></a>
<a name="gbab-2725"></a>   <span class="kt">char</span>         <span class="n">message</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<a name="gbab-2726"></a><span class="p">}</span> <span class="n">png_image</span><span class="p">,</span> <span class="o">*</span><span class="n">png_imagep</span><span class="p">;</span>
<a name="gbab-2727"></a>
<a name="gbab-2728"></a><span class="cm">/* The samples of the image have one to four channels whose components have</span>
<a name="gbab-2729"></a><span class="cm"> * original values in the range 0 to 1.0:</span>
<a name="gbab-2730"></a><span class="cm"> *</span>
<a name="gbab-2731"></a><span class="cm"> * 1: A single gray or luminance channel (G).</span>
<a name="gbab-2732"></a><span class="cm"> * 2: A gray/luminance channel and an alpha channel (GA).</span>
<a name="gbab-2733"></a><span class="cm"> * 3: Three red, green, blue color channels (RGB).</span>
<a name="gbab-2734"></a><span class="cm"> * 4: Three color channels and an alpha channel (RGBA).</span>
<a name="gbab-2735"></a><span class="cm"> *</span>
<a name="gbab-2736"></a><span class="cm"> * The components are encoded in one of two ways:</span>
<a name="gbab-2737"></a><span class="cm"> *</span>
<a name="gbab-2738"></a><span class="cm"> * a) As a small integer, value 0..255, contained in a single byte.  For the</span>
<a name="gbab-2739"></a><span class="cm"> * alpha channel the original value is simply value/255.  For the color or</span>
<a name="gbab-2740"></a><span class="cm"> * luminance channels the value is encoded according to the sRGB specification</span>
<a name="gbab-2741"></a><span class="cm"> * and matches the 8-bit format expected by typical display devices.</span>
<a name="gbab-2742"></a><span class="cm"> *</span>
<a name="gbab-2743"></a><span class="cm"> * The color/gray channels are not scaled (pre-multiplied) by the alpha</span>
<a name="gbab-2744"></a><span class="cm"> * channel and are suitable for passing to color management software.</span>
<a name="gbab-2745"></a><span class="cm"> *</span>
<a name="gbab-2746"></a><span class="cm"> * b) As a value in the range 0..65535, contained in a 2-byte integer.  All</span>
<a name="gbab-2747"></a><span class="cm"> * channels can be converted to the original value by dividing by 65535; all</span>
<a name="gbab-2748"></a><span class="cm"> * channels are linear.  Color channels use the RGB encoding (RGB end-points) of</span>
<a name="gbab-2749"></a><span class="cm"> * the sRGB specification.  This encoding is identified by the</span>
<a name="gbab-2750"></a><span class="cm"> * PNG_FORMAT_FLAG_LINEAR flag below.</span>
<a name="gbab-2751"></a><span class="cm"> *</span>
<a name="gbab-2752"></a><span class="cm"> * When the simplified API needs to convert between sRGB and linear colorspaces,</span>
<a name="gbab-2753"></a><span class="cm"> * the actual sRGB transfer curve defined in the sRGB specification (see the</span>
<a name="gbab-2754"></a><span class="cm"> * article at http://en.wikipedia.org/wiki/SRGB) is used, not the gamma=1/2.2</span>
<a name="gbab-2755"></a><span class="cm"> * approximation used elsewhere in libpng.</span>
<a name="gbab-2756"></a><span class="cm"> *</span>
<a name="gbab-2757"></a><span class="cm"> * When an alpha channel is present it is expected to denote pixel coverage</span>
<a name="gbab-2758"></a><span class="cm"> * of the color or luminance channels and is returned as an associated alpha</span>
<a name="gbab-2759"></a><span class="cm"> * channel: the color/gray channels are scaled (pre-multiplied) by the alpha</span>
<a name="gbab-2760"></a><span class="cm"> * value.</span>
<a name="gbab-2761"></a><span class="cm"> *</span>
<a name="gbab-2762"></a><span class="cm"> * The samples are either contained directly in the image data, between 1 and 8</span>
<a name="gbab-2763"></a><span class="cm"> * bytes per pixel according to the encoding, or are held in a color-map indexed</span>
<a name="gbab-2764"></a><span class="cm"> * by bytes in the image data.  In the case of a color-map the color-map entries</span>
<a name="gbab-2765"></a><span class="cm"> * are individual samples, encoded as above, and the image data has one byte per</span>
<a name="gbab-2766"></a><span class="cm"> * pixel to select the relevant sample from the color-map.</span>
<a name="gbab-2767"></a><span class="cm"> */</span>
<a name="gbab-2768"></a>
<a name="gbab-2769"></a><span class="cm">/* PNG_FORMAT_*</span>
<a name="gbab-2770"></a><span class="cm"> *</span>
<a name="gbab-2771"></a><span class="cm"> * #defines to be used in png_image::format.  Each #define identifies a</span>
<a name="gbab-2772"></a><span class="cm"> * particular layout of sample data and, if present, alpha values.  There are</span>
<a name="gbab-2773"></a><span class="cm"> * separate defines for each of the two component encodings.</span>
<a name="gbab-2774"></a><span class="cm"> *</span>
<a name="gbab-2775"></a><span class="cm"> * A format is built up using single bit flag values.  All combinations are</span>
<a name="gbab-2776"></a><span class="cm"> * valid.  Formats can be built up from the flag values or you can use one of</span>
<a name="gbab-2777"></a><span class="cm"> * the predefined values below.  When testing formats always use the FORMAT_FLAG</span>
<a name="gbab-2778"></a><span class="cm"> * macros to test for individual features - future versions of the library may</span>
<a name="gbab-2779"></a><span class="cm"> * add new flags.</span>
<a name="gbab-2780"></a><span class="cm"> *</span>
<a name="gbab-2781"></a><span class="cm"> * When reading or writing color-mapped images the format should be set to the</span>
<a name="gbab-2782"></a><span class="cm"> * format of the entries in the color-map then png_image_{read,write}_colormap</span>
<a name="gbab-2783"></a><span class="cm"> * called to read or write the color-map and set the format correctly for the</span>
<a name="gbab-2784"></a><span class="cm"> * image data.  Do not set the PNG_FORMAT_FLAG_COLORMAP bit directly!</span>
<a name="gbab-2785"></a><span class="cm"> *</span>
<a name="gbab-2786"></a><span class="cm"> * NOTE: libpng can be built with particular features disabled. If you see</span>
<a name="gbab-2787"></a><span class="cm"> * compiler errors because the definition of one of the following flags has been</span>
<a name="gbab-2788"></a><span class="cm"> * compiled out it is because libpng does not have the required support.  It is</span>
<a name="gbab-2789"></a><span class="cm"> * possible, however, for the libpng configuration to enable the format on just</span>
<a name="gbab-2790"></a><span class="cm"> * read or just write; in that case you may see an error at run time.  You can</span>
<a name="gbab-2791"></a><span class="cm"> * guard against this by checking for the definition of the appropriate</span>
<a name="gbab-2792"></a><span class="cm"> * &quot;_SUPPORTED&quot; macro, one of:</span>
<a name="gbab-2793"></a><span class="cm"> *</span>
<a name="gbab-2794"></a><span class="cm"> *    PNG_SIMPLIFIED_{READ,WRITE}_{BGR,AFIRST}_SUPPORTED</span>
<a name="gbab-2795"></a><span class="cm"> */</span>
<a name="gbab-2796"></a><span class="cp">#define PNG_FORMAT_FLAG_ALPHA    0x01U </span><span class="cm">/* format with an alpha channel */</span><span class="cp"></span>
<a name="gbab-2797"></a><span class="cp">#define PNG_FORMAT_FLAG_COLOR    0x02U </span><span class="cm">/* color format: otherwise grayscale */</span><span class="cp"></span>
<a name="gbab-2798"></a><span class="cp">#define PNG_FORMAT_FLAG_LINEAR   0x04U </span><span class="cm">/* 2-byte channels else 1-byte */</span><span class="cp"></span>
<a name="gbab-2799"></a><span class="cp">#define PNG_FORMAT_FLAG_COLORMAP 0x08U </span><span class="cm">/* image data is color-mapped */</span><span class="cp"></span>
<a name="gbab-2800"></a>
<a name="gbab-2801"></a><span class="cp">#ifdef PNG_FORMAT_BGR_SUPPORTED</span>
<a name="gbab-2802"></a><span class="cp">#  define PNG_FORMAT_FLAG_BGR    0x10U </span><span class="cm">/* BGR colors, else order is RGB */</span><span class="cp"></span>
<a name="gbab-2803"></a><span class="cp">#endif</span>
<a name="gbab-2804"></a>
<a name="gbab-2805"></a><span class="cp">#ifdef PNG_FORMAT_AFIRST_SUPPORTED</span>
<a name="gbab-2806"></a><span class="cp">#  define PNG_FORMAT_FLAG_AFIRST 0x20U </span><span class="cm">/* alpha channel comes first */</span><span class="cp"></span>
<a name="gbab-2807"></a><span class="cp">#endif</span>
<a name="gbab-2808"></a>
<a name="gbab-2809"></a><span class="cm">/* Commonly used formats have predefined macros.</span>
<a name="gbab-2810"></a><span class="cm"> *</span>
<a name="gbab-2811"></a><span class="cm"> * First the single byte (sRGB) formats:</span>
<a name="gbab-2812"></a><span class="cm"> */</span>
<a name="gbab-2813"></a><span class="cp">#define PNG_FORMAT_GRAY 0</span>
<a name="gbab-2814"></a><span class="cp">#define PNG_FORMAT_GA   PNG_FORMAT_FLAG_ALPHA</span>
<a name="gbab-2815"></a><span class="cp">#define PNG_FORMAT_AG   (PNG_FORMAT_GA|PNG_FORMAT_FLAG_AFIRST)</span>
<a name="gbab-2816"></a><span class="cp">#define PNG_FORMAT_RGB  PNG_FORMAT_FLAG_COLOR</span>
<a name="gbab-2817"></a><span class="cp">#define PNG_FORMAT_BGR  (PNG_FORMAT_FLAG_COLOR|PNG_FORMAT_FLAG_BGR)</span>
<a name="gbab-2818"></a><span class="cp">#define PNG_FORMAT_RGBA (PNG_FORMAT_RGB|PNG_FORMAT_FLAG_ALPHA)</span>
<a name="gbab-2819"></a><span class="cp">#define PNG_FORMAT_ARGB (PNG_FORMAT_RGBA|PNG_FORMAT_FLAG_AFIRST)</span>
<a name="gbab-2820"></a><span class="cp">#define PNG_FORMAT_BGRA (PNG_FORMAT_BGR|PNG_FORMAT_FLAG_ALPHA)</span>
<a name="gbab-2821"></a><span class="cp">#define PNG_FORMAT_ABGR (PNG_FORMAT_BGRA|PNG_FORMAT_FLAG_AFIRST)</span>
<a name="gbab-2822"></a>
<a name="gbab-2823"></a><span class="cm">/* Then the linear 2-byte formats.  When naming these &quot;Y&quot; is used to</span>
<a name="gbab-2824"></a><span class="cm"> * indicate a luminance (gray) channel.</span>
<a name="gbab-2825"></a><span class="cm"> */</span>
<a name="gbab-2826"></a><span class="cp">#define PNG_FORMAT_LINEAR_Y PNG_FORMAT_FLAG_LINEAR</span>
<a name="gbab-2827"></a><span class="cp">#define PNG_FORMAT_LINEAR_Y_ALPHA (PNG_FORMAT_FLAG_LINEAR|PNG_FORMAT_FLAG_ALPHA)</span>
<a name="gbab-2828"></a><span class="cp">#define PNG_FORMAT_LINEAR_RGB (PNG_FORMAT_FLAG_LINEAR|PNG_FORMAT_FLAG_COLOR)</span>
<a name="gbab-2829"></a><span class="cp">#define PNG_FORMAT_LINEAR_RGB_ALPHA \</span>
<a name="gbab-2830"></a><span class="cp">   (PNG_FORMAT_FLAG_LINEAR|PNG_FORMAT_FLAG_COLOR|PNG_FORMAT_FLAG_ALPHA)</span>
<a name="gbab-2831"></a>
<a name="gbab-2832"></a><span class="cm">/* With color-mapped formats the image data is one byte for each pixel, the byte</span>
<a name="gbab-2833"></a><span class="cm"> * is an index into the color-map which is formatted as above.  To obtain a</span>
<a name="gbab-2834"></a><span class="cm"> * color-mapped format it is sufficient just to add the PNG_FOMAT_FLAG_COLORMAP</span>
<a name="gbab-2835"></a><span class="cm"> * to one of the above definitions, or you can use one of the definitions below.</span>
<a name="gbab-2836"></a><span class="cm"> */</span>
<a name="gbab-2837"></a><span class="cp">#define PNG_FORMAT_RGB_COLORMAP  (PNG_FORMAT_RGB|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2838"></a><span class="cp">#define PNG_FORMAT_BGR_COLORMAP  (PNG_FORMAT_BGR|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2839"></a><span class="cp">#define PNG_FORMAT_RGBA_COLORMAP (PNG_FORMAT_RGBA|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2840"></a><span class="cp">#define PNG_FORMAT_ARGB_COLORMAP (PNG_FORMAT_ARGB|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2841"></a><span class="cp">#define PNG_FORMAT_BGRA_COLORMAP (PNG_FORMAT_BGRA|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2842"></a><span class="cp">#define PNG_FORMAT_ABGR_COLORMAP (PNG_FORMAT_ABGR|PNG_FORMAT_FLAG_COLORMAP)</span>
<a name="gbab-2843"></a>
<a name="gbab-2844"></a><span class="cm">/* PNG_IMAGE macros</span>
<a name="gbab-2845"></a><span class="cm"> *</span>
<a name="gbab-2846"></a><span class="cm"> * These are convenience macros to derive information from a png_image</span>
<a name="gbab-2847"></a><span class="cm"> * structure.  The PNG_IMAGE_SAMPLE_ macros return values appropriate to the</span>
<a name="gbab-2848"></a><span class="cm"> * actual image sample values - either the entries in the color-map or the</span>
<a name="gbab-2849"></a><span class="cm"> * pixels in the image.  The PNG_IMAGE_PIXEL_ macros return corresponding values</span>
<a name="gbab-2850"></a><span class="cm"> * for the pixels and will always return 1 for color-mapped formats.  The</span>
<a name="gbab-2851"></a><span class="cm"> * remaining macros return information about the rows in the image and the</span>
<a name="gbab-2852"></a><span class="cm"> * complete image.</span>
<a name="gbab-2853"></a><span class="cm"> *</span>
<a name="gbab-2854"></a><span class="cm"> * NOTE: All the macros that take a png_image::format parameter are compile time</span>
<a name="gbab-2855"></a><span class="cm"> * constants if the format parameter is, itself, a constant.  Therefore these</span>
<a name="gbab-2856"></a><span class="cm"> * macros can be used in array declarations and case labels where required.</span>
<a name="gbab-2857"></a><span class="cm"> * Similarly the macros are also pre-processor constants (sizeof is not used) so</span>
<a name="gbab-2858"></a><span class="cm"> * they can be used in #if tests.</span>
<a name="gbab-2859"></a><span class="cm"> *</span>
<a name="gbab-2860"></a><span class="cm"> * First the information about the samples.</span>
<a name="gbab-2861"></a><span class="cm"> */</span>
<a name="gbab-2862"></a><span class="cp">#define PNG_IMAGE_SAMPLE_CHANNELS(fmt)\</span>
<a name="gbab-2863"></a><span class="cp">   (((fmt)&amp;(PNG_FORMAT_FLAG_COLOR|PNG_FORMAT_FLAG_ALPHA))+1)</span>
<a name="gbab-2864"></a>   <span class="cm">/* Return the total number of channels in a given format: 1..4 */</span>
<a name="gbab-2865"></a>
<a name="gbab-2866"></a><span class="cp">#define PNG_IMAGE_SAMPLE_COMPONENT_SIZE(fmt)\</span>
<a name="gbab-2867"></a><span class="cp">   ((((fmt) &amp; PNG_FORMAT_FLAG_LINEAR) &gt;&gt; 2)+1)</span>
<a name="gbab-2868"></a>   <span class="cm">/* Return the size in bytes of a single component of a pixel or color-map</span>
<a name="gbab-2869"></a><span class="cm">    * entry (as appropriate) in the image: 1 or 2.</span>
<a name="gbab-2870"></a><span class="cm">    */</span>
<a name="gbab-2871"></a>
<a name="gbab-2872"></a><span class="cp">#define PNG_IMAGE_SAMPLE_SIZE(fmt)\</span>
<a name="gbab-2873"></a><span class="cp">   (PNG_IMAGE_SAMPLE_CHANNELS(fmt) * PNG_IMAGE_SAMPLE_COMPONENT_SIZE(fmt))</span>
<a name="gbab-2874"></a>   <span class="cm">/* This is the size of the sample data for one sample.  If the image is</span>
<a name="gbab-2875"></a><span class="cm">    * color-mapped it is the size of one color-map entry (and image pixels are</span>
<a name="gbab-2876"></a><span class="cm">    * one byte in size), otherwise it is the size of one image pixel.</span>
<a name="gbab-2877"></a><span class="cm">    */</span>
<a name="gbab-2878"></a>
<a name="gbab-2879"></a><span class="cp">#define PNG_IMAGE_MAXIMUM_COLORMAP_COMPONENTS(fmt)\</span>
<a name="gbab-2880"></a><span class="cp">   (PNG_IMAGE_SAMPLE_CHANNELS(fmt) * 256)</span>
<a name="gbab-2881"></a>   <span class="cm">/* The maximum size of the color-map required by the format expressed in a</span>
<a name="gbab-2882"></a><span class="cm">    * count of components.  This can be used to compile-time allocate a</span>
<a name="gbab-2883"></a><span class="cm">    * color-map:</span>
<a name="gbab-2884"></a><span class="cm">    *</span>
<a name="gbab-2885"></a><span class="cm">    * png_uint_16 colormap[PNG_IMAGE_MAXIMUM_COLORMAP_COMPONENTS(linear_fmt)];</span>
<a name="gbab-2886"></a><span class="cm">    *</span>
<a name="gbab-2887"></a><span class="cm">    * png_byte colormap[PNG_IMAGE_MAXIMUM_COLORMAP_COMPONENTS(sRGB_fmt)];</span>
<a name="gbab-2888"></a><span class="cm">    *</span>
<a name="gbab-2889"></a><span class="cm">    * Alternatively use the PNG_IMAGE_COLORMAP_SIZE macro below to use the</span>
<a name="gbab-2890"></a><span class="cm">    * information from one of the png_image_begin_read_ APIs and dynamically</span>
<a name="gbab-2891"></a><span class="cm">    * allocate the required memory.</span>
<a name="gbab-2892"></a><span class="cm">    */</span>
<a name="gbab-2893"></a>
<a name="gbab-2894"></a><span class="cm">/* Corresponding information about the pixels */</span>
<a name="gbab-2895"></a><span class="cp">#define PNG_IMAGE_PIXEL_(test,fmt)\</span>
<a name="gbab-2896"></a><span class="cp">   (((fmt)&amp;PNG_FORMAT_FLAG_COLORMAP)?1:test(fmt))</span>
<a name="gbab-2897"></a>
<a name="gbab-2898"></a><span class="cp">#define PNG_IMAGE_PIXEL_CHANNELS(fmt)\</span>
<a name="gbab-2899"></a><span class="cp">   PNG_IMAGE_PIXEL_(PNG_IMAGE_SAMPLE_CHANNELS,fmt)</span>
<a name="gbab-2900"></a>   <span class="cm">/* The number of separate channels (components) in a pixel; 1 for a</span>
<a name="gbab-2901"></a><span class="cm">    * color-mapped image.</span>
<a name="gbab-2902"></a><span class="cm">    */</span>
<a name="gbab-2903"></a>
<a name="gbab-2904"></a><span class="cp">#define PNG_IMAGE_PIXEL_COMPONENT_SIZE(fmt)\</span>
<a name="gbab-2905"></a><span class="cp">   PNG_IMAGE_PIXEL_(PNG_IMAGE_SAMPLE_COMPONENT_SIZE,fmt)</span>
<a name="gbab-2906"></a>   <span class="cm">/* The size, in bytes, of each component in a pixel; 1 for a color-mapped</span>
<a name="gbab-2907"></a><span class="cm">    * image.</span>
<a name="gbab-2908"></a><span class="cm">    */</span>
<a name="gbab-2909"></a>
<a name="gbab-2910"></a><span class="cp">#define PNG_IMAGE_PIXEL_SIZE(fmt) PNG_IMAGE_PIXEL_(PNG_IMAGE_SAMPLE_SIZE,fmt)</span>
<a name="gbab-2911"></a>   <span class="cm">/* The size, in bytes, of a complete pixel; 1 for a color-mapped image. */</span>
<a name="gbab-2912"></a>
<a name="gbab-2913"></a><span class="cm">/* Information about the whole row, or whole image */</span>
<a name="gbab-2914"></a><span class="cp">#define PNG_IMAGE_ROW_STRIDE(image)\</span>
<a name="gbab-2915"></a><span class="cp">   (PNG_IMAGE_PIXEL_CHANNELS((image).format) * (image).width)</span>
<a name="gbab-2916"></a>   <span class="cm">/* Return the total number of components in a single row of the image; this</span>
<a name="gbab-2917"></a><span class="cm">    * is the minimum &#39;row stride&#39;, the minimum count of components between each</span>
<a name="gbab-2918"></a><span class="cm">    * row.  For a color-mapped image this is the minimum number of bytes in a</span>
<a name="gbab-2919"></a><span class="cm">    * row.</span>
<a name="gbab-2920"></a><span class="cm">    *</span>
<a name="gbab-2921"></a><span class="cm">    * WARNING: this macro overflows for some images with more than one component</span>
<a name="gbab-2922"></a><span class="cm">    * and very large image widths.  libpng will refuse to process an image where</span>
<a name="gbab-2923"></a><span class="cm">    * this macro would overflow.</span>
<a name="gbab-2924"></a><span class="cm">    */</span>
<a name="gbab-2925"></a>
<a name="gbab-2926"></a><span class="cp">#define PNG_IMAGE_BUFFER_SIZE(image, row_stride)\</span>
<a name="gbab-2927"></a><span class="cp">   (PNG_IMAGE_PIXEL_COMPONENT_SIZE((image).format)*(image).height*(row_stride))</span>
<a name="gbab-2928"></a>   <span class="cm">/* Return the size, in bytes, of an image buffer given a png_image and a row</span>
<a name="gbab-2929"></a><span class="cm">    * stride - the number of components to leave space for in each row.</span>
<a name="gbab-2930"></a><span class="cm">    *</span>
<a name="gbab-2931"></a><span class="cm">    * WARNING: this macro overflows a 32-bit integer for some large PNG images,</span>
<a name="gbab-2932"></a><span class="cm">    * libpng will refuse to process an image where such an overflow would occur.</span>
<a name="gbab-2933"></a><span class="cm">    */</span>
<a name="gbab-2934"></a>
<a name="gbab-2935"></a><span class="cp">#define PNG_IMAGE_SIZE(image)\</span>
<a name="gbab-2936"></a><span class="cp">   PNG_IMAGE_BUFFER_SIZE(image, PNG_IMAGE_ROW_STRIDE(image))</span>
<a name="gbab-2937"></a>   <span class="cm">/* Return the size, in bytes, of the image in memory given just a png_image;</span>
<a name="gbab-2938"></a><span class="cm">    * the row stride is the minimum stride required for the image.</span>
<a name="gbab-2939"></a><span class="cm">    */</span>
<a name="gbab-2940"></a>
<a name="gbab-2941"></a><span class="cp">#define PNG_IMAGE_COLORMAP_SIZE(image)\</span>
<a name="gbab-2942"></a><span class="cp">   (PNG_IMAGE_SAMPLE_SIZE((image).format) * (image).colormap_entries)</span>
<a name="gbab-2943"></a>   <span class="cm">/* Return the size, in bytes, of the color-map of this image.  If the image</span>
<a name="gbab-2944"></a><span class="cm">    * format is not a color-map format this will return a size sufficient for</span>
<a name="gbab-2945"></a><span class="cm">    * 256 entries in the given format; check PNG_FORMAT_FLAG_COLORMAP if</span>
<a name="gbab-2946"></a><span class="cm">    * you don&#39;t want to allocate a color-map in this case.</span>
<a name="gbab-2947"></a><span class="cm">    */</span>
<a name="gbab-2948"></a>
<a name="gbab-2949"></a><span class="cm">/* PNG_IMAGE_FLAG_*</span>
<a name="gbab-2950"></a><span class="cm"> *</span>
<a name="gbab-2951"></a><span class="cm"> * Flags containing additional information about the image are held in the</span>
<a name="gbab-2952"></a><span class="cm"> * &#39;flags&#39; field of png_image.</span>
<a name="gbab-2953"></a><span class="cm"> */</span>
<a name="gbab-2954"></a><span class="cp">#define PNG_IMAGE_FLAG_COLORSPACE_NOT_sRGB 0x01</span>
<a name="gbab-2955"></a>   <span class="cm">/* This indicates the the RGB values of the in-memory bitmap do not</span>
<a name="gbab-2956"></a><span class="cm">    * correspond to the red, green and blue end-points defined by sRGB.</span>
<a name="gbab-2957"></a><span class="cm">    */</span>
<a name="gbab-2958"></a>
<a name="gbab-2959"></a><span class="cp">#define PNG_IMAGE_FLAG_FAST 0x02</span>
<a name="gbab-2960"></a>   <span class="cm">/* On write emphasise speed over compression; the resultant PNG file will be</span>
<a name="gbab-2961"></a><span class="cm">    * larger but will be produced significantly faster, particular for large</span>
<a name="gbab-2962"></a><span class="cm">    * images.  Do not use this option for images which will be distributed, only</span>
<a name="gbab-2963"></a><span class="cm">    * used it when producing intermediate files that will be read back in</span>
<a name="gbab-2964"></a><span class="cm">    * repeatedly.  For a typical 24-bit image the option will double the read</span>
<a name="gbab-2965"></a><span class="cm">    * speed at the cost of increasing the image size by 25%, however for many</span>
<a name="gbab-2966"></a><span class="cm">    * more compressible images the PNG file can be 10 times larger with only a</span>
<a name="gbab-2967"></a><span class="cm">    * slight speed gain.</span>
<a name="gbab-2968"></a><span class="cm">    */</span>
<a name="gbab-2969"></a>
<a name="gbab-2970"></a><span class="cp">#define PNG_IMAGE_FLAG_16BIT_sRGB 0x04</span>
<a name="gbab-2971"></a>   <span class="cm">/* On read if the image is a 16-bit per component image and there is no gAMA</span>
<a name="gbab-2972"></a><span class="cm">    * or sRGB chunk assume that the components are sRGB encoded.  Notice that</span>
<a name="gbab-2973"></a><span class="cm">    * images output by the simplified API always have gamma information; setting</span>
<a name="gbab-2974"></a><span class="cm">    * this flag only affects the interpretation of 16-bit images from an</span>
<a name="gbab-2975"></a><span class="cm">    * external source.  It is recommended that the application expose this flag</span>
<a name="gbab-2976"></a><span class="cm">    * to the user; the user can normally easily recognize the difference between</span>
<a name="gbab-2977"></a><span class="cm">    * linear and sRGB encoding.  This flag has no effect on write - the data</span>
<a name="gbab-2978"></a><span class="cm">    * passed to the write APIs must have the correct encoding (as defined</span>
<a name="gbab-2979"></a><span class="cm">    * above.)</span>
<a name="gbab-2980"></a><span class="cm">    *</span>
<a name="gbab-2981"></a><span class="cm">    * If the flag is not set (the default) input 16-bit per component data is</span>
<a name="gbab-2982"></a><span class="cm">    * assumed to be linear.</span>
<a name="gbab-2983"></a><span class="cm">    *</span>
<a name="gbab-2984"></a><span class="cm">    * NOTE: the flag can only be set after the png_image_begin_read_ call,</span>
<a name="gbab-2985"></a><span class="cm">    * because that call initializes the &#39;flags&#39; field.</span>
<a name="gbab-2986"></a><span class="cm">    */</span>
<a name="gbab-2987"></a>
<a name="gbab-2988"></a><span class="cp">#ifdef PNG_SIMPLIFIED_READ_SUPPORTED</span>
<a name="gbab-2989"></a><span class="cm">/* READ APIs</span>
<a name="gbab-2990"></a><span class="cm"> * ---------</span>
<a name="gbab-2991"></a><span class="cm"> *</span>
<a name="gbab-2992"></a><span class="cm"> * The png_image passed to the read APIs must have been initialized by setting</span>
<a name="gbab-2993"></a><span class="cm"> * the png_controlp field &#39;opaque&#39; to NULL (or, safer, memset the whole thing.)</span>
<a name="gbab-2994"></a><span class="cm"> */</span>
<a name="gbab-2995"></a><span class="cp">#ifdef PNG_STDIO_SUPPORTED</span>
<a name="gbab-2996"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">234</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_begin_read_from_file</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span>
<a name="gbab-2997"></a>   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file_name</span><span class="p">));</span>
<a name="gbab-2998"></a>   <span class="cm">/* The named file is opened for read and the image header is filled in</span>
<a name="gbab-2999"></a><span class="cm">    * from the PNG header in the file.</span>
<a name="gbab-3000"></a><span class="cm">    */</span>
<a name="gbab-3001"></a>
<a name="gbab-3002"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_begin_read_from_stdio</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span>
<a name="gbab-3003"></a>   <span class="kt">FILE</span><span class="o">*</span> <span class="n">file</span><span class="p">));</span>
<a name="gbab-3004"></a>   <span class="cm">/* The PNG header is read from the stdio FILE object. */</span>
<a name="gbab-3005"></a><span class="cp">#endif </span><span class="cm">/* STDIO */</span><span class="cp"></span>
<a name="gbab-3006"></a>
<a name="gbab-3007"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">236</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_begin_read_from_memory</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span>
<a name="gbab-3008"></a>   <span class="n">png_const_voidp</span> <span class="n">memory</span><span class="p">,</span> <span class="n">png_size_t</span> <span class="n">size</span><span class="p">));</span>
<a name="gbab-3009"></a>   <span class="cm">/* The PNG header is read from the given memory buffer. */</span>
<a name="gbab-3010"></a>
<a name="gbab-3011"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">237</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_finish_read</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span>
<a name="gbab-3012"></a>   <span class="n">png_const_colorp</span> <span class="n">background</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">row_stride</span><span class="p">,</span>
<a name="gbab-3013"></a>   <span class="kt">void</span> <span class="o">*</span><span class="n">colormap</span><span class="p">));</span>
<a name="gbab-3014"></a>   <span class="cm">/* Finish reading the image into the supplied buffer and clean up the</span>
<a name="gbab-3015"></a><span class="cm">    * png_image structure.</span>
<a name="gbab-3016"></a><span class="cm">    *</span>
<a name="gbab-3017"></a><span class="cm">    * row_stride is the step, in byte or 2-byte units as appropriate,</span>
<a name="gbab-3018"></a><span class="cm">    * between adjacent rows.  A positive stride indicates that the top-most row</span>
<a name="gbab-3019"></a><span class="cm">    * is first in the buffer - the normal top-down arrangement.  A negative</span>
<a name="gbab-3020"></a><span class="cm">    * stride indicates that the bottom-most row is first in the buffer.</span>
<a name="gbab-3021"></a><span class="cm">    *</span>
<a name="gbab-3022"></a><span class="cm">    * background need only be supplied if an alpha channel must be removed from</span>
<a name="gbab-3023"></a><span class="cm">    * a png_byte format and the removal is to be done by compositing on a solid</span>
<a name="gbab-3024"></a><span class="cm">    * color; otherwise it may be NULL and any composition will be done directly</span>
<a name="gbab-3025"></a><span class="cm">    * onto the buffer.  The value is an sRGB color to use for the background,</span>
<a name="gbab-3026"></a><span class="cm">    * for grayscale output the green channel is used.</span>
<a name="gbab-3027"></a><span class="cm">    *</span>
<a name="gbab-3028"></a><span class="cm">    * background must be supplied when an alpha channel must be removed from a</span>
<a name="gbab-3029"></a><span class="cm">    * single byte color-mapped output format, in other words if:</span>
<a name="gbab-3030"></a><span class="cm">    *</span>
<a name="gbab-3031"></a><span class="cm">    * 1) The original format from png_image_begin_read_from_* had</span>
<a name="gbab-3032"></a><span class="cm">    *    PNG_FORMAT_FLAG_ALPHA set.</span>
<a name="gbab-3033"></a><span class="cm">    * 2) The format set by the application does not.</span>
<a name="gbab-3034"></a><span class="cm">    * 3) The format set by the application has PNG_FORMAT_FLAG_COLORMAP set and</span>
<a name="gbab-3035"></a><span class="cm">    *    PNG_FORMAT_FLAG_LINEAR *not* set.</span>
<a name="gbab-3036"></a><span class="cm">    *</span>
<a name="gbab-3037"></a><span class="cm">    * For linear output removing the alpha channel is always done by compositing</span>
<a name="gbab-3038"></a><span class="cm">    * on black and background is ignored.</span>
<a name="gbab-3039"></a><span class="cm">    *</span>
<a name="gbab-3040"></a><span class="cm">    * colormap must be supplied when PNG_FORMAT_FLAG_COLORMAP is set.  It must</span>
<a name="gbab-3041"></a><span class="cm">    * be at least the size (in bytes) returned by PNG_IMAGE_COLORMAP_SIZE.</span>
<a name="gbab-3042"></a><span class="cm">    * image-&gt;colormap_entries will be updated to the actual number of entries</span>
<a name="gbab-3043"></a><span class="cm">    * written to the colormap; this may be less than the original value.</span>
<a name="gbab-3044"></a><span class="cm">    */</span>
<a name="gbab-3045"></a>
<a name="gbab-3046"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">238</span><span class="p">,</span> <span class="kt">void</span><span class="p">,</span> <span class="n">png_image_free</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">));</span>
<a name="gbab-3047"></a>   <span class="cm">/* Free any data allocated by libpng in image-&gt;opaque, setting the pointer to</span>
<a name="gbab-3048"></a><span class="cm">    * NULL.  May be called at any time after the structure is initialized.</span>
<a name="gbab-3049"></a><span class="cm">    */</span>
<a name="gbab-3050"></a><span class="cp">#endif </span><span class="cm">/* SIMPLIFIED_READ */</span><span class="cp"></span>
<a name="gbab-3051"></a>
<a name="gbab-3052"></a><span class="cp">#ifdef PNG_SIMPLIFIED_WRITE_SUPPORTED</span>
<a name="gbab-3053"></a><span class="cm">/* WRITE APIS</span>
<a name="gbab-3054"></a><span class="cm"> * ----------</span>
<a name="gbab-3055"></a><span class="cm"> * For write you must initialize a png_image structure to describe the image to</span>
<a name="gbab-3056"></a><span class="cm"> * be written.  To do this use memset to set the whole structure to 0 then</span>
<a name="gbab-3057"></a><span class="cm"> * initialize fields describing your image.</span>
<a name="gbab-3058"></a><span class="cm"> *</span>
<a name="gbab-3059"></a><span class="cm"> * version: must be set to PNG_IMAGE_VERSION</span>
<a name="gbab-3060"></a><span class="cm"> * opaque: must be initialized to NULL</span>
<a name="gbab-3061"></a><span class="cm"> * width: image width in pixels</span>
<a name="gbab-3062"></a><span class="cm"> * height: image height in rows</span>
<a name="gbab-3063"></a><span class="cm"> * format: the format of the data (image and color-map) you wish to write</span>
<a name="gbab-3064"></a><span class="cm"> * flags: set to 0 unless one of the defined flags applies; set</span>
<a name="gbab-3065"></a><span class="cm"> *    PNG_IMAGE_FLAG_COLORSPACE_NOT_sRGB for color format images where the RGB</span>
<a name="gbab-3066"></a><span class="cm"> *    values do not correspond to the colors in sRGB.</span>
<a name="gbab-3067"></a><span class="cm"> * colormap_entries: set to the number of entries in the color-map (0 to 256)</span>
<a name="gbab-3068"></a><span class="cm"> */</span>
<a name="gbab-3069"></a><span class="cp">#ifdef PNG_SIMPLIFIED_WRITE_STDIO_SUPPORTED</span>
<a name="gbab-3070"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">239</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_write_to_file</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span>
<a name="gbab-3071"></a>   <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">int</span> <span class="n">convert_to_8bit</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
<a name="gbab-3072"></a>   <span class="n">png_int_32</span> <span class="n">row_stride</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">colormap</span><span class="p">));</span>
<a name="gbab-3073"></a>   <span class="cm">/* Write the image to the named file. */</span>
<a name="gbab-3074"></a>
<a name="gbab-3075"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_write_to_stdio</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span>
<a name="gbab-3076"></a>   <span class="kt">int</span> <span class="n">convert_to_8_bit</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">row_stride</span><span class="p">,</span>
<a name="gbab-3077"></a>   <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">colormap</span><span class="p">));</span>
<a name="gbab-3078"></a>   <span class="cm">/* Write the image to the given (FILE*). */</span>
<a name="gbab-3079"></a><span class="cp">#endif </span><span class="cm">/* SIMPLIFIED_WRITE_STDIO */</span><span class="cp"></span>
<a name="gbab-3080"></a>
<a name="gbab-3081"></a><span class="cm">/* With all write APIs if image is in one of the linear formats with 16-bit</span>
<a name="gbab-3082"></a><span class="cm"> * data then setting convert_to_8_bit will cause the output to be an 8-bit PNG</span>
<a name="gbab-3083"></a><span class="cm"> * gamma encoded according to the sRGB specification, otherwise a 16-bit linear</span>
<a name="gbab-3084"></a><span class="cm"> * encoded PNG file is written.</span>
<a name="gbab-3085"></a><span class="cm"> *</span>
<a name="gbab-3086"></a><span class="cm"> * With color-mapped data formats the colormap parameter point to a color-map</span>
<a name="gbab-3087"></a><span class="cm"> * with at least image-&gt;colormap_entries encoded in the specified format.  If</span>
<a name="gbab-3088"></a><span class="cm"> * the format is linear the written PNG color-map will be converted to sRGB</span>
<a name="gbab-3089"></a><span class="cm"> * regardless of the convert_to_8_bit flag.</span>
<a name="gbab-3090"></a><span class="cm"> *</span>
<a name="gbab-3091"></a><span class="cm"> * With all APIs row_stride is handled as in the read APIs - it is the spacing</span>
<a name="gbab-3092"></a><span class="cm"> * from one row to the next in component sized units (1 or 2 bytes) and if</span>
<a name="gbab-3093"></a><span class="cm"> * negative indicates a bottom-up row layout in the buffer.  If row_stride is</span>
<a name="gbab-3094"></a><span class="cm"> * zero, libpng will calculate it for you from the image width and number of</span>
<a name="gbab-3095"></a><span class="cm"> * channels.</span>
<a name="gbab-3096"></a><span class="cm"> *</span>
<a name="gbab-3097"></a><span class="cm"> * Note that the write API does not support interlacing, sub-8-bit pixels or</span>
<a name="gbab-3098"></a><span class="cm"> * most ancillary chunks.  If you need to write text chunks (e.g. for copyright</span>
<a name="gbab-3099"></a><span class="cm"> * notices) you need to use one of the other APIs.</span>
<a name="gbab-3100"></a><span class="cm"> */</span>
<a name="gbab-3101"></a>
<a name="gbab-3102"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_image_write_to_memory</span><span class="p">,</span> <span class="p">(</span><span class="n">png_imagep</span> <span class="n">image</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">memory</span><span class="p">,</span>
<a name="gbab-3103"></a>   <span class="n">png_alloc_size_t</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">memory_bytes</span><span class="p">,</span> <span class="kt">int</span> <span class="n">convert_to_8_bit</span><span class="p">,</span>
<a name="gbab-3104"></a>   <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="n">png_int_32</span> <span class="n">row_stride</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">colormap</span><span class="p">));</span>
<a name="gbab-3105"></a>   <span class="cm">/* Write the image to the given memory buffer.  The function both writes the</span>
<a name="gbab-3106"></a><span class="cm">    * whole PNG data stream to *memory and updates *memory_bytes with the count</span>
<a name="gbab-3107"></a><span class="cm">    * of bytes written.</span>
<a name="gbab-3108"></a><span class="cm">    *</span>
<a name="gbab-3109"></a><span class="cm">    * &#39;memory&#39; may be NULL.  In this case *memory_bytes is not read however on</span>
<a name="gbab-3110"></a><span class="cm">    * success the number of bytes which would have been written will still be</span>
<a name="gbab-3111"></a><span class="cm">    * stored in *memory_bytes.  On failure *memory_bytes will contain 0.</span>
<a name="gbab-3112"></a><span class="cm">    *</span>
<a name="gbab-3113"></a><span class="cm">    * If &#39;memory&#39; is not NULL it must point to memory[*memory_bytes] of</span>
<a name="gbab-3114"></a><span class="cm">    * writeable memory.</span>
<a name="gbab-3115"></a><span class="cm">    *</span>
<a name="gbab-3116"></a><span class="cm">    * If the function returns success memory[*memory_bytes] (if &#39;memory&#39; is not</span>
<a name="gbab-3117"></a><span class="cm">    * NULL) contains the written PNG data.  *memory_bytes will always be less</span>
<a name="gbab-3118"></a><span class="cm">    * than or equal to the original value.</span>
<a name="gbab-3119"></a><span class="cm">    *</span>
<a name="gbab-3120"></a><span class="cm">    * If the function returns false and *memory_bytes was not changed an error</span>
<a name="gbab-3121"></a><span class="cm">    * occured during write.  If *memory_bytes was changed, or is not 0 if</span>
<a name="gbab-3122"></a><span class="cm">    * &#39;memory&#39; was NULL, the write would have succeeded but for the memory</span>
<a name="gbab-3123"></a><span class="cm">    * buffer being too small.  *memory_bytes contains the required number of</span>
<a name="gbab-3124"></a><span class="cm">    * bytes and will be bigger that the original value.</span>
<a name="gbab-3125"></a><span class="cm">    */</span>
<a name="gbab-3126"></a>
<a name="gbab-3127"></a><span class="cp">#define png_image_write_get_memory_size(image, size, convert_to_8_bit, buffer,\</span>
<a name="gbab-3128"></a><span class="cp">   row_stride, colormap)\</span>
<a name="gbab-3129"></a><span class="cp">   png_image_write_to_memory(&amp;(image), 0, &amp;(size), convert_to_8_bit, buffer,\</span>
<a name="gbab-3130"></a><span class="cp">         row_stride, colormap)</span>
<a name="gbab-3131"></a>   <span class="cm">/* Return the amount of memory in &#39;size&#39; required to compress this image.</span>
<a name="gbab-3132"></a><span class="cm">    * The png_image structure &#39;image&#39; must be filled in as in the above</span>
<a name="gbab-3133"></a><span class="cm">    * function and must not be changed before the actual write call, the buffer</span>
<a name="gbab-3134"></a><span class="cm">    * and all other parameters must also be identical to that in the final</span>
<a name="gbab-3135"></a><span class="cm">    * write call.  The &#39;size&#39; variable need not be initialized.</span>
<a name="gbab-3136"></a><span class="cm">    *</span>
<a name="gbab-3137"></a><span class="cm">    * NOTE: the macro returns true/false, if false is returned &#39;size&#39; will be</span>
<a name="gbab-3138"></a><span class="cm">    * set to zero and the write failed and probably will fail if tried again.</span>
<a name="gbab-3139"></a><span class="cm">    */</span>
<a name="gbab-3140"></a>
<a name="gbab-3141"></a><span class="cm">/* You can pre-allocate the buffer by making sure it is of sufficient size</span>
<a name="gbab-3142"></a><span class="cm"> * regardless of the amount of compression achieved.  The buffer size will</span>
<a name="gbab-3143"></a><span class="cm"> * always be bigger than the original image and it will never be filled.  The</span>
<a name="gbab-3144"></a><span class="cm"> * following macros are provided to assist in allocating the buffer.</span>
<a name="gbab-3145"></a><span class="cm"> */</span>
<a name="gbab-3146"></a><span class="cp">#define PNG_IMAGE_DATA_SIZE(image) (PNG_IMAGE_SIZE(image)+(image).height)</span>
<a name="gbab-3147"></a>   <span class="cm">/* The number of uncompressed bytes in the PNG byte encoding of the image;</span>
<a name="gbab-3148"></a><span class="cm">    * uncompressing the PNG IDAT data will give this number of bytes.</span>
<a name="gbab-3149"></a><span class="cm">    *</span>
<a name="gbab-3150"></a><span class="cm">    * NOTE: while PNG_IMAGE_SIZE cannot overflow for an image in memory this</span>
<a name="gbab-3151"></a><span class="cm">    * macro can because of the extra bytes used in the PNG byte encoding.  You</span>
<a name="gbab-3152"></a><span class="cm">    * need to avoid this macro if your image size approaches 2^30 in width or</span>
<a name="gbab-3153"></a><span class="cm">    * height.  The same goes for the remainder of these macros; they all produce</span>
<a name="gbab-3154"></a><span class="cm">    * bigger numbers than the actual in-memory image size.</span>
<a name="gbab-3155"></a><span class="cm">    */</span>
<a name="gbab-3156"></a><span class="cp">#ifndef PNG_ZLIB_MAX_SIZE</span>
<a name="gbab-3157"></a><span class="cp">#  define PNG_ZLIB_MAX_SIZE(b) ((b)+(((b)+7U)&gt;&gt;3)+(((b)+63U)&gt;&gt;6)+11U)</span>
<a name="gbab-3158"></a>   <span class="cm">/* An upper bound on the number of compressed bytes given &#39;b&#39; uncompressed</span>
<a name="gbab-3159"></a><span class="cm">    * bytes.  This is based on deflateBounds() in zlib; different</span>
<a name="gbab-3160"></a><span class="cm">    * implementations of zlib compression may conceivably produce more data so</span>
<a name="gbab-3161"></a><span class="cm">    * if your zlib implementation is not zlib itself redefine this macro</span>
<a name="gbab-3162"></a><span class="cm">    * appropriately.</span>
<a name="gbab-3163"></a><span class="cm">    */</span>
<a name="gbab-3164"></a><span class="cp">#endif</span>
<a name="gbab-3165"></a>
<a name="gbab-3166"></a><span class="cp">#define PNG_IMAGE_COMPRESSED_SIZE_MAX(image)\</span>
<a name="gbab-3167"></a><span class="cp">   PNG_ZLIB_MAX_SIZE((png_alloc_size_t)PNG_IMAGE_DATA_SIZE(image))</span>
<a name="gbab-3168"></a>   <span class="cm">/* An upper bound on the size of the data in the PNG IDAT chunks. */</span>
<a name="gbab-3169"></a>
<a name="gbab-3170"></a><span class="cp">#define PNG_IMAGE_PNG_SIZE_MAX_(image, image_size)\</span>
<a name="gbab-3171"></a><span class="cp">   ((8U</span><span class="cm">/*sig*/</span><span class="cp">+25U</span><span class="cm">/*IHDR*/</span><span class="cp">+16U</span><span class="cm">/*gAMA*/</span><span class="cp">+44U</span><span class="cm">/*cHRM*/</span><span class="cp">+12U</span><span class="cm">/*IEND*/</span><span class="cp">+\</span>
<a name="gbab-3172"></a><span class="cp">    (((image).format&amp;PNG_FORMAT_FLAG_COLORMAP)?</span><span class="cm">/*colormap: PLTE, tRNS*/</span><span class="cp">\</span>
<a name="gbab-3173"></a><span class="cp">     12U+3U*(image).colormap_entries</span><span class="cm">/*PLTE data*/</span><span class="cp">+\</span>
<a name="gbab-3174"></a><span class="cp">     (((image).format&amp;PNG_FORMAT_FLAG_ALPHA)?\</span>
<a name="gbab-3175"></a><span class="cp">      12U</span><span class="cm">/*tRNS*/</span><span class="cp">+(image).colormap_entries:0U):0U)+\</span>
<a name="gbab-3176"></a><span class="cp">    12U)+(12U*((image_size)/PNG_ZBUF_SIZE))</span><span class="cm">/*IDAT*/</span><span class="cp">+(image_size))</span>
<a name="gbab-3177"></a>   <span class="cm">/* A helper for the following macro; if your compiler cannot handle the</span>
<a name="gbab-3178"></a><span class="cm">    * following macro use this one with the result of</span>
<a name="gbab-3179"></a><span class="cm">    * PNG_IMAGE_COMPRESSED_SIZE_MAX(image) as the second argument (most</span>
<a name="gbab-3180"></a><span class="cm">    * compilers should handle this just fine.)</span>
<a name="gbab-3181"></a><span class="cm">    */</span>
<a name="gbab-3182"></a>
<a name="gbab-3183"></a><span class="cp">#define PNG_IMAGE_PNG_SIZE_MAX(image)\</span>
<a name="gbab-3184"></a><span class="cp">   PNG_IMAGE_PNG_SIZE_MAX_(image, PNG_IMAGE_COMPRESSED_SIZE_MAX(image))</span>
<a name="gbab-3185"></a>   <span class="cm">/* An upper bound on the total length of the PNG data stream for &#39;image&#39;.</span>
<a name="gbab-3186"></a><span class="cm">    * The result is of type png_alloc_size_t, on 32-bit systems this may</span>
<a name="gbab-3187"></a><span class="cm">    * overflow even though PNG_IMAGE_DATA_SIZE does not overflow; the write will</span>
<a name="gbab-3188"></a><span class="cm">    * run out of buffer space but return a corrected size which should work.</span>
<a name="gbab-3189"></a><span class="cm">    */</span>
<a name="gbab-3190"></a><span class="cp">#endif </span><span class="cm">/* SIMPLIFIED_WRITE */</span><span class="cp"></span>
<a name="gbab-3191"></a><span class="cm">/*******************************************************************************</span>
<a name="gbab-3192"></a><span class="cm"> *  END OF SIMPLIFIED API</span>
<a name="gbab-3193"></a><span class="cm"> ******************************************************************************/</span>
<a name="gbab-3194"></a><span class="cp">#endif </span><span class="cm">/* SIMPLIFIED_{READ|WRITE} */</span><span class="cp"></span>
<a name="gbab-3195"></a>
<a name="gbab-3196"></a><span class="cm">/*******************************************************************************</span>
<a name="gbab-3197"></a><span class="cm"> * Section 6: IMPLEMENTATION OPTIONS</span>
<a name="gbab-3198"></a><span class="cm"> *******************************************************************************</span>
<a name="gbab-3199"></a><span class="cm"> *</span>
<a name="gbab-3200"></a><span class="cm"> * Support for arbitrary implementation-specific optimizations.  The API allows</span>
<a name="gbab-3201"></a><span class="cm"> * particular options to be turned on or off.  &#39;Option&#39; is the number of the</span>
<a name="gbab-3202"></a><span class="cm"> * option and &#39;onoff&#39; is 0 (off) or non-0 (on).  The value returned is given</span>
<a name="gbab-3203"></a><span class="cm"> * by the PNG_OPTION_ defines below.</span>
<a name="gbab-3204"></a><span class="cm"> *</span>
<a name="gbab-3205"></a><span class="cm"> * HARDWARE: normally hardware capabilites, such as the Intel SSE instructions,</span>
<a name="gbab-3206"></a><span class="cm"> *           are detected at run time, however sometimes it may be impossible</span>
<a name="gbab-3207"></a><span class="cm"> *           to do this in user mode, in which case it is necessary to discover</span>
<a name="gbab-3208"></a><span class="cm"> *           the capabilities in an OS specific way.  Such capabilities are</span>
<a name="gbab-3209"></a><span class="cm"> *           listed here when libpng has support for them and must be turned</span>
<a name="gbab-3210"></a><span class="cm"> *           ON by the application if present.</span>
<a name="gbab-3211"></a><span class="cm"> *</span>
<a name="gbab-3212"></a><span class="cm"> * SOFTWARE: sometimes software optimizations actually result in performance</span>
<a name="gbab-3213"></a><span class="cm"> *           decrease on some architectures or systems, or with some sets of</span>
<a name="gbab-3214"></a><span class="cm"> *           PNG images.  &#39;Software&#39; options allow such optimizations to be</span>
<a name="gbab-3215"></a><span class="cm"> *           selected at run time.</span>
<a name="gbab-3216"></a><span class="cm"> */</span>
<a name="gbab-3217"></a><span class="cp">#ifdef PNG_SET_OPTION_SUPPORTED</span>
<a name="gbab-3218"></a><span class="cp">#ifdef PNG_ARM_NEON_API_SUPPORTED</span>
<a name="gbab-3219"></a><span class="cp">#  define PNG_ARM_NEON   0 </span><span class="cm">/* HARDWARE: ARM Neon SIMD instructions supported */</span><span class="cp"></span>
<a name="gbab-3220"></a><span class="cp">#endif</span>
<a name="gbab-3221"></a><span class="cp">#define PNG_MAXIMUM_INFLATE_WINDOW 2 </span><span class="cm">/* SOFTWARE: force maximum window */</span><span class="cp"></span>
<a name="gbab-3222"></a><span class="cp">#define PNG_SKIP_sRGB_CHECK_PROFILE 4 </span><span class="cm">/* SOFTWARE: Check ICC profile for sRGB */</span><span class="cp"></span>
<a name="gbab-3223"></a><span class="cp">#define PNG_OPTION_NEXT  6 </span><span class="cm">/* Next option - numbers must be even */</span><span class="cp"></span>
<a name="gbab-3224"></a>
<a name="gbab-3225"></a><span class="cm">/* Return values: NOTE: there are four values and &#39;off&#39; is *not* zero */</span>
<a name="gbab-3226"></a><span class="cp">#define PNG_OPTION_UNSET   0 </span><span class="cm">/* Unset - defaults to off */</span><span class="cp"></span>
<a name="gbab-3227"></a><span class="cp">#define PNG_OPTION_INVALID 1 </span><span class="cm">/* Option number out of range */</span><span class="cp"></span>
<a name="gbab-3228"></a><span class="cp">#define PNG_OPTION_OFF     2</span>
<a name="gbab-3229"></a><span class="cp">#define PNG_OPTION_ON      3</span>
<a name="gbab-3230"></a>
<a name="gbab-3231"></a><span class="n">PNG_EXPORT</span><span class="p">(</span><span class="mi">244</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="n">png_set_option</span><span class="p">,</span> <span class="p">(</span><span class="n">png_structrp</span> <span class="n">png_ptr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">option</span><span class="p">,</span>
<a name="gbab-3232"></a>   <span class="kt">int</span> <span class="n">onoff</span><span class="p">));</span>
<a name="gbab-3233"></a><span class="cp">#endif </span><span class="cm">/* SET_OPTION */</span><span class="cp"></span>
<a name="gbab-3234"></a>
<a name="gbab-3235"></a><span class="cm">/*******************************************************************************</span>
<a name="gbab-3236"></a><span class="cm"> *  END OF HARDWARE AND SOFTWARE OPTIONS</span>
<a name="gbab-3237"></a><span class="cm"> ******************************************************************************/</span>
<a name="gbab-3238"></a>
<a name="gbab-3239"></a><span class="cm">/* Maintainer: Put new public prototypes here ^, in libpng.3, in project</span>
<a name="gbab-3240"></a><span class="cm"> * defs, and in scripts/symbols.def.</span>
<a name="gbab-3241"></a><span class="cm"> */</span>
<a name="gbab-3242"></a>
<a name="gbab-3243"></a><span class="cm">/* The last ordinal number (this is the *last* one already used; the next</span>
<a name="gbab-3244"></a><span class="cm"> * one to use is one more than this.)</span>
<a name="gbab-3245"></a><span class="cm"> */</span>
<a name="gbab-3246"></a><span class="cp">#ifdef PNG_EXPORT_LAST_ORDINAL</span>
<a name="gbab-3247"></a>  <span class="n">PNG_EXPORT_LAST_ORDINAL</span><span class="p">(</span><span class="mi">245</span><span class="p">);</span>
<a name="gbab-3248"></a><span class="cp">#endif</span>
<a name="gbab-3249"></a>
<a name="gbab-3250"></a><span class="cp">#ifdef __cplusplus</span>
<a name="gbab-3251"></a><span class="p">}</span>
<a name="gbab-3252"></a><span class="cp">#endif</span>
<a name="gbab-3253"></a>
<a name="gbab-3254"></a><span class="cp">#endif </span><span class="cm">/* PNG_VERSION_INFO_ONLY */</span><span class="cp"></span>
<a name="gbab-3255"></a><span class="cm">/* Do not put anything past this line */</span>
<a name="gbab-3256"></a><span class="cp">#endif </span><span class="cm">/* PNG_H */</span><span class="cp"></span>
</pre></div>
</td></tr></table>