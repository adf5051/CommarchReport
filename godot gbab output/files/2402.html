<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="gbab-1"></a><span class="c1">// Copyright 2010 Google Inc. All Rights Reserved.</span>
<a name="gbab-2"></a><span class="c1">//</span>
<a name="gbab-3"></a><span class="c1">// Use of this source code is governed by a BSD-style license</span>
<a name="gbab-4"></a><span class="c1">// that can be found in the COPYING file in the root of the source</span>
<a name="gbab-5"></a><span class="c1">// tree. An additional intellectual property rights grant can be found</span>
<a name="gbab-6"></a><span class="c1">// in the file PATENTS. All contributing project authors may</span>
<a name="gbab-7"></a><span class="c1">// be found in the AUTHORS file in the root of the source tree.</span>
<a name="gbab-8"></a><span class="c1">// -----------------------------------------------------------------------------</span>
<a name="gbab-9"></a><span class="c1">//</span>
<a name="gbab-10"></a><span class="c1">//  Main decoding functions for WebP images.</span>
<a name="gbab-11"></a><span class="c1">//</span>
<a name="gbab-12"></a><span class="c1">// Author: Skal (pascal.massimino@gmail.com)</span>
<a name="gbab-13"></a>
<a name="gbab-14"></a><span class="cp">#ifndef WEBP_WEBP_DECODE_H_</span>
<a name="gbab-15"></a><span class="cp">#define WEBP_WEBP_DECODE_H_</span>
<a name="gbab-16"></a>
<a name="gbab-17"></a><span class="cp">#include</span> <span class="cpf">&quot;./types.h&quot;</span><span class="cp"></span>
<a name="gbab-18"></a>
<a name="gbab-19"></a><span class="cp">#ifdef __cplusplus</span>
<a name="gbab-20"></a><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="p">{</span>
<a name="gbab-21"></a><span class="cp">#endif</span>
<a name="gbab-22"></a>
<a name="gbab-23"></a><span class="cp">#define WEBP_DECODER_ABI_VERSION 0x0208    </span><span class="c1">// MAJOR(8b) + MINOR(8b)</span>
<a name="gbab-24"></a>
<a name="gbab-25"></a><span class="c1">// Note: forward declaring enumerations is not allowed in (strict) C and C++,</span>
<a name="gbab-26"></a><span class="c1">// the types are left here for reference.</span>
<a name="gbab-27"></a><span class="c1">// typedef enum VP8StatusCode VP8StatusCode;</span>
<a name="gbab-28"></a><span class="c1">// typedef enum WEBP_CSP_MODE WEBP_CSP_MODE;</span>
<a name="gbab-29"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPRGBABuffer</span> <span class="n">WebPRGBABuffer</span><span class="p">;</span>
<a name="gbab-30"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPYUVABuffer</span> <span class="n">WebPYUVABuffer</span><span class="p">;</span>
<a name="gbab-31"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPDecBuffer</span> <span class="n">WebPDecBuffer</span><span class="p">;</span>
<a name="gbab-32"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPIDecoder</span> <span class="n">WebPIDecoder</span><span class="p">;</span>
<a name="gbab-33"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPBitstreamFeatures</span> <span class="n">WebPBitstreamFeatures</span><span class="p">;</span>
<a name="gbab-34"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPDecoderOptions</span> <span class="n">WebPDecoderOptions</span><span class="p">;</span>
<a name="gbab-35"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">WebPDecoderConfig</span> <span class="n">WebPDecoderConfig</span><span class="p">;</span>
<a name="gbab-36"></a>
<a name="gbab-37"></a><span class="c1">// Return the decoder&#39;s version number, packed in hexadecimal using 8bits for</span>
<a name="gbab-38"></a><span class="c1">// each of major/minor/revision. E.g: v2.5.7 is 0x020507.</span>
<a name="gbab-39"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">WebPGetDecoderVersion</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<a name="gbab-40"></a>
<a name="gbab-41"></a><span class="c1">// Retrieve basic header information: width, height.</span>
<a name="gbab-42"></a><span class="c1">// This function will also validate the header, returning true on success,</span>
<a name="gbab-43"></a><span class="c1">// false otherwise. &#39;*width&#39; and &#39;*height&#39; are only valid on successful return.</span>
<a name="gbab-44"></a><span class="c1">// Pointers &#39;width&#39; and &#39;height&#39; can be passed NULL if deemed irrelevant.</span>
<a name="gbab-45"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">WebPGetInfo</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-46"></a>                             <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-47"></a>
<a name="gbab-48"></a><span class="c1">// Decodes WebP images pointed to by &#39;data&#39; and returns RGBA samples, along</span>
<a name="gbab-49"></a><span class="c1">// with the dimensions in *width and *height. The ordering of samples in</span>
<a name="gbab-50"></a><span class="c1">// memory is R, G, B, A, R, G, B, A... in scan order (endian-independent).</span>
<a name="gbab-51"></a><span class="c1">// The returned pointer should be deleted calling WebPFree().</span>
<a name="gbab-52"></a><span class="c1">// Returns NULL in case of error.</span>
<a name="gbab-53"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeRGBA</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-54"></a>                                     <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-55"></a>
<a name="gbab-56"></a><span class="c1">// Same as WebPDecodeRGBA, but returning A, R, G, B, A, R, G, B... ordered data.</span>
<a name="gbab-57"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeARGB</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-58"></a>                                     <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-59"></a>
<a name="gbab-60"></a><span class="c1">// Same as WebPDecodeRGBA, but returning B, G, R, A, B, G, R, A... ordered data.</span>
<a name="gbab-61"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeBGRA</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-62"></a>                                     <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-63"></a>
<a name="gbab-64"></a><span class="c1">// Same as WebPDecodeRGBA, but returning R, G, B, R, G, B... ordered data.</span>
<a name="gbab-65"></a><span class="c1">// If the bitstream contains transparency, it is ignored.</span>
<a name="gbab-66"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeRGB</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-67"></a>                                    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-68"></a>
<a name="gbab-69"></a><span class="c1">// Same as WebPDecodeRGB, but returning B, G, R, B, G, R... ordered data.</span>
<a name="gbab-70"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeBGR</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-71"></a>                                    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-72"></a>
<a name="gbab-73"></a>
<a name="gbab-74"></a><span class="c1">// Decode WebP images pointed to by &#39;data&#39; to Y&#39;UV format(*). The pointer</span>
<a name="gbab-75"></a><span class="c1">// returned is the Y samples buffer. Upon return, *u and *v will point to</span>
<a name="gbab-76"></a><span class="c1">// the U and V chroma data. These U and V buffers need NOT be passed to</span>
<a name="gbab-77"></a><span class="c1">// WebPFree(), unlike the returned Y luma one. The dimension of the U and V</span>
<a name="gbab-78"></a><span class="c1">// planes are both (*width + 1) / 2 and (*height + 1)/ 2.</span>
<a name="gbab-79"></a><span class="c1">// Upon return, the Y buffer has a stride returned as &#39;*stride&#39;, while U and V</span>
<a name="gbab-80"></a><span class="c1">// have a common stride returned as &#39;*uv_stride&#39;.</span>
<a name="gbab-81"></a><span class="c1">// Return NULL in case of error.</span>
<a name="gbab-82"></a><span class="c1">// (*) Also named Y&#39;CbCr. See: http://en.wikipedia.org/wiki/YCbCr</span>
<a name="gbab-83"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeYUV</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-84"></a>                                    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">,</span>
<a name="gbab-85"></a>                                    <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">u</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">v</span><span class="p">,</span>
<a name="gbab-86"></a>                                    <span class="kt">int</span><span class="o">*</span> <span class="n">stride</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">uv_stride</span><span class="p">);</span>
<a name="gbab-87"></a>
<a name="gbab-88"></a><span class="c1">// Releases memory returned by the WebPDecode*() functions above.</span>
<a name="gbab-89"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">WebPFree</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">);</span>
<a name="gbab-90"></a>
<a name="gbab-91"></a><span class="c1">// These five functions are variants of the above ones, that decode the image</span>
<a name="gbab-92"></a><span class="c1">// directly into a pre-allocated buffer &#39;output_buffer&#39;. The maximum storage</span>
<a name="gbab-93"></a><span class="c1">// available in this buffer is indicated by &#39;output_buffer_size&#39;. If this</span>
<a name="gbab-94"></a><span class="c1">// storage is not sufficient (or an error occurred), NULL is returned.</span>
<a name="gbab-95"></a><span class="c1">// Otherwise, output_buffer is returned, for convenience.</span>
<a name="gbab-96"></a><span class="c1">// The parameter &#39;output_stride&#39; specifies the distance (in bytes)</span>
<a name="gbab-97"></a><span class="c1">// between scanlines. Hence, output_buffer_size is expected to be at least</span>
<a name="gbab-98"></a><span class="c1">// output_stride x picture-height.</span>
<a name="gbab-99"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeRGBAInto</span><span class="p">(</span>
<a name="gbab-100"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-101"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-102"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeARGBInto</span><span class="p">(</span>
<a name="gbab-103"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-104"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-105"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeBGRAInto</span><span class="p">(</span>
<a name="gbab-106"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-107"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-108"></a>
<a name="gbab-109"></a><span class="c1">// RGB and BGR variants. Here too the transparency information, if present,</span>
<a name="gbab-110"></a><span class="c1">// will be dropped and ignored.</span>
<a name="gbab-111"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeRGBInto</span><span class="p">(</span>
<a name="gbab-112"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-113"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-114"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeBGRInto</span><span class="p">(</span>
<a name="gbab-115"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-116"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-117"></a>
<a name="gbab-118"></a><span class="c1">// WebPDecodeYUVInto() is a variant of WebPDecodeYUV() that operates directly</span>
<a name="gbab-119"></a><span class="c1">// into pre-allocated luma/chroma plane buffers. This function requires the</span>
<a name="gbab-120"></a><span class="c1">// strides to be passed: one for the luma plane and one for each of the</span>
<a name="gbab-121"></a><span class="c1">// chroma ones. The size of each plane buffer is passed as &#39;luma_size&#39;,</span>
<a name="gbab-122"></a><span class="c1">// &#39;u_size&#39; and &#39;v_size&#39; respectively.</span>
<a name="gbab-123"></a><span class="c1">// Pointer to the luma plane (&#39;*luma&#39;) is returned or NULL if an error occurred</span>
<a name="gbab-124"></a><span class="c1">// during decoding (or because some buffers were found to be too small).</span>
<a name="gbab-125"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPDecodeYUVInto</span><span class="p">(</span>
<a name="gbab-126"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-127"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">luma</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">luma_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">luma_stride</span><span class="p">,</span>
<a name="gbab-128"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">u_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">u_stride</span><span class="p">,</span>
<a name="gbab-129"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">v</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">v_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v_stride</span><span class="p">);</span>
<a name="gbab-130"></a>
<a name="gbab-131"></a><span class="c1">//------------------------------------------------------------------------------</span>
<a name="gbab-132"></a><span class="c1">// Output colorspaces and buffer</span>
<a name="gbab-133"></a>
<a name="gbab-134"></a><span class="c1">// Colorspaces</span>
<a name="gbab-135"></a><span class="c1">// Note: the naming describes the byte-ordering of packed samples in memory.</span>
<a name="gbab-136"></a><span class="c1">// For instance, MODE_BGRA relates to samples ordered as B,G,R,A,B,G,R,A,...</span>
<a name="gbab-137"></a><span class="c1">// Non-capital names (e.g.:MODE_Argb) relates to pre-multiplied RGB channels.</span>
<a name="gbab-138"></a><span class="c1">// RGBA-4444 and RGB-565 colorspaces are represented by following byte-order:</span>
<a name="gbab-139"></a><span class="c1">// RGBA-4444: [r3 r2 r1 r0 g3 g2 g1 g0], [b3 b2 b1 b0 a3 a2 a1 a0], ...</span>
<a name="gbab-140"></a><span class="c1">// RGB-565: [r4 r3 r2 r1 r0 g5 g4 g3], [g2 g1 g0 b4 b3 b2 b1 b0], ...</span>
<a name="gbab-141"></a><span class="c1">// In the case WEBP_SWAP_16BITS_CSP is defined, the bytes are swapped for</span>
<a name="gbab-142"></a><span class="c1">// these two modes:</span>
<a name="gbab-143"></a><span class="c1">// RGBA-4444: [b3 b2 b1 b0 a3 a2 a1 a0], [r3 r2 r1 r0 g3 g2 g1 g0], ...</span>
<a name="gbab-144"></a><span class="c1">// RGB-565: [g2 g1 g0 b4 b3 b2 b1 b0], [r4 r3 r2 r1 r0 g5 g4 g3], ...</span>
<a name="gbab-145"></a>
<a name="gbab-146"></a><span class="k">typedef</span> <span class="k">enum</span> <span class="n">WEBP_CSP_MODE</span> <span class="p">{</span>
<a name="gbab-147"></a>  <span class="n">MODE_RGB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MODE_RGBA</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<a name="gbab-148"></a>  <span class="n">MODE_BGR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">MODE_BGRA</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<a name="gbab-149"></a>  <span class="n">MODE_ARGB</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">MODE_RGBA_4444</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<a name="gbab-150"></a>  <span class="n">MODE_RGB_565</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<a name="gbab-151"></a>  <span class="c1">// RGB-premultiplied transparent modes (alpha value is preserved)</span>
<a name="gbab-152"></a>  <span class="n">MODE_rgbA</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<a name="gbab-153"></a>  <span class="n">MODE_bgrA</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
<a name="gbab-154"></a>  <span class="n">MODE_Argb</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
<a name="gbab-155"></a>  <span class="n">MODE_rgbA_4444</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
<a name="gbab-156"></a>  <span class="c1">// YUV modes must come after RGB ones.</span>
<a name="gbab-157"></a>  <span class="n">MODE_YUV</span> <span class="o">=</span> <span class="mi">11</span><span class="p">,</span> <span class="n">MODE_YUVA</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>  <span class="c1">// yuv 4:2:0</span>
<a name="gbab-158"></a>  <span class="n">MODE_LAST</span> <span class="o">=</span> <span class="mi">13</span>
<a name="gbab-159"></a><span class="p">}</span> <span class="n">WEBP_CSP_MODE</span><span class="p">;</span>
<a name="gbab-160"></a>
<a name="gbab-161"></a><span class="c1">// Some useful macros:</span>
<a name="gbab-162"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">int</span> <span class="nf">WebPIsPremultipliedMode</span><span class="p">(</span><span class="n">WEBP_CSP_MODE</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-163"></a>  <span class="k">return</span> <span class="p">(</span><span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_rgbA</span> <span class="o">||</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_bgrA</span> <span class="o">||</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_Argb</span> <span class="o">||</span>
<a name="gbab-164"></a>          <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_rgbA_4444</span><span class="p">);</span>
<a name="gbab-165"></a><span class="p">}</span>
<a name="gbab-166"></a>
<a name="gbab-167"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">int</span> <span class="nf">WebPIsAlphaMode</span><span class="p">(</span><span class="n">WEBP_CSP_MODE</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-168"></a>  <span class="k">return</span> <span class="p">(</span><span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_RGBA</span> <span class="o">||</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_BGRA</span> <span class="o">||</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_ARGB</span> <span class="o">||</span>
<a name="gbab-169"></a>          <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_RGBA_4444</span> <span class="o">||</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">MODE_YUVA</span> <span class="o">||</span>
<a name="gbab-170"></a>          <span class="n">WebPIsPremultipliedMode</span><span class="p">(</span><span class="n">mode</span><span class="p">));</span>
<a name="gbab-171"></a><span class="p">}</span>
<a name="gbab-172"></a>
<a name="gbab-173"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">int</span> <span class="nf">WebPIsRGBMode</span><span class="p">(</span><span class="n">WEBP_CSP_MODE</span> <span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-174"></a>  <span class="k">return</span> <span class="p">(</span><span class="n">mode</span> <span class="o">&lt;</span> <span class="n">MODE_YUV</span><span class="p">);</span>
<a name="gbab-175"></a><span class="p">}</span>
<a name="gbab-176"></a>
<a name="gbab-177"></a><span class="c1">//------------------------------------------------------------------------------</span>
<a name="gbab-178"></a><span class="c1">// WebPDecBuffer: Generic structure for describing the output sample buffer.</span>
<a name="gbab-179"></a>
<a name="gbab-180"></a><span class="k">struct</span> <span class="n">WebPRGBABuffer</span> <span class="p">{</span>    <span class="c1">// view as RGBA</span>
<a name="gbab-181"></a>  <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">rgba</span><span class="p">;</span>    <span class="c1">// pointer to RGBA samples</span>
<a name="gbab-182"></a>  <span class="kt">int</span> <span class="n">stride</span><span class="p">;</span>       <span class="c1">// stride in bytes from one scanline to the next.</span>
<a name="gbab-183"></a>  <span class="kt">size_t</span> <span class="n">size</span><span class="p">;</span>      <span class="c1">// total size of the *rgba buffer.</span>
<a name="gbab-184"></a><span class="p">};</span>
<a name="gbab-185"></a>
<a name="gbab-186"></a><span class="k">struct</span> <span class="n">WebPYUVABuffer</span> <span class="p">{</span>              <span class="c1">// view as YUVA</span>
<a name="gbab-187"></a>  <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">v</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">;</span>     <span class="c1">// pointer to luma, chroma U/V, alpha samples</span>
<a name="gbab-188"></a>  <span class="kt">int</span> <span class="n">y_stride</span><span class="p">;</span>               <span class="c1">// luma stride</span>
<a name="gbab-189"></a>  <span class="kt">int</span> <span class="n">u_stride</span><span class="p">,</span> <span class="n">v_stride</span><span class="p">;</span>     <span class="c1">// chroma strides</span>
<a name="gbab-190"></a>  <span class="kt">int</span> <span class="n">a_stride</span><span class="p">;</span>               <span class="c1">// alpha stride</span>
<a name="gbab-191"></a>  <span class="kt">size_t</span> <span class="n">y_size</span><span class="p">;</span>              <span class="c1">// luma plane size</span>
<a name="gbab-192"></a>  <span class="kt">size_t</span> <span class="n">u_size</span><span class="p">,</span> <span class="n">v_size</span><span class="p">;</span>      <span class="c1">// chroma planes size</span>
<a name="gbab-193"></a>  <span class="kt">size_t</span> <span class="n">a_size</span><span class="p">;</span>              <span class="c1">// alpha-plane size</span>
<a name="gbab-194"></a><span class="p">};</span>
<a name="gbab-195"></a>
<a name="gbab-196"></a><span class="c1">// Output buffer</span>
<a name="gbab-197"></a><span class="k">struct</span> <span class="n">WebPDecBuffer</span> <span class="p">{</span>
<a name="gbab-198"></a>  <span class="n">WEBP_CSP_MODE</span> <span class="n">colorspace</span><span class="p">;</span>  <span class="c1">// Colorspace.</span>
<a name="gbab-199"></a>  <span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">;</span>         <span class="c1">// Dimensions.</span>
<a name="gbab-200"></a>  <span class="kt">int</span> <span class="n">is_external_memory</span><span class="p">;</span>    <span class="c1">// If non-zero, &#39;internal_memory&#39; pointer is not</span>
<a name="gbab-201"></a>                             <span class="c1">// used. If value is &#39;2&#39; or more, the external</span>
<a name="gbab-202"></a>                             <span class="c1">// memory is considered &#39;slow&#39; and multiple</span>
<a name="gbab-203"></a>                             <span class="c1">// read/write will be avoided.</span>
<a name="gbab-204"></a>  <span class="k">union</span> <span class="p">{</span>
<a name="gbab-205"></a>    <span class="n">WebPRGBABuffer</span> <span class="n">RGBA</span><span class="p">;</span>
<a name="gbab-206"></a>    <span class="n">WebPYUVABuffer</span> <span class="n">YUVA</span><span class="p">;</span>
<a name="gbab-207"></a>  <span class="p">}</span> <span class="n">u</span><span class="p">;</span>                       <span class="c1">// Nameless union of buffer parameters.</span>
<a name="gbab-208"></a>  <span class="kt">uint32_t</span>       <span class="n">pad</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>     <span class="c1">// padding for later use</span>
<a name="gbab-209"></a>
<a name="gbab-210"></a>  <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">private_memory</span><span class="p">;</span>   <span class="c1">// Internally allocated memory (only when</span>
<a name="gbab-211"></a>                             <span class="c1">// is_external_memory is 0). Should not be used</span>
<a name="gbab-212"></a>                             <span class="c1">// externally, but accessed via the buffer union.</span>
<a name="gbab-213"></a><span class="p">};</span>
<a name="gbab-214"></a>
<a name="gbab-215"></a><span class="c1">// Internal, version-checked, entry point</span>
<a name="gbab-216"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">WebPInitDecBufferInternal</span><span class="p">(</span><span class="n">WebPDecBuffer</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<a name="gbab-217"></a>
<a name="gbab-218"></a><span class="c1">// Initialize the structure as empty. Must be called before any other use.</span>
<a name="gbab-219"></a><span class="c1">// Returns false in case of version mismatch</span>
<a name="gbab-220"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">int</span> <span class="nf">WebPInitDecBuffer</span><span class="p">(</span><span class="n">WebPDecBuffer</span><span class="o">*</span> <span class="n">buffer</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-221"></a>  <span class="k">return</span> <span class="n">WebPInitDecBufferInternal</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">WEBP_DECODER_ABI_VERSION</span><span class="p">);</span>
<a name="gbab-222"></a><span class="p">}</span>
<a name="gbab-223"></a>
<a name="gbab-224"></a><span class="c1">// Free any memory associated with the buffer. Must always be called last.</span>
<a name="gbab-225"></a><span class="c1">// Note: doesn&#39;t free the &#39;buffer&#39; structure itself.</span>
<a name="gbab-226"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">WebPFreeDecBuffer</span><span class="p">(</span><span class="n">WebPDecBuffer</span><span class="o">*</span> <span class="n">buffer</span><span class="p">);</span>
<a name="gbab-227"></a>
<a name="gbab-228"></a><span class="c1">//------------------------------------------------------------------------------</span>
<a name="gbab-229"></a><span class="c1">// Enumeration of the status codes</span>
<a name="gbab-230"></a>
<a name="gbab-231"></a><span class="k">typedef</span> <span class="k">enum</span> <span class="n">VP8StatusCode</span> <span class="p">{</span>
<a name="gbab-232"></a>  <span class="n">VP8_STATUS_OK</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<a name="gbab-233"></a>  <span class="n">VP8_STATUS_OUT_OF_MEMORY</span><span class="p">,</span>
<a name="gbab-234"></a>  <span class="n">VP8_STATUS_INVALID_PARAM</span><span class="p">,</span>
<a name="gbab-235"></a>  <span class="n">VP8_STATUS_BITSTREAM_ERROR</span><span class="p">,</span>
<a name="gbab-236"></a>  <span class="n">VP8_STATUS_UNSUPPORTED_FEATURE</span><span class="p">,</span>
<a name="gbab-237"></a>  <span class="n">VP8_STATUS_SUSPENDED</span><span class="p">,</span>
<a name="gbab-238"></a>  <span class="n">VP8_STATUS_USER_ABORT</span><span class="p">,</span>
<a name="gbab-239"></a>  <span class="n">VP8_STATUS_NOT_ENOUGH_DATA</span>
<a name="gbab-240"></a><span class="p">}</span> <span class="n">VP8StatusCode</span><span class="p">;</span>
<a name="gbab-241"></a>
<a name="gbab-242"></a><span class="c1">//------------------------------------------------------------------------------</span>
<a name="gbab-243"></a><span class="c1">// Incremental decoding</span>
<a name="gbab-244"></a><span class="c1">//</span>
<a name="gbab-245"></a><span class="c1">// This API allows streamlined decoding of partial data.</span>
<a name="gbab-246"></a><span class="c1">// Picture can be incrementally decoded as data become available thanks to the</span>
<a name="gbab-247"></a><span class="c1">// WebPIDecoder object. This object can be left in a SUSPENDED state if the</span>
<a name="gbab-248"></a><span class="c1">// picture is only partially decoded, pending additional input.</span>
<a name="gbab-249"></a><span class="c1">// Code example:</span>
<a name="gbab-250"></a><span class="c1">//</span>
<a name="gbab-251"></a><span class="c1">//   WebPInitDecBuffer(&amp;buffer);</span>
<a name="gbab-252"></a><span class="c1">//   buffer.colorspace = mode;</span>
<a name="gbab-253"></a><span class="c1">//   ...</span>
<a name="gbab-254"></a><span class="c1">//   WebPIDecoder* idec = WebPINewDecoder(&amp;buffer);</span>
<a name="gbab-255"></a><span class="c1">//   while (has_more_data) {</span>
<a name="gbab-256"></a><span class="c1">//     // ... (get additional data)</span>
<a name="gbab-257"></a><span class="c1">//     status = WebPIAppend(idec, new_data, new_data_size);</span>
<a name="gbab-258"></a><span class="c1">//     if (status != VP8_STATUS_SUSPENDED ||</span>
<a name="gbab-259"></a><span class="c1">//       break;</span>
<a name="gbab-260"></a><span class="c1">//     }</span>
<a name="gbab-261"></a><span class="c1">//</span>
<a name="gbab-262"></a><span class="c1">//     // The above call decodes the current available buffer.</span>
<a name="gbab-263"></a><span class="c1">//     // Part of the image can now be refreshed by calling to</span>
<a name="gbab-264"></a><span class="c1">//     // WebPIDecGetRGB()/WebPIDecGetYUVA() etc.</span>
<a name="gbab-265"></a><span class="c1">//   }</span>
<a name="gbab-266"></a><span class="c1">//   WebPIDelete(idec);</span>
<a name="gbab-267"></a>
<a name="gbab-268"></a><span class="c1">// Creates a new incremental decoder with the supplied buffer parameter.</span>
<a name="gbab-269"></a><span class="c1">// This output_buffer can be passed NULL, in which case a default output buffer</span>
<a name="gbab-270"></a><span class="c1">// is used (with MODE_RGB). Otherwise, an internal reference to &#39;output_buffer&#39;</span>
<a name="gbab-271"></a><span class="c1">// is kept, which means that the lifespan of &#39;output_buffer&#39; must be larger than</span>
<a name="gbab-272"></a><span class="c1">// that of the returned WebPIDecoder object.</span>
<a name="gbab-273"></a><span class="c1">// The supplied &#39;output_buffer&#39; content MUST NOT be changed between calls to</span>
<a name="gbab-274"></a><span class="c1">// WebPIAppend() or WebPIUpdate() unless &#39;output_buffer.is_external_memory&#39; is</span>
<a name="gbab-275"></a><span class="c1">// not set to 0. In such a case, it is allowed to modify the pointers, size and</span>
<a name="gbab-276"></a><span class="c1">// stride of output_buffer.u.RGBA or output_buffer.u.YUVA, provided they remain</span>
<a name="gbab-277"></a><span class="c1">// within valid bounds.</span>
<a name="gbab-278"></a><span class="c1">// All other fields of WebPDecBuffer MUST remain constant between calls.</span>
<a name="gbab-279"></a><span class="c1">// Returns NULL if the allocation failed.</span>
<a name="gbab-280"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPINewDecoder</span><span class="p">(</span><span class="n">WebPDecBuffer</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">);</span>
<a name="gbab-281"></a>
<a name="gbab-282"></a><span class="c1">// This function allocates and initializes an incremental-decoder object, which</span>
<a name="gbab-283"></a><span class="c1">// will output the RGB/A samples specified by &#39;csp&#39; into a preallocated</span>
<a name="gbab-284"></a><span class="c1">// buffer &#39;output_buffer&#39;. The size of this buffer is at least</span>
<a name="gbab-285"></a><span class="c1">// &#39;output_buffer_size&#39; and the stride (distance in bytes between two scanlines)</span>
<a name="gbab-286"></a><span class="c1">// is specified by &#39;output_stride&#39;.</span>
<a name="gbab-287"></a><span class="c1">// Additionally, output_buffer can be passed NULL in which case the output</span>
<a name="gbab-288"></a><span class="c1">// buffer will be allocated automatically when the decoding starts. The</span>
<a name="gbab-289"></a><span class="c1">// colorspace &#39;csp&#39; is taken into account for allocating this buffer. All other</span>
<a name="gbab-290"></a><span class="c1">// parameters are ignored.</span>
<a name="gbab-291"></a><span class="c1">// Returns NULL if the allocation failed, or if some parameters are invalid.</span>
<a name="gbab-292"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPINewRGB</span><span class="p">(</span>
<a name="gbab-293"></a>    <span class="n">WEBP_CSP_MODE</span> <span class="n">csp</span><span class="p">,</span>
<a name="gbab-294"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">output_buffer</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">output_buffer_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">output_stride</span><span class="p">);</span>
<a name="gbab-295"></a>
<a name="gbab-296"></a><span class="c1">// This function allocates and initializes an incremental-decoder object, which</span>
<a name="gbab-297"></a><span class="c1">// will output the raw luma/chroma samples into a preallocated planes if</span>
<a name="gbab-298"></a><span class="c1">// supplied. The luma plane is specified by its pointer &#39;luma&#39;, its size</span>
<a name="gbab-299"></a><span class="c1">// &#39;luma_size&#39; and its stride &#39;luma_stride&#39;. Similarly, the chroma-u plane</span>
<a name="gbab-300"></a><span class="c1">// is specified by the &#39;u&#39;, &#39;u_size&#39; and &#39;u_stride&#39; parameters, and the chroma-v</span>
<a name="gbab-301"></a><span class="c1">// plane by &#39;v&#39; and &#39;v_size&#39;. And same for the alpha-plane. The &#39;a&#39; pointer</span>
<a name="gbab-302"></a><span class="c1">// can be pass NULL in case one is not interested in the transparency plane.</span>
<a name="gbab-303"></a><span class="c1">// Conversely, &#39;luma&#39; can be passed NULL if no preallocated planes are supplied.</span>
<a name="gbab-304"></a><span class="c1">// In this case, the output buffer will be automatically allocated (using</span>
<a name="gbab-305"></a><span class="c1">// MODE_YUVA) when decoding starts. All parameters are then ignored.</span>
<a name="gbab-306"></a><span class="c1">// Returns NULL if the allocation failed or if a parameter is invalid.</span>
<a name="gbab-307"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPINewYUVA</span><span class="p">(</span>
<a name="gbab-308"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">luma</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">luma_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">luma_stride</span><span class="p">,</span>
<a name="gbab-309"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">u_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">u_stride</span><span class="p">,</span>
<a name="gbab-310"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">v</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">v_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v_stride</span><span class="p">,</span>
<a name="gbab-311"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">a_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a_stride</span><span class="p">);</span>
<a name="gbab-312"></a>
<a name="gbab-313"></a><span class="c1">// Deprecated version of the above, without the alpha plane.</span>
<a name="gbab-314"></a><span class="c1">// Kept for backward compatibility.</span>
<a name="gbab-315"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPINewYUV</span><span class="p">(</span>
<a name="gbab-316"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">luma</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">luma_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">luma_stride</span><span class="p">,</span>
<a name="gbab-317"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">u_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">u_stride</span><span class="p">,</span>
<a name="gbab-318"></a>    <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">v</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">v_size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v_stride</span><span class="p">);</span>
<a name="gbab-319"></a>
<a name="gbab-320"></a><span class="c1">// Deletes the WebPIDecoder object and associated memory. Must always be called</span>
<a name="gbab-321"></a><span class="c1">// if WebPINewDecoder, WebPINewRGB or WebPINewYUV succeeded.</span>
<a name="gbab-322"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">WebPIDelete</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">);</span>
<a name="gbab-323"></a>
<a name="gbab-324"></a><span class="c1">// Copies and decodes the next available data. Returns VP8_STATUS_OK when</span>
<a name="gbab-325"></a><span class="c1">// the image is successfully decoded. Returns VP8_STATUS_SUSPENDED when more</span>
<a name="gbab-326"></a><span class="c1">// data is expected. Returns error in other cases.</span>
<a name="gbab-327"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">VP8StatusCode</span><span class="p">)</span> <span class="n">WebPIAppend</span><span class="p">(</span>
<a name="gbab-328"></a>    <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">);</span>
<a name="gbab-329"></a>
<a name="gbab-330"></a><span class="c1">// A variant of the above function to be used when data buffer contains</span>
<a name="gbab-331"></a><span class="c1">// partial data from the beginning. In this case data buffer is not copied</span>
<a name="gbab-332"></a><span class="c1">// to the internal memory.</span>
<a name="gbab-333"></a><span class="c1">// Note that the value of the &#39;data&#39; pointer can change between calls to</span>
<a name="gbab-334"></a><span class="c1">// WebPIUpdate, for instance when the data buffer is resized to fit larger data.</span>
<a name="gbab-335"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">VP8StatusCode</span><span class="p">)</span> <span class="n">WebPIUpdate</span><span class="p">(</span>
<a name="gbab-336"></a>    <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">);</span>
<a name="gbab-337"></a>
<a name="gbab-338"></a><span class="c1">// Returns the RGB/A image decoded so far. Returns NULL if output params</span>
<a name="gbab-339"></a><span class="c1">// are not initialized yet. The RGB/A output type corresponds to the colorspace</span>
<a name="gbab-340"></a><span class="c1">// specified during call to WebPINewDecoder() or WebPINewRGB().</span>
<a name="gbab-341"></a><span class="c1">// *last_y is the index of last decoded row in raster scan order. Some pointers</span>
<a name="gbab-342"></a><span class="c1">// (*last_y, *width etc.) can be NULL if corresponding information is not</span>
<a name="gbab-343"></a><span class="c1">// needed.</span>
<a name="gbab-344"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPIDecGetRGB</span><span class="p">(</span>
<a name="gbab-345"></a>    <span class="k">const</span> <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">last_y</span><span class="p">,</span>
<a name="gbab-346"></a>    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">stride</span><span class="p">);</span>
<a name="gbab-347"></a>
<a name="gbab-348"></a><span class="c1">// Same as above function to get a YUVA image. Returns pointer to the luma</span>
<a name="gbab-349"></a><span class="c1">// plane or NULL in case of error. If there is no alpha information</span>
<a name="gbab-350"></a><span class="c1">// the alpha pointer &#39;*a&#39; will be returned NULL.</span>
<a name="gbab-351"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPIDecGetYUVA</span><span class="p">(</span>
<a name="gbab-352"></a>    <span class="k">const</span> <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">last_y</span><span class="p">,</span>
<a name="gbab-353"></a>    <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">u</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">v</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">a</span><span class="p">,</span>
<a name="gbab-354"></a>    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">stride</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">uv_stride</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">a_stride</span><span class="p">);</span>
<a name="gbab-355"></a>
<a name="gbab-356"></a><span class="c1">// Deprecated alpha-less version of WebPIDecGetYUVA(): it will ignore the</span>
<a name="gbab-357"></a><span class="c1">// alpha information (if present). Kept for backward compatibility.</span>
<a name="gbab-358"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="nf">WebPIDecGetYUV</span><span class="p">(</span>
<a name="gbab-359"></a>    <span class="k">const</span> <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">last_y</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">u</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">**</span> <span class="n">v</span><span class="p">,</span>
<a name="gbab-360"></a>    <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">stride</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">uv_stride</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-361"></a>  <span class="k">return</span> <span class="n">WebPIDecGetYUVA</span><span class="p">(</span><span class="n">idec</span><span class="p">,</span> <span class="n">last_y</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span>
<a name="gbab-362"></a>                         <span class="n">stride</span><span class="p">,</span> <span class="n">uv_stride</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<a name="gbab-363"></a><span class="p">}</span>
<a name="gbab-364"></a>
<a name="gbab-365"></a><span class="c1">// Generic call to retrieve information about the displayable area.</span>
<a name="gbab-366"></a><span class="c1">// If non NULL, the left/right/width/height pointers are filled with the visible</span>
<a name="gbab-367"></a><span class="c1">// rectangular area so far.</span>
<a name="gbab-368"></a><span class="c1">// Returns NULL in case the incremental decoder object is in an invalid state.</span>
<a name="gbab-369"></a><span class="c1">// Otherwise returns the pointer to the internal representation. This structure</span>
<a name="gbab-370"></a><span class="c1">// is read-only, tied to WebPIDecoder&#39;s lifespan and should not be modified.</span>
<a name="gbab-371"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="k">const</span> <span class="n">WebPDecBuffer</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPIDecodedArea</span><span class="p">(</span>
<a name="gbab-372"></a>    <span class="k">const</span> <span class="n">WebPIDecoder</span><span class="o">*</span> <span class="n">idec</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">top</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">height</span><span class="p">);</span>
<a name="gbab-373"></a>
<a name="gbab-374"></a><span class="c1">//------------------------------------------------------------------------------</span>
<a name="gbab-375"></a><span class="c1">// Advanced decoding parametrization</span>
<a name="gbab-376"></a><span class="c1">//</span>
<a name="gbab-377"></a><span class="c1">//  Code sample for using the advanced decoding API</span>
<a name="gbab-378"></a><span class="cm">/*</span>
<a name="gbab-379"></a><span class="cm">     // A) Init a configuration object</span>
<a name="gbab-380"></a><span class="cm">     WebPDecoderConfig config;</span>
<a name="gbab-381"></a><span class="cm">     CHECK(WebPInitDecoderConfig(&amp;config));</span>
<a name="gbab-382"></a>
<a name="gbab-383"></a><span class="cm">     // B) optional: retrieve the bitstream&#39;s features.</span>
<a name="gbab-384"></a><span class="cm">     CHECK(WebPGetFeatures(data, data_size, &amp;config.input) == VP8_STATUS_OK);</span>
<a name="gbab-385"></a>
<a name="gbab-386"></a><span class="cm">     // C) Adjust &#39;config&#39;, if needed</span>
<a name="gbab-387"></a><span class="cm">     config.no_fancy_upsampling = 1;</span>
<a name="gbab-388"></a><span class="cm">     config.output.colorspace = MODE_BGRA;</span>
<a name="gbab-389"></a><span class="cm">     // etc.</span>
<a name="gbab-390"></a>
<a name="gbab-391"></a><span class="cm">     // Note that you can also make config.output point to an externally</span>
<a name="gbab-392"></a><span class="cm">     // supplied memory buffer, provided it&#39;s big enough to store the decoded</span>
<a name="gbab-393"></a><span class="cm">     // picture. Otherwise, config.output will just be used to allocate memory</span>
<a name="gbab-394"></a><span class="cm">     // and store the decoded picture.</span>
<a name="gbab-395"></a>
<a name="gbab-396"></a><span class="cm">     // D) Decode!</span>
<a name="gbab-397"></a><span class="cm">     CHECK(WebPDecode(data, data_size, &amp;config) == VP8_STATUS_OK);</span>
<a name="gbab-398"></a>
<a name="gbab-399"></a><span class="cm">     // E) Decoded image is now in config.output (and config.output.u.RGBA)</span>
<a name="gbab-400"></a>
<a name="gbab-401"></a><span class="cm">     // F) Reclaim memory allocated in config&#39;s object. It&#39;s safe to call</span>
<a name="gbab-402"></a><span class="cm">     // this function even if the memory is external and wasn&#39;t allocated</span>
<a name="gbab-403"></a><span class="cm">     // by WebPDecode().</span>
<a name="gbab-404"></a><span class="cm">     WebPFreeDecBuffer(&amp;config.output);</span>
<a name="gbab-405"></a><span class="cm">*/</span>
<a name="gbab-406"></a>
<a name="gbab-407"></a><span class="c1">// Features gathered from the bitstream</span>
<a name="gbab-408"></a><span class="k">struct</span> <span class="n">WebPBitstreamFeatures</span> <span class="p">{</span>
<a name="gbab-409"></a>  <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>          <span class="c1">// Width in pixels, as read from the bitstream.</span>
<a name="gbab-410"></a>  <span class="kt">int</span> <span class="n">height</span><span class="p">;</span>         <span class="c1">// Height in pixels, as read from the bitstream.</span>
<a name="gbab-411"></a>  <span class="kt">int</span> <span class="n">has_alpha</span><span class="p">;</span>      <span class="c1">// True if the bitstream contains an alpha channel.</span>
<a name="gbab-412"></a>  <span class="kt">int</span> <span class="n">has_animation</span><span class="p">;</span>  <span class="c1">// True if the bitstream is an animation.</span>
<a name="gbab-413"></a>  <span class="kt">int</span> <span class="n">format</span><span class="p">;</span>         <span class="c1">// 0 = undefined (/mixed), 1 = lossy, 2 = lossless</span>
<a name="gbab-414"></a>
<a name="gbab-415"></a>  <span class="kt">uint32_t</span> <span class="n">pad</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>    <span class="c1">// padding for later use</span>
<a name="gbab-416"></a><span class="p">};</span>
<a name="gbab-417"></a>
<a name="gbab-418"></a><span class="c1">// Internal, version-checked, entry point</span>
<a name="gbab-419"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">VP8StatusCode</span><span class="p">)</span> <span class="n">WebPGetFeaturesInternal</span><span class="p">(</span>
<a name="gbab-420"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span><span class="p">,</span> <span class="kt">size_t</span><span class="p">,</span> <span class="n">WebPBitstreamFeatures</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<a name="gbab-421"></a>
<a name="gbab-422"></a><span class="c1">// Retrieve features from the bitstream. The *features structure is filled</span>
<a name="gbab-423"></a><span class="c1">// with information gathered from the bitstream.</span>
<a name="gbab-424"></a><span class="c1">// Returns VP8_STATUS_OK when the features are successfully retrieved. Returns</span>
<a name="gbab-425"></a><span class="c1">// VP8_STATUS_NOT_ENOUGH_DATA when more data is needed to retrieve the</span>
<a name="gbab-426"></a><span class="c1">// features from headers. Returns error in other cases.</span>
<a name="gbab-427"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="n">VP8StatusCode</span> <span class="nf">WebPGetFeatures</span><span class="p">(</span>
<a name="gbab-428"></a>    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-429"></a>    <span class="n">WebPBitstreamFeatures</span><span class="o">*</span> <span class="n">features</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-430"></a>  <span class="k">return</span> <span class="n">WebPGetFeaturesInternal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">data_size</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span>
<a name="gbab-431"></a>                                 <span class="n">WEBP_DECODER_ABI_VERSION</span><span class="p">);</span>
<a name="gbab-432"></a><span class="p">}</span>
<a name="gbab-433"></a>
<a name="gbab-434"></a><span class="c1">// Decoding options</span>
<a name="gbab-435"></a><span class="k">struct</span> <span class="n">WebPDecoderOptions</span> <span class="p">{</span>
<a name="gbab-436"></a>  <span class="kt">int</span> <span class="n">bypass_filtering</span><span class="p">;</span>               <span class="c1">// if true, skip the in-loop filtering</span>
<a name="gbab-437"></a>  <span class="kt">int</span> <span class="n">no_fancy_upsampling</span><span class="p">;</span>            <span class="c1">// if true, use faster pointwise upsampler</span>
<a name="gbab-438"></a>  <span class="kt">int</span> <span class="n">use_cropping</span><span class="p">;</span>                   <span class="c1">// if true, cropping is applied _first_</span>
<a name="gbab-439"></a>  <span class="kt">int</span> <span class="n">crop_left</span><span class="p">,</span> <span class="n">crop_top</span><span class="p">;</span>            <span class="c1">// top-left position for cropping.</span>
<a name="gbab-440"></a>                                      <span class="c1">// Will be snapped to even values.</span>
<a name="gbab-441"></a>  <span class="kt">int</span> <span class="n">crop_width</span><span class="p">,</span> <span class="n">crop_height</span><span class="p">;</span>        <span class="c1">// dimension of the cropping area</span>
<a name="gbab-442"></a>  <span class="kt">int</span> <span class="n">use_scaling</span><span class="p">;</span>                    <span class="c1">// if true, scaling is applied _afterward_</span>
<a name="gbab-443"></a>  <span class="kt">int</span> <span class="n">scaled_width</span><span class="p">,</span> <span class="n">scaled_height</span><span class="p">;</span>    <span class="c1">// final resolution</span>
<a name="gbab-444"></a>  <span class="kt">int</span> <span class="n">use_threads</span><span class="p">;</span>                    <span class="c1">// if true, use multi-threaded decoding</span>
<a name="gbab-445"></a>  <span class="kt">int</span> <span class="n">dithering_strength</span><span class="p">;</span>             <span class="c1">// dithering strength (0=Off, 100=full)</span>
<a name="gbab-446"></a>  <span class="kt">int</span> <span class="n">flip</span><span class="p">;</span>                           <span class="c1">// flip output vertically</span>
<a name="gbab-447"></a>  <span class="kt">int</span> <span class="n">alpha_dithering_strength</span><span class="p">;</span>       <span class="c1">// alpha dithering strength in [0..100]</span>
<a name="gbab-448"></a>
<a name="gbab-449"></a>  <span class="kt">uint32_t</span> <span class="n">pad</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>                    <span class="c1">// padding for later use</span>
<a name="gbab-450"></a><span class="p">};</span>
<a name="gbab-451"></a>
<a name="gbab-452"></a><span class="c1">// Main object storing the configuration for advanced decoding.</span>
<a name="gbab-453"></a><span class="k">struct</span> <span class="n">WebPDecoderConfig</span> <span class="p">{</span>
<a name="gbab-454"></a>  <span class="n">WebPBitstreamFeatures</span> <span class="n">input</span><span class="p">;</span>  <span class="c1">// Immutable bitstream features (optional)</span>
<a name="gbab-455"></a>  <span class="n">WebPDecBuffer</span> <span class="n">output</span><span class="p">;</span>         <span class="c1">// Output buffer (can point to external mem)</span>
<a name="gbab-456"></a>  <span class="n">WebPDecoderOptions</span> <span class="n">options</span><span class="p">;</span>   <span class="c1">// Decoding options</span>
<a name="gbab-457"></a><span class="p">};</span>
<a name="gbab-458"></a>
<a name="gbab-459"></a><span class="c1">// Internal, version-checked, entry point</span>
<a name="gbab-460"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">WebPInitDecoderConfigInternal</span><span class="p">(</span><span class="n">WebPDecoderConfig</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<a name="gbab-461"></a>
<a name="gbab-462"></a><span class="c1">// Initialize the configuration as empty. This function must always be</span>
<a name="gbab-463"></a><span class="c1">// called first, unless WebPGetFeatures() is to be called.</span>
<a name="gbab-464"></a><span class="c1">// Returns false in case of mismatched version.</span>
<a name="gbab-465"></a><span class="k">static</span> <span class="n">WEBP_INLINE</span> <span class="kt">int</span> <span class="nf">WebPInitDecoderConfig</span><span class="p">(</span><span class="n">WebPDecoderConfig</span><span class="o">*</span> <span class="n">config</span><span class="p">)</span> <span class="p">{</span>
<a name="gbab-466"></a>  <span class="k">return</span> <span class="n">WebPInitDecoderConfigInternal</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">WEBP_DECODER_ABI_VERSION</span><span class="p">);</span>
<a name="gbab-467"></a><span class="p">}</span>
<a name="gbab-468"></a>
<a name="gbab-469"></a><span class="c1">// Instantiate a new incremental decoder object with the requested</span>
<a name="gbab-470"></a><span class="c1">// configuration. The bitstream can be passed using &#39;data&#39; and &#39;data_size&#39;</span>
<a name="gbab-471"></a><span class="c1">// parameter, in which case the features will be parsed and stored into</span>
<a name="gbab-472"></a><span class="c1">// config-&gt;input. Otherwise, &#39;data&#39; can be NULL and no parsing will occur.</span>
<a name="gbab-473"></a><span class="c1">// Note that &#39;config&#39; can be NULL too, in which case a default configuration</span>
<a name="gbab-474"></a><span class="c1">// is used. If &#39;config&#39; is not NULL, it must outlive the WebPIDecoder object</span>
<a name="gbab-475"></a><span class="c1">// as some references to its fields will be used. No internal copy of &#39;config&#39;</span>
<a name="gbab-476"></a><span class="c1">// is made.</span>
<a name="gbab-477"></a><span class="c1">// The return WebPIDecoder object must always be deleted calling WebPIDelete().</span>
<a name="gbab-478"></a><span class="c1">// Returns NULL in case of error (and config-&gt;status will then reflect</span>
<a name="gbab-479"></a><span class="c1">// the error condition, if available).</span>
<a name="gbab-480"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">WebPIDecoder</span><span class="o">*</span><span class="p">)</span> <span class="n">WebPIDecode</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-481"></a>                                       <span class="n">WebPDecoderConfig</span><span class="o">*</span> <span class="n">config</span><span class="p">);</span>
<a name="gbab-482"></a>
<a name="gbab-483"></a><span class="c1">// Non-incremental version. This version decodes the full data at once, taking</span>
<a name="gbab-484"></a><span class="c1">// &#39;config&#39; into account. Returns decoding status (which should be VP8_STATUS_OK</span>
<a name="gbab-485"></a><span class="c1">// if the decoding was successful). Note that &#39;config&#39; cannot be NULL.</span>
<a name="gbab-486"></a><span class="n">WEBP_EXTERN</span><span class="p">(</span><span class="n">VP8StatusCode</span><span class="p">)</span> <span class="n">WebPDecode</span><span class="p">(</span><span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">data_size</span><span class="p">,</span>
<a name="gbab-487"></a>                                      <span class="n">WebPDecoderConfig</span><span class="o">*</span> <span class="n">config</span><span class="p">);</span>
<a name="gbab-488"></a>
<a name="gbab-489"></a><span class="cp">#ifdef __cplusplus</span>
<a name="gbab-490"></a><span class="p">}</span>    <span class="c1">// extern &quot;C&quot;</span>
<a name="gbab-491"></a><span class="cp">#endif</span>
<a name="gbab-492"></a>
<a name="gbab-493"></a><span class="cp">#endif  </span><span class="cm">/* WEBP_WEBP_DECODE_H_ */</span><span class="cp"></span>
</pre></div>
</td></tr></table>