<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="gbab-1"></a><span class="cm">/***************************************************************************/</span>
<a name="gbab-2"></a><span class="cm">/*                                                                         */</span>
<a name="gbab-3"></a><span class="cm">/*  ftautoh.h                                                              */</span>
<a name="gbab-4"></a><span class="cm">/*                                                                         */</span>
<a name="gbab-5"></a><span class="cm">/*    FreeType API for controlling the auto-hinter (specification only).   */</span>
<a name="gbab-6"></a><span class="cm">/*                                                                         */</span>
<a name="gbab-7"></a><span class="cm">/*  Copyright 2012-2016 by                                                 */</span>
<a name="gbab-8"></a><span class="cm">/*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */</span>
<a name="gbab-9"></a><span class="cm">/*                                                                         */</span>
<a name="gbab-10"></a><span class="cm">/*  This file is part of the FreeType project, and may only be used,       */</span>
<a name="gbab-11"></a><span class="cm">/*  modified, and distributed under the terms of the FreeType project      */</span>
<a name="gbab-12"></a><span class="cm">/*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */</span>
<a name="gbab-13"></a><span class="cm">/*  this file you indicate that you have read the license and              */</span>
<a name="gbab-14"></a><span class="cm">/*  understand and accept it fully.                                        */</span>
<a name="gbab-15"></a><span class="cm">/*                                                                         */</span>
<a name="gbab-16"></a><span class="cm">/***************************************************************************/</span>
<a name="gbab-17"></a>
<a name="gbab-18"></a>
<a name="gbab-19"></a><span class="cp">#ifndef FTAUTOH_H_</span>
<a name="gbab-20"></a><span class="cp">#define FTAUTOH_H_</span>
<a name="gbab-21"></a>
<a name="gbab-22"></a><span class="cp">#include</span> <span class="cpf">&lt;ft2build.h&gt;</span><span class="cp"></span>
<a name="gbab-23"></a><span class="cp">#include</span> <span class="cpf">FT_FREETYPE_H</span><span class="cp"></span>
<a name="gbab-24"></a>
<a name="gbab-25"></a><span class="cp">#ifdef FREETYPE_H</span>
<a name="gbab-26"></a><span class="cp">#error &quot;freetype.h of FreeType 1 has been loaded!&quot;</span>
<a name="gbab-27"></a><span class="cp">#error &quot;Please fix the directory search order for header files&quot;</span>
<a name="gbab-28"></a><span class="cp">#error &quot;so that freetype.h of FreeType 2 is found first.&quot;</span>
<a name="gbab-29"></a><span class="cp">#endif</span>
<a name="gbab-30"></a>
<a name="gbab-31"></a>
<a name="gbab-32"></a><span class="n">FT_BEGIN_HEADER</span>
<a name="gbab-33"></a>
<a name="gbab-34"></a>
<a name="gbab-35"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-36"></a><span class="cm">   *</span>
<a name="gbab-37"></a><span class="cm">   * @section:</span>
<a name="gbab-38"></a><span class="cm">   *   auto_hinter</span>
<a name="gbab-39"></a><span class="cm">   *</span>
<a name="gbab-40"></a><span class="cm">   * @title:</span>
<a name="gbab-41"></a><span class="cm">   *   The auto-hinter</span>
<a name="gbab-42"></a><span class="cm">   *</span>
<a name="gbab-43"></a><span class="cm">   * @abstract:</span>
<a name="gbab-44"></a><span class="cm">   *   Controlling the auto-hinting module.</span>
<a name="gbab-45"></a><span class="cm">   *</span>
<a name="gbab-46"></a><span class="cm">   * @description:</span>
<a name="gbab-47"></a><span class="cm">   *   While FreeType&#39;s auto-hinter doesn&#39;t expose API functions by itself,</span>
<a name="gbab-48"></a><span class="cm">   *   it is possible to control its behaviour with @FT_Property_Set and</span>
<a name="gbab-49"></a><span class="cm">   *   @FT_Property_Get.  The following lists the available properties</span>
<a name="gbab-50"></a><span class="cm">   *   together with the necessary macros and structures.</span>
<a name="gbab-51"></a><span class="cm">   *</span>
<a name="gbab-52"></a><span class="cm">   *   Note that the auto-hinter&#39;s module name is `autofitter&#39; for</span>
<a name="gbab-53"></a><span class="cm">   *   historical reasons.</span>
<a name="gbab-54"></a><span class="cm">   *</span>
<a name="gbab-55"></a><span class="cm">   */</span>
<a name="gbab-56"></a>
<a name="gbab-57"></a>
<a name="gbab-58"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-59"></a><span class="cm">   *</span>
<a name="gbab-60"></a><span class="cm">   * @property:</span>
<a name="gbab-61"></a><span class="cm">   *   glyph-to-script-map</span>
<a name="gbab-62"></a><span class="cm">   *</span>
<a name="gbab-63"></a><span class="cm">   * @description:</span>
<a name="gbab-64"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-65"></a><span class="cm">   *</span>
<a name="gbab-66"></a><span class="cm">   *   The auto-hinter provides various script modules to hint glyphs.</span>
<a name="gbab-67"></a><span class="cm">   *   Examples of supported scripts are Latin or CJK.  Before a glyph is</span>
<a name="gbab-68"></a><span class="cm">   *   auto-hinted, the Unicode character map of the font gets examined, and</span>
<a name="gbab-69"></a><span class="cm">   *   the script is then determined based on Unicode character ranges, see</span>
<a name="gbab-70"></a><span class="cm">   *   below.</span>
<a name="gbab-71"></a><span class="cm">   *</span>
<a name="gbab-72"></a><span class="cm">   *   OpenType fonts, however, often provide much more glyphs than</span>
<a name="gbab-73"></a><span class="cm">   *   character codes (small caps, superscripts, ligatures, swashes, etc.),</span>
<a name="gbab-74"></a><span class="cm">   *   to be controlled by so-called `features&#39;.  Handling OpenType features</span>
<a name="gbab-75"></a><span class="cm">   *   can be quite complicated and thus needs a separate library on top of</span>
<a name="gbab-76"></a><span class="cm">   *   FreeType.</span>
<a name="gbab-77"></a><span class="cm">   *</span>
<a name="gbab-78"></a><span class="cm">   *   The mapping between glyph indices and scripts (in the auto-hinter</span>
<a name="gbab-79"></a><span class="cm">   *   sense, see the @FT_AUTOHINTER_SCRIPT_XXX values) is stored as an</span>
<a name="gbab-80"></a><span class="cm">   *   array with `num_glyphs&#39; elements, as found in the font&#39;s @FT_Face</span>
<a name="gbab-81"></a><span class="cm">   *   structure.  The `glyph-to-script-map&#39; property returns a pointer to</span>
<a name="gbab-82"></a><span class="cm">   *   this array, which can be modified as needed.  Note that the</span>
<a name="gbab-83"></a><span class="cm">   *   modification should happen before the first glyph gets processed by</span>
<a name="gbab-84"></a><span class="cm">   *   the auto-hinter so that the global analysis of the font shapes</span>
<a name="gbab-85"></a><span class="cm">   *   actually uses the modified mapping.</span>
<a name="gbab-86"></a><span class="cm">   *</span>
<a name="gbab-87"></a><span class="cm">   *   The following example code demonstrates how to access it (omitting</span>
<a name="gbab-88"></a><span class="cm">   *   the error handling).</span>
<a name="gbab-89"></a><span class="cm">   *</span>
<a name="gbab-90"></a><span class="cm">   *   {</span>
<a name="gbab-91"></a><span class="cm">   *     FT_Library                library;</span>
<a name="gbab-92"></a><span class="cm">   *     FT_Face                   face;</span>
<a name="gbab-93"></a><span class="cm">   *     FT_Prop_GlyphToScriptMap  prop;</span>
<a name="gbab-94"></a><span class="cm">   *</span>
<a name="gbab-95"></a><span class="cm">   *</span>
<a name="gbab-96"></a><span class="cm">   *     FT_Init_FreeType( &amp;library );</span>
<a name="gbab-97"></a><span class="cm">   *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );</span>
<a name="gbab-98"></a><span class="cm">   *</span>
<a name="gbab-99"></a><span class="cm">   *     prop.face = face;</span>
<a name="gbab-100"></a><span class="cm">   *</span>
<a name="gbab-101"></a><span class="cm">   *     FT_Property_Get( library, &quot;autofitter&quot;,</span>
<a name="gbab-102"></a><span class="cm">   *                               &quot;glyph-to-script-map&quot;, &amp;prop );</span>
<a name="gbab-103"></a><span class="cm">   *</span>
<a name="gbab-104"></a><span class="cm">   *     // adjust `prop.map&#39; as needed right here</span>
<a name="gbab-105"></a><span class="cm">   *</span>
<a name="gbab-106"></a><span class="cm">   *     FT_Load_Glyph( face, ..., FT_LOAD_FORCE_AUTOHINT );</span>
<a name="gbab-107"></a><span class="cm">   *   }</span>
<a name="gbab-108"></a><span class="cm">   *</span>
<a name="gbab-109"></a><span class="cm">   */</span>
<a name="gbab-110"></a>
<a name="gbab-111"></a>
<a name="gbab-112"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-113"></a><span class="cm">   *</span>
<a name="gbab-114"></a><span class="cm">   * @enum:</span>
<a name="gbab-115"></a><span class="cm">   *   FT_AUTOHINTER_SCRIPT_XXX</span>
<a name="gbab-116"></a><span class="cm">   *</span>
<a name="gbab-117"></a><span class="cm">   * @description:</span>
<a name="gbab-118"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-119"></a><span class="cm">   *</span>
<a name="gbab-120"></a><span class="cm">   *   A list of constants used for the @glyph-to-script-map property to</span>
<a name="gbab-121"></a><span class="cm">   *   specify the script submodule the auto-hinter should use for hinting a</span>
<a name="gbab-122"></a><span class="cm">   *   particular glyph.</span>
<a name="gbab-123"></a><span class="cm">   *</span>
<a name="gbab-124"></a><span class="cm">   * @values:</span>
<a name="gbab-125"></a><span class="cm">   *   FT_AUTOHINTER_SCRIPT_NONE ::</span>
<a name="gbab-126"></a><span class="cm">   *     Don&#39;t auto-hint this glyph.</span>
<a name="gbab-127"></a><span class="cm">   *</span>
<a name="gbab-128"></a><span class="cm">   *   FT_AUTOHINTER_SCRIPT_LATIN ::</span>
<a name="gbab-129"></a><span class="cm">   *     Apply the latin auto-hinter.  For the auto-hinter, `latin&#39; is a</span>
<a name="gbab-130"></a><span class="cm">   *     very broad term, including Cyrillic and Greek also since characters</span>
<a name="gbab-131"></a><span class="cm">   *     from those scripts share the same design constraints.</span>
<a name="gbab-132"></a><span class="cm">   *</span>
<a name="gbab-133"></a><span class="cm">   *     By default, characters from the following Unicode ranges are</span>
<a name="gbab-134"></a><span class="cm">   *     assigned to this submodule.</span>
<a name="gbab-135"></a><span class="cm">   *</span>
<a name="gbab-136"></a><span class="cm">   *     {</span>
<a name="gbab-137"></a><span class="cm">   *       U+0020 - U+007F  // Basic Latin (no control characters)</span>
<a name="gbab-138"></a><span class="cm">   *       U+00A0 - U+00FF  // Latin-1 Supplement (no control characters)</span>
<a name="gbab-139"></a><span class="cm">   *       U+0100 - U+017F  // Latin Extended-A</span>
<a name="gbab-140"></a><span class="cm">   *       U+0180 - U+024F  // Latin Extended-B</span>
<a name="gbab-141"></a><span class="cm">   *       U+0250 - U+02AF  // IPA Extensions</span>
<a name="gbab-142"></a><span class="cm">   *       U+02B0 - U+02FF  // Spacing Modifier Letters</span>
<a name="gbab-143"></a><span class="cm">   *       U+0300 - U+036F  // Combining Diacritical Marks</span>
<a name="gbab-144"></a><span class="cm">   *       U+0370 - U+03FF  // Greek and Coptic</span>
<a name="gbab-145"></a><span class="cm">   *       U+0400 - U+04FF  // Cyrillic</span>
<a name="gbab-146"></a><span class="cm">   *       U+0500 - U+052F  // Cyrillic Supplement</span>
<a name="gbab-147"></a><span class="cm">   *       U+1D00 - U+1D7F  // Phonetic Extensions</span>
<a name="gbab-148"></a><span class="cm">   *       U+1D80 - U+1DBF  // Phonetic Extensions Supplement</span>
<a name="gbab-149"></a><span class="cm">   *       U+1DC0 - U+1DFF  // Combining Diacritical Marks Supplement</span>
<a name="gbab-150"></a><span class="cm">   *       U+1E00 - U+1EFF  // Latin Extended Additional</span>
<a name="gbab-151"></a><span class="cm">   *       U+1F00 - U+1FFF  // Greek Extended</span>
<a name="gbab-152"></a><span class="cm">   *       U+2000 - U+206F  // General Punctuation</span>
<a name="gbab-153"></a><span class="cm">   *       U+2070 - U+209F  // Superscripts and Subscripts</span>
<a name="gbab-154"></a><span class="cm">   *       U+20A0 - U+20CF  // Currency Symbols</span>
<a name="gbab-155"></a><span class="cm">   *       U+2150 - U+218F  // Number Forms</span>
<a name="gbab-156"></a><span class="cm">   *       U+2460 - U+24FF  // Enclosed Alphanumerics</span>
<a name="gbab-157"></a><span class="cm">   *       U+2C60 - U+2C7F  // Latin Extended-C</span>
<a name="gbab-158"></a><span class="cm">   *       U+2DE0 - U+2DFF  // Cyrillic Extended-A</span>
<a name="gbab-159"></a><span class="cm">   *       U+2E00 - U+2E7F  // Supplemental Punctuation</span>
<a name="gbab-160"></a><span class="cm">   *       U+A640 - U+A69F  // Cyrillic Extended-B</span>
<a name="gbab-161"></a><span class="cm">   *       U+A720 - U+A7FF  // Latin Extended-D</span>
<a name="gbab-162"></a><span class="cm">   *       U+FB00 - U+FB06  // Alphab. Present. Forms (Latin Ligatures)</span>
<a name="gbab-163"></a><span class="cm">   *      U+1D400 - U+1D7FF // Mathematical Alphanumeric Symbols</span>
<a name="gbab-164"></a><span class="cm">   *      U+1F100 - U+1F1FF // Enclosed Alphanumeric Supplement</span>
<a name="gbab-165"></a><span class="cm">   *     }</span>
<a name="gbab-166"></a><span class="cm">   *</span>
<a name="gbab-167"></a><span class="cm">   *   FT_AUTOHINTER_SCRIPT_CJK ::</span>
<a name="gbab-168"></a><span class="cm">   *     Apply the CJK auto-hinter, covering Chinese, Japanese, Korean, old</span>
<a name="gbab-169"></a><span class="cm">   *     Vietnamese, and some other scripts.</span>
<a name="gbab-170"></a><span class="cm">   *</span>
<a name="gbab-171"></a><span class="cm">   *     By default, characters from the following Unicode ranges are</span>
<a name="gbab-172"></a><span class="cm">   *     assigned to this submodule.</span>
<a name="gbab-173"></a><span class="cm">   *</span>
<a name="gbab-174"></a><span class="cm">   *     {</span>
<a name="gbab-175"></a><span class="cm">   *       U+1100 - U+11FF  // Hangul Jamo</span>
<a name="gbab-176"></a><span class="cm">   *       U+2E80 - U+2EFF  // CJK Radicals Supplement</span>
<a name="gbab-177"></a><span class="cm">   *       U+2F00 - U+2FDF  // Kangxi Radicals</span>
<a name="gbab-178"></a><span class="cm">   *       U+2FF0 - U+2FFF  // Ideographic Description Characters</span>
<a name="gbab-179"></a><span class="cm">   *       U+3000 - U+303F  // CJK Symbols and Punctuation</span>
<a name="gbab-180"></a><span class="cm">   *       U+3040 - U+309F  // Hiragana</span>
<a name="gbab-181"></a><span class="cm">   *       U+30A0 - U+30FF  // Katakana</span>
<a name="gbab-182"></a><span class="cm">   *       U+3100 - U+312F  // Bopomofo</span>
<a name="gbab-183"></a><span class="cm">   *       U+3130 - U+318F  // Hangul Compatibility Jamo</span>
<a name="gbab-184"></a><span class="cm">   *       U+3190 - U+319F  // Kanbun</span>
<a name="gbab-185"></a><span class="cm">   *       U+31A0 - U+31BF  // Bopomofo Extended</span>
<a name="gbab-186"></a><span class="cm">   *       U+31C0 - U+31EF  // CJK Strokes</span>
<a name="gbab-187"></a><span class="cm">   *       U+31F0 - U+31FF  // Katakana Phonetic Extensions</span>
<a name="gbab-188"></a><span class="cm">   *       U+3200 - U+32FF  // Enclosed CJK Letters and Months</span>
<a name="gbab-189"></a><span class="cm">   *       U+3300 - U+33FF  // CJK Compatibility</span>
<a name="gbab-190"></a><span class="cm">   *       U+3400 - U+4DBF  // CJK Unified Ideographs Extension A</span>
<a name="gbab-191"></a><span class="cm">   *       U+4DC0 - U+4DFF  // Yijing Hexagram Symbols</span>
<a name="gbab-192"></a><span class="cm">   *       U+4E00 - U+9FFF  // CJK Unified Ideographs</span>
<a name="gbab-193"></a><span class="cm">   *       U+A960 - U+A97F  // Hangul Jamo Extended-A</span>
<a name="gbab-194"></a><span class="cm">   *       U+AC00 - U+D7AF  // Hangul Syllables</span>
<a name="gbab-195"></a><span class="cm">   *       U+D7B0 - U+D7FF  // Hangul Jamo Extended-B</span>
<a name="gbab-196"></a><span class="cm">   *       U+F900 - U+FAFF  // CJK Compatibility Ideographs</span>
<a name="gbab-197"></a><span class="cm">   *       U+FE10 - U+FE1F  // Vertical forms</span>
<a name="gbab-198"></a><span class="cm">   *       U+FE30 - U+FE4F  // CJK Compatibility Forms</span>
<a name="gbab-199"></a><span class="cm">   *       U+FF00 - U+FFEF  // Halfwidth and Fullwidth Forms</span>
<a name="gbab-200"></a><span class="cm">   *      U+1B000 - U+1B0FF // Kana Supplement</span>
<a name="gbab-201"></a><span class="cm">   *      U+1D300 - U+1D35F // Tai Xuan Hing Symbols</span>
<a name="gbab-202"></a><span class="cm">   *      U+1F200 - U+1F2FF // Enclosed Ideographic Supplement</span>
<a name="gbab-203"></a><span class="cm">   *      U+20000 - U+2A6DF // CJK Unified Ideographs Extension B</span>
<a name="gbab-204"></a><span class="cm">   *      U+2A700 - U+2B73F // CJK Unified Ideographs Extension C</span>
<a name="gbab-205"></a><span class="cm">   *      U+2B740 - U+2B81F // CJK Unified Ideographs Extension D</span>
<a name="gbab-206"></a><span class="cm">   *      U+2F800 - U+2FA1F // CJK Compatibility Ideographs Supplement</span>
<a name="gbab-207"></a><span class="cm">   *     }</span>
<a name="gbab-208"></a><span class="cm">   *</span>
<a name="gbab-209"></a><span class="cm">   *   FT_AUTOHINTER_SCRIPT_INDIC ::</span>
<a name="gbab-210"></a><span class="cm">   *     Apply the indic auto-hinter, covering all major scripts from the</span>
<a name="gbab-211"></a><span class="cm">   *     Indian sub-continent and some other related scripts like Thai, Lao,</span>
<a name="gbab-212"></a><span class="cm">   *     or Tibetan.</span>
<a name="gbab-213"></a><span class="cm">   *</span>
<a name="gbab-214"></a><span class="cm">   *     By default, characters from the following Unicode ranges are</span>
<a name="gbab-215"></a><span class="cm">   *     assigned to this submodule.</span>
<a name="gbab-216"></a><span class="cm">   *</span>
<a name="gbab-217"></a><span class="cm">   *     {</span>
<a name="gbab-218"></a><span class="cm">   *       U+0900 - U+0DFF  // Indic Range</span>
<a name="gbab-219"></a><span class="cm">   *       U+0F00 - U+0FFF  // Tibetan</span>
<a name="gbab-220"></a><span class="cm">   *       U+1900 - U+194F  // Limbu</span>
<a name="gbab-221"></a><span class="cm">   *       U+1B80 - U+1BBF  // Sundanese</span>
<a name="gbab-222"></a><span class="cm">   *       U+A800 - U+A82F  // Syloti Nagri</span>
<a name="gbab-223"></a><span class="cm">   *       U+ABC0 - U+ABFF  // Meetei Mayek</span>
<a name="gbab-224"></a><span class="cm">   *      U+11800 - U+118DF // Sharada</span>
<a name="gbab-225"></a><span class="cm">   *     }</span>
<a name="gbab-226"></a><span class="cm">   *</span>
<a name="gbab-227"></a><span class="cm">   *     Note that currently Indic support is rudimentary only, missing blue</span>
<a name="gbab-228"></a><span class="cm">   *     zone support.</span>
<a name="gbab-229"></a><span class="cm">   *</span>
<a name="gbab-230"></a><span class="cm">   */</span>
<a name="gbab-231"></a><span class="cp">#define FT_AUTOHINTER_SCRIPT_NONE   0</span>
<a name="gbab-232"></a><span class="cp">#define FT_AUTOHINTER_SCRIPT_LATIN  1</span>
<a name="gbab-233"></a><span class="cp">#define FT_AUTOHINTER_SCRIPT_CJK    2</span>
<a name="gbab-234"></a><span class="cp">#define FT_AUTOHINTER_SCRIPT_INDIC  3</span>
<a name="gbab-235"></a>
<a name="gbab-236"></a>
<a name="gbab-237"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-238"></a><span class="cm">   *</span>
<a name="gbab-239"></a><span class="cm">   * @struct:</span>
<a name="gbab-240"></a><span class="cm">   *   FT_Prop_GlyphToScriptMap</span>
<a name="gbab-241"></a><span class="cm">   *</span>
<a name="gbab-242"></a><span class="cm">   * @description:</span>
<a name="gbab-243"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-244"></a><span class="cm">   *</span>
<a name="gbab-245"></a><span class="cm">   *   The data exchange structure for the @glyph-to-script-map property.</span>
<a name="gbab-246"></a><span class="cm">   *</span>
<a name="gbab-247"></a><span class="cm">   */</span>
<a name="gbab-248"></a>   <span class="k">typedef</span> <span class="k">struct</span>  <span class="n">FT_Prop_GlyphToScriptMap_</span>
<a name="gbab-249"></a>   <span class="p">{</span>
<a name="gbab-250"></a>     <span class="n">FT_Face</span>   <span class="n">face</span><span class="p">;</span>
<a name="gbab-251"></a>    <span class="n">FT_UShort</span><span class="o">*</span>  <span class="n">map</span><span class="p">;</span>
<a name="gbab-252"></a>
<a name="gbab-253"></a>   <span class="p">}</span> <span class="n">FT_Prop_GlyphToScriptMap</span><span class="p">;</span>
<a name="gbab-254"></a>
<a name="gbab-255"></a>
<a name="gbab-256"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-257"></a><span class="cm">   *</span>
<a name="gbab-258"></a><span class="cm">   * @property:</span>
<a name="gbab-259"></a><span class="cm">   *   fallback-script</span>
<a name="gbab-260"></a><span class="cm">   *</span>
<a name="gbab-261"></a><span class="cm">   * @description:</span>
<a name="gbab-262"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-263"></a><span class="cm">   *</span>
<a name="gbab-264"></a><span class="cm">   *   If no auto-hinter script module can be assigned to a glyph, a</span>
<a name="gbab-265"></a><span class="cm">   *   fallback script gets assigned to it (see also the</span>
<a name="gbab-266"></a><span class="cm">   *   @glyph-to-script-map property).  By default, this is</span>
<a name="gbab-267"></a><span class="cm">   *   @FT_AUTOHINTER_SCRIPT_CJK.  Using the `fallback-script&#39; property,</span>
<a name="gbab-268"></a><span class="cm">   *   this fallback value can be changed.</span>
<a name="gbab-269"></a><span class="cm">   *</span>
<a name="gbab-270"></a><span class="cm">   *   {</span>
<a name="gbab-271"></a><span class="cm">   *     FT_Library  library;</span>
<a name="gbab-272"></a><span class="cm">   *     FT_UInt     fallback_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<a name="gbab-273"></a><span class="cm">   *</span>
<a name="gbab-274"></a><span class="cm">   *</span>
<a name="gbab-275"></a><span class="cm">   *     FT_Init_FreeType( &amp;library );</span>
<a name="gbab-276"></a><span class="cm">   *</span>
<a name="gbab-277"></a><span class="cm">   *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<a name="gbab-278"></a><span class="cm">   *                               &quot;fallback-script&quot;, &amp;fallback_script );</span>
<a name="gbab-279"></a><span class="cm">   *   }</span>
<a name="gbab-280"></a><span class="cm">   *</span>
<a name="gbab-281"></a><span class="cm">   * @note:</span>
<a name="gbab-282"></a><span class="cm">   *   This property can be used with @FT_Property_Get also.</span>
<a name="gbab-283"></a><span class="cm">   *</span>
<a name="gbab-284"></a><span class="cm">   *   It&#39;s important to use the right timing for changing this value: The</span>
<a name="gbab-285"></a><span class="cm">   *   creation of the glyph-to-script map that eventually uses the</span>
<a name="gbab-286"></a><span class="cm">   *   fallback script value gets triggered either by setting or reading a</span>
<a name="gbab-287"></a><span class="cm">   *   face-specific property like @glyph-to-script-map, or by auto-hinting</span>
<a name="gbab-288"></a><span class="cm">   *   any glyph from that face.  In particular, if you have already created</span>
<a name="gbab-289"></a><span class="cm">   *   an @FT_Face structure but not loaded any glyph (using the</span>
<a name="gbab-290"></a><span class="cm">   *   auto-hinter), a change of the fallback script will affect this face.</span>
<a name="gbab-291"></a><span class="cm">   *</span>
<a name="gbab-292"></a><span class="cm">   */</span>
<a name="gbab-293"></a>
<a name="gbab-294"></a>
<a name="gbab-295"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-296"></a><span class="cm">   *</span>
<a name="gbab-297"></a><span class="cm">   * @property:</span>
<a name="gbab-298"></a><span class="cm">   *   default-script</span>
<a name="gbab-299"></a><span class="cm">   *</span>
<a name="gbab-300"></a><span class="cm">   * @description:</span>
<a name="gbab-301"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-302"></a><span class="cm">   *</span>
<a name="gbab-303"></a><span class="cm">   *   If FreeType gets compiled with FT_CONFIG_OPTION_USE_HARFBUZZ to make</span>
<a name="gbab-304"></a><span class="cm">   *   the HarfBuzz library access OpenType features for getting better</span>
<a name="gbab-305"></a><span class="cm">   *   glyph coverages, this property sets the (auto-fitter) script to be</span>
<a name="gbab-306"></a><span class="cm">   *   used for the default (OpenType) script data of a font&#39;s GSUB table.</span>
<a name="gbab-307"></a><span class="cm">   *   Features for the default script are intended for all scripts not</span>
<a name="gbab-308"></a><span class="cm">   *   explicitly handled in GSUB; an example is a `dlig&#39; feature,</span>
<a name="gbab-309"></a><span class="cm">   *   containing the combination of the characters `T&#39;, `E&#39;, and `L&#39; to</span>
<a name="gbab-310"></a><span class="cm">   *   form a `TEL&#39; ligature.</span>
<a name="gbab-311"></a><span class="cm">   *</span>
<a name="gbab-312"></a><span class="cm">   *   By default, this is @FT_AUTOHINTER_SCRIPT_LATIN.  Using the</span>
<a name="gbab-313"></a><span class="cm">   *   `default-script&#39; property, this default value can be changed.</span>
<a name="gbab-314"></a><span class="cm">   *</span>
<a name="gbab-315"></a><span class="cm">   *   {</span>
<a name="gbab-316"></a><span class="cm">   *     FT_Library  library;</span>
<a name="gbab-317"></a><span class="cm">   *     FT_UInt     default_script = FT_AUTOHINTER_SCRIPT_NONE;</span>
<a name="gbab-318"></a><span class="cm">   *</span>
<a name="gbab-319"></a><span class="cm">   *</span>
<a name="gbab-320"></a><span class="cm">   *     FT_Init_FreeType( &amp;library );</span>
<a name="gbab-321"></a><span class="cm">   *</span>
<a name="gbab-322"></a><span class="cm">   *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<a name="gbab-323"></a><span class="cm">   *                               &quot;default-script&quot;, &amp;default_script );</span>
<a name="gbab-324"></a><span class="cm">   *   }</span>
<a name="gbab-325"></a><span class="cm">   *</span>
<a name="gbab-326"></a><span class="cm">   * @note:</span>
<a name="gbab-327"></a><span class="cm">   *   This property can be used with @FT_Property_Get also.</span>
<a name="gbab-328"></a><span class="cm">   *</span>
<a name="gbab-329"></a><span class="cm">   *   It&#39;s important to use the right timing for changing this value: The</span>
<a name="gbab-330"></a><span class="cm">   *   creation of the glyph-to-script map that eventually uses the</span>
<a name="gbab-331"></a><span class="cm">   *   default script value gets triggered either by setting or reading a</span>
<a name="gbab-332"></a><span class="cm">   *   face-specific property like @glyph-to-script-map, or by auto-hinting</span>
<a name="gbab-333"></a><span class="cm">   *   any glyph from that face.  In particular, if you have already created</span>
<a name="gbab-334"></a><span class="cm">   *   an @FT_Face structure but not loaded any glyph (using the</span>
<a name="gbab-335"></a><span class="cm">   *   auto-hinter), a change of the default script will affect this face.</span>
<a name="gbab-336"></a><span class="cm">   *</span>
<a name="gbab-337"></a><span class="cm">   */</span>
<a name="gbab-338"></a>
<a name="gbab-339"></a>
<a name="gbab-340"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-341"></a><span class="cm">   *</span>
<a name="gbab-342"></a><span class="cm">   * @property:</span>
<a name="gbab-343"></a><span class="cm">   *   increase-x-height</span>
<a name="gbab-344"></a><span class="cm">   *</span>
<a name="gbab-345"></a><span class="cm">   * @description:</span>
<a name="gbab-346"></a><span class="cm">   *   For ppem values in the range 6~&lt;= ppem &lt;= `increase-x-height&#39;, round</span>
<a name="gbab-347"></a><span class="cm">   *   up the font&#39;s x~height much more often than normally.  If the value</span>
<a name="gbab-348"></a><span class="cm">   *   is set to~0, which is the default, this feature is switched off.  Use</span>
<a name="gbab-349"></a><span class="cm">   *   this property to improve the legibility of small font sizes if</span>
<a name="gbab-350"></a><span class="cm">   *   necessary.</span>
<a name="gbab-351"></a><span class="cm">   *</span>
<a name="gbab-352"></a><span class="cm">   *   {</span>
<a name="gbab-353"></a><span class="cm">   *     FT_Library               library;</span>
<a name="gbab-354"></a><span class="cm">   *     FT_Face                  face;</span>
<a name="gbab-355"></a><span class="cm">   *     FT_Prop_IncreaseXHeight  prop;</span>
<a name="gbab-356"></a><span class="cm">   *</span>
<a name="gbab-357"></a><span class="cm">   *</span>
<a name="gbab-358"></a><span class="cm">   *     FT_Init_FreeType( &amp;library );</span>
<a name="gbab-359"></a><span class="cm">   *     FT_New_Face( library, &quot;foo.ttf&quot;, 0, &amp;face );</span>
<a name="gbab-360"></a><span class="cm">   *     FT_Set_Char_Size( face, 10 * 64, 0, 72, 0 );</span>
<a name="gbab-361"></a><span class="cm">   *</span>
<a name="gbab-362"></a><span class="cm">   *     prop.face  = face;</span>
<a name="gbab-363"></a><span class="cm">   *     prop.limit = 14;</span>
<a name="gbab-364"></a><span class="cm">   *</span>
<a name="gbab-365"></a><span class="cm">   *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<a name="gbab-366"></a><span class="cm">   *                               &quot;increase-x-height&quot;, &amp;prop );</span>
<a name="gbab-367"></a><span class="cm">   *   }</span>
<a name="gbab-368"></a><span class="cm">   *</span>
<a name="gbab-369"></a><span class="cm">   * @note:</span>
<a name="gbab-370"></a><span class="cm">   *   This property can be used with @FT_Property_Get also.</span>
<a name="gbab-371"></a><span class="cm">   *</span>
<a name="gbab-372"></a><span class="cm">   *   Set this value right after calling @FT_Set_Char_Size, but before</span>
<a name="gbab-373"></a><span class="cm">   *   loading any glyph (using the auto-hinter).</span>
<a name="gbab-374"></a><span class="cm">   *</span>
<a name="gbab-375"></a><span class="cm">   */</span>
<a name="gbab-376"></a>
<a name="gbab-377"></a>
<a name="gbab-378"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-379"></a><span class="cm">   *</span>
<a name="gbab-380"></a><span class="cm">   * @struct:</span>
<a name="gbab-381"></a><span class="cm">   *   FT_Prop_IncreaseXHeight</span>
<a name="gbab-382"></a><span class="cm">   *</span>
<a name="gbab-383"></a><span class="cm">   * @description:</span>
<a name="gbab-384"></a><span class="cm">   *   The data exchange structure for the @increase-x-height property.</span>
<a name="gbab-385"></a><span class="cm">   *</span>
<a name="gbab-386"></a><span class="cm">   */</span>
<a name="gbab-387"></a>   <span class="k">typedef</span> <span class="k">struct</span>  <span class="n">FT_Prop_IncreaseXHeight_</span>
<a name="gbab-388"></a>   <span class="p">{</span>
<a name="gbab-389"></a>     <span class="n">FT_Face</span>  <span class="n">face</span><span class="p">;</span>
<a name="gbab-390"></a>     <span class="n">FT_UInt</span>  <span class="n">limit</span><span class="p">;</span>
<a name="gbab-391"></a>
<a name="gbab-392"></a>   <span class="p">}</span> <span class="n">FT_Prop_IncreaseXHeight</span><span class="p">;</span>
<a name="gbab-393"></a>
<a name="gbab-394"></a>
<a name="gbab-395"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-396"></a><span class="cm">   *</span>
<a name="gbab-397"></a><span class="cm">   * @property:</span>
<a name="gbab-398"></a><span class="cm">   *   warping</span>
<a name="gbab-399"></a><span class="cm">   *</span>
<a name="gbab-400"></a><span class="cm">   * @description:</span>
<a name="gbab-401"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-402"></a><span class="cm">   *</span>
<a name="gbab-403"></a><span class="cm">   *   If FreeType gets compiled with option AF_CONFIG_OPTION_USE_WARPER to</span>
<a name="gbab-404"></a><span class="cm">   *   activate the warp hinting code in the auto-hinter, this property</span>
<a name="gbab-405"></a><span class="cm">   *   switches warping on and off.</span>
<a name="gbab-406"></a><span class="cm">   *</span>
<a name="gbab-407"></a><span class="cm">   *   Warping only works in `light&#39; auto-hinting mode.  The idea of the</span>
<a name="gbab-408"></a><span class="cm">   *   code is to slightly scale and shift a glyph along the non-hinted</span>
<a name="gbab-409"></a><span class="cm">   *   dimension (which is usually the horizontal axis) so that as much of</span>
<a name="gbab-410"></a><span class="cm">   *   its segments are aligned (more or less) to the grid.  To find out a</span>
<a name="gbab-411"></a><span class="cm">   *   glyph&#39;s optimal scaling and shifting value, various parameter</span>
<a name="gbab-412"></a><span class="cm">   *   combinations are tried and scored.</span>
<a name="gbab-413"></a><span class="cm">   *</span>
<a name="gbab-414"></a><span class="cm">   *   By default, warping is off.  The example below shows how to switch on</span>
<a name="gbab-415"></a><span class="cm">   *   warping (omitting the error handling).</span>
<a name="gbab-416"></a><span class="cm">   *</span>
<a name="gbab-417"></a><span class="cm">   *   {</span>
<a name="gbab-418"></a><span class="cm">   *     FT_Library  library;</span>
<a name="gbab-419"></a><span class="cm">   *     FT_Bool     warping = 1;</span>
<a name="gbab-420"></a><span class="cm">   *</span>
<a name="gbab-421"></a><span class="cm">   *</span>
<a name="gbab-422"></a><span class="cm">   *     FT_Init_FreeType( &amp;library );</span>
<a name="gbab-423"></a><span class="cm">   *</span>
<a name="gbab-424"></a><span class="cm">   *     FT_Property_Set( library, &quot;autofitter&quot;,</span>
<a name="gbab-425"></a><span class="cm">   *                               &quot;warping&quot;, &amp;warping );</span>
<a name="gbab-426"></a><span class="cm">   *   }</span>
<a name="gbab-427"></a><span class="cm">   *</span>
<a name="gbab-428"></a><span class="cm">   * @note:</span>
<a name="gbab-429"></a><span class="cm">   *   This property can be used with @FT_Property_Get also.</span>
<a name="gbab-430"></a><span class="cm">   *</span>
<a name="gbab-431"></a><span class="cm">   *   The warping code can also change advance widths.  Have a look at the</span>
<a name="gbab-432"></a><span class="cm">   *   `lsb_delta&#39; and `rsb_delta&#39; fields in the @FT_GlyphSlotRec structure</span>
<a name="gbab-433"></a><span class="cm">   *   for details on improving inter-glyph distances while rendering.</span>
<a name="gbab-434"></a><span class="cm">   *</span>
<a name="gbab-435"></a><span class="cm">   *   Since warping is a global property of the auto-hinter it is best to</span>
<a name="gbab-436"></a><span class="cm">   *   change its value before rendering any face.  Otherwise, you should</span>
<a name="gbab-437"></a><span class="cm">   *   reload all faces that get auto-hinted in `light&#39; hinting mode.</span>
<a name="gbab-438"></a><span class="cm">   *</span>
<a name="gbab-439"></a><span class="cm">   */</span>
<a name="gbab-440"></a>
<a name="gbab-441"></a>
<a name="gbab-442"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-443"></a><span class="cm">   *</span>
<a name="gbab-444"></a><span class="cm">   * @property:</span>
<a name="gbab-445"></a><span class="cm">   *   no-stem-darkening[autofit]</span>
<a name="gbab-446"></a><span class="cm">   *</span>
<a name="gbab-447"></a><span class="cm">   * @description:</span>
<a name="gbab-448"></a><span class="cm">   *   *Experimental* *only,* *requires* *linear* *alpha* *blending* *and*</span>
<a name="gbab-449"></a><span class="cm">   *   *gamma* *correction*</span>
<a name="gbab-450"></a><span class="cm">   *</span>
<a name="gbab-451"></a><span class="cm">   *   Stem darkening emboldens glyphs at smaller sizes to make them more</span>
<a name="gbab-452"></a><span class="cm">   *   readable on common low-DPI screens when using linear alpha blending</span>
<a name="gbab-453"></a><span class="cm">   *   and gamma correction, see @FT_Render_Glyph.  When not using linear</span>
<a name="gbab-454"></a><span class="cm">   *   alpha blending and gamma correction, glyphs will appear heavy and</span>
<a name="gbab-455"></a><span class="cm">   *   fuzzy!</span>
<a name="gbab-456"></a><span class="cm">   *</span>
<a name="gbab-457"></a><span class="cm">   *   Gamma correction essentially lightens fonts since shades of grey are</span>
<a name="gbab-458"></a><span class="cm">   *   shifted to higher pixel values (=~higher brightness) to match the</span>
<a name="gbab-459"></a><span class="cm">   *   original intention to the reality of our screens.  The side-effect is</span>
<a name="gbab-460"></a><span class="cm">   *   that glyphs `thin out&#39;.  Mac OS~X and Adobe&#39;s proprietary font</span>
<a name="gbab-461"></a><span class="cm">   *   rendering library implement a counter-measure: stem darkening at</span>
<a name="gbab-462"></a><span class="cm">   *   smaller sizes where shades of gray dominate.  By emboldening a glyph</span>
<a name="gbab-463"></a><span class="cm">   *   slightly in relation to its pixel size, individual pixels get higher</span>
<a name="gbab-464"></a><span class="cm">   *   coverage of filled-in outlines and are therefore `blacker&#39;.  This</span>
<a name="gbab-465"></a><span class="cm">   *   counteracts the `thinning out&#39; of glyphs, making text remain readable</span>
<a name="gbab-466"></a><span class="cm">   *   at smaller sizes.  All glyphs that pass through the auto-hinter will</span>
<a name="gbab-467"></a><span class="cm">   *   be emboldened unless this property is set to TRUE.</span>
<a name="gbab-468"></a><span class="cm">   *</span>
<a name="gbab-469"></a><span class="cm">   *   See the description of the CFF driver for algorithmic details.  Total</span>
<a name="gbab-470"></a><span class="cm">   *   consistency with the CFF driver is currently not achieved because the</span>
<a name="gbab-471"></a><span class="cm">   *   emboldening method differs and glyphs must be scaled down on the</span>
<a name="gbab-472"></a><span class="cm">   *   Y-axis to keep outline points inside their precomputed blue zones.</span>
<a name="gbab-473"></a><span class="cm">   *   The smaller the size (especially 9ppem and down), the higher the loss</span>
<a name="gbab-474"></a><span class="cm">   *   of emboldening versus the CFF driver.</span>
<a name="gbab-475"></a><span class="cm">   *</span>
<a name="gbab-476"></a><span class="cm">   */</span>
<a name="gbab-477"></a>
<a name="gbab-478"></a>
<a name="gbab-479"></a>  <span class="cm">/**************************************************************************</span>
<a name="gbab-480"></a><span class="cm">   *</span>
<a name="gbab-481"></a><span class="cm">   * @property:</span>
<a name="gbab-482"></a><span class="cm">   *   darkening-parameters[autofit]</span>
<a name="gbab-483"></a><span class="cm">   *</span>
<a name="gbab-484"></a><span class="cm">   * @description:</span>
<a name="gbab-485"></a><span class="cm">   *   *Experimental* *only*</span>
<a name="gbab-486"></a><span class="cm">   *</span>
<a name="gbab-487"></a><span class="cm">   *   See the description of the CFF driver for details.  This</span>
<a name="gbab-488"></a><span class="cm">   *   implementation appropriates the</span>
<a name="gbab-489"></a><span class="cm">   *   CFF_CONFIG_OPTION_DARKENING_PARAMETER_* #defines for consistency.</span>
<a name="gbab-490"></a><span class="cm">   *   Note the differences described in @no-stem-darkening[autofit].</span>
<a name="gbab-491"></a><span class="cm">   *</span>
<a name="gbab-492"></a><span class="cm">   */</span>
<a name="gbab-493"></a>
<a name="gbab-494"></a>
<a name="gbab-495"></a> <span class="cm">/* */</span>
<a name="gbab-496"></a>
<a name="gbab-497"></a>
<a name="gbab-498"></a><span class="n">FT_END_HEADER</span>
<a name="gbab-499"></a>
<a name="gbab-500"></a><span class="cp">#endif </span><span class="cm">/* FTAUTOH_H_ */</span><span class="cp"></span>
<a name="gbab-501"></a>
<a name="gbab-502"></a>
<a name="gbab-503"></a><span class="cm">/* END */</span>
</pre></div>
</td></tr></table>