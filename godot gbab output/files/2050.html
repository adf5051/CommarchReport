<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="gbab-1"></a><span class="cm">/* pngstruct.h - header file for PNG reference library</span>
<a name="gbab-2"></a><span class="cm"> *</span>
<a name="gbab-3"></a><span class="cm"> * Last changed in libpng 1.6.18 [July 23, 2015]</span>
<a name="gbab-4"></a><span class="cm"> * Copyright (c) 1998-2002,2004,2006-2015 Glenn Randers-Pehrson</span>
<a name="gbab-5"></a><span class="cm"> * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)</span>
<a name="gbab-6"></a><span class="cm"> * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)</span>
<a name="gbab-7"></a><span class="cm"> *</span>
<a name="gbab-8"></a><span class="cm"> * This code is released under the libpng license.</span>
<a name="gbab-9"></a><span class="cm"> * For conditions of distribution and use, see the disclaimer</span>
<a name="gbab-10"></a><span class="cm"> * and license in png.h</span>
<a name="gbab-11"></a><span class="cm"> */</span>
<a name="gbab-12"></a>
<a name="gbab-13"></a><span class="cm">/* The structure that holds the information to read and write PNG files.</span>
<a name="gbab-14"></a><span class="cm"> * The only people who need to care about what is inside of this are the</span>
<a name="gbab-15"></a><span class="cm"> * people who will be modifying the library for their own special needs.</span>
<a name="gbab-16"></a><span class="cm"> * It should NOT be accessed directly by an application.</span>
<a name="gbab-17"></a><span class="cm"> */</span>
<a name="gbab-18"></a>
<a name="gbab-19"></a><span class="cp">#ifndef PNGSTRUCT_H</span>
<a name="gbab-20"></a><span class="cp">#define PNGSTRUCT_H</span>
<a name="gbab-21"></a><span class="cm">/* zlib.h defines the structure z_stream, an instance of which is included</span>
<a name="gbab-22"></a><span class="cm"> * in this structure and is required for decompressing the LZ compressed</span>
<a name="gbab-23"></a><span class="cm"> * data in PNG files.</span>
<a name="gbab-24"></a><span class="cm"> */</span>
<a name="gbab-25"></a><span class="cp">#ifndef ZLIB_CONST</span>
<a name="gbab-26"></a>   <span class="cm">/* We must ensure that zlib uses &#39;const&#39; in declarations. */</span>
<a name="gbab-27"></a><span class="cp">#  define ZLIB_CONST</span>
<a name="gbab-28"></a><span class="cp">#endif</span>
<a name="gbab-29"></a><span class="cp">#include</span> <span class="cpf">&quot;zlib.h&quot;</span><span class="cp"></span>
<a name="gbab-30"></a><span class="cp">#ifdef const</span>
<a name="gbab-31"></a>   <span class="cm">/* zlib.h sometimes #defines const to nothing, undo this. */</span>
<a name="gbab-32"></a><span class="cp">#  undef const</span>
<a name="gbab-33"></a><span class="cp">#endif</span>
<a name="gbab-34"></a>
<a name="gbab-35"></a><span class="cm">/* zlib.h has mediocre z_const use before 1.2.6, this stuff is for compatibility</span>
<a name="gbab-36"></a><span class="cm"> * with older builds.</span>
<a name="gbab-37"></a><span class="cm"> */</span>
<a name="gbab-38"></a><span class="cp">#if ZLIB_VERNUM &lt; 0x1260</span>
<a name="gbab-39"></a><span class="cp">#  define PNGZ_MSG_CAST(s) png_constcast(char*,s)</span>
<a name="gbab-40"></a><span class="cp">#  define PNGZ_INPUT_CAST(b) png_constcast(png_bytep,b)</span>
<a name="gbab-41"></a><span class="cp">#else</span>
<a name="gbab-42"></a><span class="cp">#  define PNGZ_MSG_CAST(s) (s)</span>
<a name="gbab-43"></a><span class="cp">#  define PNGZ_INPUT_CAST(b) (b)</span>
<a name="gbab-44"></a><span class="cp">#endif</span>
<a name="gbab-45"></a>
<a name="gbab-46"></a><span class="cm">/* zlib.h declares a magic type &#39;uInt&#39; that limits the amount of data that zlib</span>
<a name="gbab-47"></a><span class="cm"> * can handle at once.  This type need be no larger than 16 bits (so maximum of</span>
<a name="gbab-48"></a><span class="cm"> * 65535), this define allows us to discover how big it is, but limited by the</span>
<a name="gbab-49"></a><span class="cm"> * maximuum for png_size_t.  The value can be overriden in a library build</span>
<a name="gbab-50"></a><span class="cm"> * (pngusr.h, or set it in CPPFLAGS) and it works to set it to a considerably</span>
<a name="gbab-51"></a><span class="cm"> * lower value (e.g. 255 works).  A lower value may help memory usage (slightly)</span>
<a name="gbab-52"></a><span class="cm"> * and may even improve performance on some systems (and degrade it on others.)</span>
<a name="gbab-53"></a><span class="cm"> */</span>
<a name="gbab-54"></a><span class="cp">#ifndef ZLIB_IO_MAX</span>
<a name="gbab-55"></a><span class="cp">#  define ZLIB_IO_MAX ((uInt)-1)</span>
<a name="gbab-56"></a><span class="cp">#endif</span>
<a name="gbab-57"></a>
<a name="gbab-58"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-59"></a><span class="cm">/* The type of a compression buffer list used by the write code. */</span>
<a name="gbab-60"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_compression_buffer</span>
<a name="gbab-61"></a><span class="p">{</span>
<a name="gbab-62"></a>   <span class="k">struct</span> <span class="n">png_compression_buffer</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<a name="gbab-63"></a>   <span class="n">png_byte</span>                       <span class="n">output</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="cm">/* actually zbuf_size */</span>
<a name="gbab-64"></a><span class="p">}</span> <span class="n">png_compression_buffer</span><span class="p">,</span> <span class="o">*</span><span class="n">png_compression_bufferp</span><span class="p">;</span>
<a name="gbab-65"></a>
<a name="gbab-66"></a><span class="cp">#define PNG_COMPRESSION_BUFFER_SIZE(pp)\</span>
<a name="gbab-67"></a><span class="cp">   (offsetof(png_compression_buffer, output) + (pp)-&gt;zbuffer_size)</span>
<a name="gbab-68"></a><span class="cp">#endif</span>
<a name="gbab-69"></a>
<a name="gbab-70"></a><span class="cm">/* Colorspace support; structures used in png_struct, png_info and in internal</span>
<a name="gbab-71"></a><span class="cm"> * functions to hold and communicate information about the color space.</span>
<a name="gbab-72"></a><span class="cm"> *</span>
<a name="gbab-73"></a><span class="cm"> * PNG_COLORSPACE_SUPPORTED is only required if the application will perform</span>
<a name="gbab-74"></a><span class="cm"> * colorspace corrections, otherwise all the colorspace information can be</span>
<a name="gbab-75"></a><span class="cm"> * skipped and the size of libpng can be reduced (significantly) by compiling</span>
<a name="gbab-76"></a><span class="cm"> * out the colorspace support.</span>
<a name="gbab-77"></a><span class="cm"> */</span>
<a name="gbab-78"></a><span class="cp">#ifdef PNG_COLORSPACE_SUPPORTED</span>
<a name="gbab-79"></a><span class="cm">/* The chromaticities of the red, green and blue colorants and the chromaticity</span>
<a name="gbab-80"></a><span class="cm"> * of the corresponding white point (i.e. of rgb(1.0,1.0,1.0)).</span>
<a name="gbab-81"></a><span class="cm"> */</span>
<a name="gbab-82"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_xy</span>
<a name="gbab-83"></a><span class="p">{</span>
<a name="gbab-84"></a>   <span class="n">png_fixed_point</span> <span class="n">redx</span><span class="p">,</span> <span class="n">redy</span><span class="p">;</span>
<a name="gbab-85"></a>   <span class="n">png_fixed_point</span> <span class="n">greenx</span><span class="p">,</span> <span class="n">greeny</span><span class="p">;</span>
<a name="gbab-86"></a>   <span class="n">png_fixed_point</span> <span class="n">bluex</span><span class="p">,</span> <span class="n">bluey</span><span class="p">;</span>
<a name="gbab-87"></a>   <span class="n">png_fixed_point</span> <span class="n">whitex</span><span class="p">,</span> <span class="n">whitey</span><span class="p">;</span>
<a name="gbab-88"></a><span class="p">}</span> <span class="n">png_xy</span><span class="p">;</span>
<a name="gbab-89"></a>
<a name="gbab-90"></a><span class="cm">/* The same data as above but encoded as CIE XYZ values.  When this data comes</span>
<a name="gbab-91"></a><span class="cm"> * from chromaticities the sum of the Y values is assumed to be 1.0</span>
<a name="gbab-92"></a><span class="cm"> */</span>
<a name="gbab-93"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_XYZ</span>
<a name="gbab-94"></a><span class="p">{</span>
<a name="gbab-95"></a>   <span class="n">png_fixed_point</span> <span class="n">red_X</span><span class="p">,</span> <span class="n">red_Y</span><span class="p">,</span> <span class="n">red_Z</span><span class="p">;</span>
<a name="gbab-96"></a>   <span class="n">png_fixed_point</span> <span class="n">green_X</span><span class="p">,</span> <span class="n">green_Y</span><span class="p">,</span> <span class="n">green_Z</span><span class="p">;</span>
<a name="gbab-97"></a>   <span class="n">png_fixed_point</span> <span class="n">blue_X</span><span class="p">,</span> <span class="n">blue_Y</span><span class="p">,</span> <span class="n">blue_Z</span><span class="p">;</span>
<a name="gbab-98"></a><span class="p">}</span> <span class="n">png_XYZ</span><span class="p">;</span>
<a name="gbab-99"></a><span class="cp">#endif </span><span class="cm">/* COLORSPACE */</span><span class="cp"></span>
<a name="gbab-100"></a>
<a name="gbab-101"></a><span class="cp">#if defined(PNG_COLORSPACE_SUPPORTED) || defined(PNG_GAMMA_SUPPORTED)</span>
<a name="gbab-102"></a><span class="cm">/* A colorspace is all the above plus, potentially, profile information;</span>
<a name="gbab-103"></a><span class="cm"> * however at present libpng does not use the profile internally so it is only</span>
<a name="gbab-104"></a><span class="cm"> * stored in the png_info struct (if iCCP is supported.)  The rendering intent</span>
<a name="gbab-105"></a><span class="cm"> * is retained here and is checked.</span>
<a name="gbab-106"></a><span class="cm"> *</span>
<a name="gbab-107"></a><span class="cm"> * The file gamma encoding information is also stored here and gamma correction</span>
<a name="gbab-108"></a><span class="cm"> * is done by libpng, whereas color correction must currently be done by the</span>
<a name="gbab-109"></a><span class="cm"> * application.</span>
<a name="gbab-110"></a><span class="cm"> */</span>
<a name="gbab-111"></a><span class="k">typedef</span> <span class="k">struct</span> <span class="n">png_colorspace</span>
<a name="gbab-112"></a><span class="p">{</span>
<a name="gbab-113"></a><span class="cp">#ifdef PNG_GAMMA_SUPPORTED</span>
<a name="gbab-114"></a>   <span class="n">png_fixed_point</span> <span class="n">gamma</span><span class="p">;</span>        <span class="cm">/* File gamma */</span>
<a name="gbab-115"></a><span class="cp">#endif</span>
<a name="gbab-116"></a>
<a name="gbab-117"></a><span class="cp">#ifdef PNG_COLORSPACE_SUPPORTED</span>
<a name="gbab-118"></a>   <span class="n">png_xy</span>      <span class="n">end_points_xy</span><span class="p">;</span>    <span class="cm">/* End points as chromaticities */</span>
<a name="gbab-119"></a>   <span class="n">png_XYZ</span>     <span class="n">end_points_XYZ</span><span class="p">;</span>   <span class="cm">/* End points as CIE XYZ colorant values */</span>
<a name="gbab-120"></a>   <span class="n">png_uint_16</span> <span class="n">rendering_intent</span><span class="p">;</span> <span class="cm">/* Rendering intent of a profile */</span>
<a name="gbab-121"></a><span class="cp">#endif</span>
<a name="gbab-122"></a>
<a name="gbab-123"></a>   <span class="cm">/* Flags are always defined to simplify the code. */</span>
<a name="gbab-124"></a>   <span class="n">png_uint_16</span> <span class="n">flags</span><span class="p">;</span>            <span class="cm">/* As defined below */</span>
<a name="gbab-125"></a><span class="p">}</span> <span class="n">png_colorspace</span><span class="p">,</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_colorspacerp</span><span class="p">;</span>
<a name="gbab-126"></a>
<a name="gbab-127"></a><span class="k">typedef</span> <span class="k">const</span> <span class="n">png_colorspace</span> <span class="o">*</span> <span class="n">PNG_RESTRICT</span> <span class="n">png_const_colorspacerp</span><span class="p">;</span>
<a name="gbab-128"></a>
<a name="gbab-129"></a><span class="cm">/* General flags for the &#39;flags&#39; field */</span>
<a name="gbab-130"></a><span class="cp">#define PNG_COLORSPACE_HAVE_GAMMA           0x0001</span>
<a name="gbab-131"></a><span class="cp">#define PNG_COLORSPACE_HAVE_ENDPOINTS       0x0002</span>
<a name="gbab-132"></a><span class="cp">#define PNG_COLORSPACE_HAVE_INTENT          0x0004</span>
<a name="gbab-133"></a><span class="cp">#define PNG_COLORSPACE_FROM_gAMA            0x0008</span>
<a name="gbab-134"></a><span class="cp">#define PNG_COLORSPACE_FROM_cHRM            0x0010</span>
<a name="gbab-135"></a><span class="cp">#define PNG_COLORSPACE_FROM_sRGB            0x0020</span>
<a name="gbab-136"></a><span class="cp">#define PNG_COLORSPACE_ENDPOINTS_MATCH_sRGB 0x0040</span>
<a name="gbab-137"></a><span class="cp">#define PNG_COLORSPACE_MATCHES_sRGB         0x0080 </span><span class="cm">/* exact match on profile */</span><span class="cp"></span>
<a name="gbab-138"></a><span class="cp">#define PNG_COLORSPACE_INVALID              0x8000</span>
<a name="gbab-139"></a><span class="cp">#define PNG_COLORSPACE_CANCEL(flags)        (0xffff ^ (flags))</span>
<a name="gbab-140"></a><span class="cp">#endif </span><span class="cm">/* COLORSPACE || GAMMA */</span><span class="cp"></span>
<a name="gbab-141"></a>
<a name="gbab-142"></a><span class="k">struct</span> <span class="n">png_struct_def</span>
<a name="gbab-143"></a><span class="p">{</span>
<a name="gbab-144"></a><span class="cp">#ifdef PNG_SETJMP_SUPPORTED</span>
<a name="gbab-145"></a>   <span class="kt">jmp_buf</span> <span class="n">jmp_buf_local</span><span class="p">;</span>     <span class="cm">/* New name in 1.6.0 for jmp_buf in png_struct */</span>
<a name="gbab-146"></a>   <span class="n">png_longjmp_ptr</span> <span class="n">longjmp_fn</span><span class="p">;</span><span class="cm">/* setjmp non-local goto function. */</span>
<a name="gbab-147"></a>   <span class="kt">jmp_buf</span> <span class="o">*</span><span class="n">jmp_buf_ptr</span><span class="p">;</span>      <span class="cm">/* passed to longjmp_fn */</span>
<a name="gbab-148"></a>   <span class="kt">size_t</span> <span class="n">jmp_buf_size</span><span class="p">;</span>       <span class="cm">/* size of the above, if allocated */</span>
<a name="gbab-149"></a><span class="cp">#endif</span>
<a name="gbab-150"></a>   <span class="n">png_error_ptr</span> <span class="n">error_fn</span><span class="p">;</span>    <span class="cm">/* function for printing errors and aborting */</span>
<a name="gbab-151"></a><span class="cp">#ifdef PNG_WARNINGS_SUPPORTED</span>
<a name="gbab-152"></a>   <span class="n">png_error_ptr</span> <span class="n">warning_fn</span><span class="p">;</span>  <span class="cm">/* function for printing warnings */</span>
<a name="gbab-153"></a><span class="cp">#endif</span>
<a name="gbab-154"></a>   <span class="n">png_voidp</span> <span class="n">error_ptr</span><span class="p">;</span>       <span class="cm">/* user supplied struct for error functions */</span>
<a name="gbab-155"></a>   <span class="n">png_rw_ptr</span> <span class="n">write_data_fn</span><span class="p">;</span>  <span class="cm">/* function for writing output data */</span>
<a name="gbab-156"></a>   <span class="n">png_rw_ptr</span> <span class="n">read_data_fn</span><span class="p">;</span>   <span class="cm">/* function for reading input data */</span>
<a name="gbab-157"></a>   <span class="n">png_voidp</span> <span class="n">io_ptr</span><span class="p">;</span>          <span class="cm">/* ptr to application struct for I/O functions */</span>
<a name="gbab-158"></a>
<a name="gbab-159"></a><span class="cp">#ifdef PNG_READ_USER_TRANSFORM_SUPPORTED</span>
<a name="gbab-160"></a>   <span class="n">png_user_transform_ptr</span> <span class="n">read_user_transform_fn</span><span class="p">;</span> <span class="cm">/* user read transform */</span>
<a name="gbab-161"></a><span class="cp">#endif</span>
<a name="gbab-162"></a>
<a name="gbab-163"></a><span class="cp">#ifdef PNG_WRITE_USER_TRANSFORM_SUPPORTED</span>
<a name="gbab-164"></a>   <span class="n">png_user_transform_ptr</span> <span class="n">write_user_transform_fn</span><span class="p">;</span> <span class="cm">/* user write transform */</span>
<a name="gbab-165"></a><span class="cp">#endif</span>
<a name="gbab-166"></a>
<a name="gbab-167"></a><span class="cm">/* These were added in libpng-1.0.2 */</span>
<a name="gbab-168"></a><span class="cp">#ifdef PNG_USER_TRANSFORM_PTR_SUPPORTED</span>
<a name="gbab-169"></a><span class="cp">#if defined(PNG_READ_USER_TRANSFORM_SUPPORTED) || \</span>
<a name="gbab-170"></a><span class="cp">    defined(PNG_WRITE_USER_TRANSFORM_SUPPORTED)</span>
<a name="gbab-171"></a>   <span class="n">png_voidp</span> <span class="n">user_transform_ptr</span><span class="p">;</span> <span class="cm">/* user supplied struct for user transform */</span>
<a name="gbab-172"></a>   <span class="n">png_byte</span> <span class="n">user_transform_depth</span><span class="p">;</span>    <span class="cm">/* bit depth of user transformed pixels */</span>
<a name="gbab-173"></a>   <span class="n">png_byte</span> <span class="n">user_transform_channels</span><span class="p">;</span> <span class="cm">/* channels in user transformed pixels */</span>
<a name="gbab-174"></a><span class="cp">#endif</span>
<a name="gbab-175"></a><span class="cp">#endif</span>
<a name="gbab-176"></a>
<a name="gbab-177"></a>   <span class="n">png_uint_32</span> <span class="n">mode</span><span class="p">;</span>          <span class="cm">/* tells us where we are in the PNG file */</span>
<a name="gbab-178"></a>   <span class="n">png_uint_32</span> <span class="n">flags</span><span class="p">;</span>         <span class="cm">/* flags indicating various things to libpng */</span>
<a name="gbab-179"></a>   <span class="n">png_uint_32</span> <span class="n">transformations</span><span class="p">;</span> <span class="cm">/* which transformations to perform */</span>
<a name="gbab-180"></a>
<a name="gbab-181"></a>   <span class="n">png_uint_32</span> <span class="n">zowner</span><span class="p">;</span>        <span class="cm">/* ID (chunk type) of zstream owner, 0 if none */</span>
<a name="gbab-182"></a>   <span class="n">z_stream</span>    <span class="n">zstream</span><span class="p">;</span>       <span class="cm">/* decompression structure */</span>
<a name="gbab-183"></a>
<a name="gbab-184"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-185"></a>   <span class="n">png_compression_bufferp</span> <span class="n">zbuffer_list</span><span class="p">;</span> <span class="cm">/* Created on demand during write */</span>
<a name="gbab-186"></a>   <span class="n">uInt</span>                    <span class="n">zbuffer_size</span><span class="p">;</span> <span class="cm">/* size of the actual buffer */</span>
<a name="gbab-187"></a>
<a name="gbab-188"></a>   <span class="kt">int</span> <span class="n">zlib_level</span><span class="p">;</span>            <span class="cm">/* holds zlib compression level */</span>
<a name="gbab-189"></a>   <span class="kt">int</span> <span class="n">zlib_method</span><span class="p">;</span>           <span class="cm">/* holds zlib compression method */</span>
<a name="gbab-190"></a>   <span class="kt">int</span> <span class="n">zlib_window_bits</span><span class="p">;</span>      <span class="cm">/* holds zlib compression window bits */</span>
<a name="gbab-191"></a>   <span class="kt">int</span> <span class="n">zlib_mem_level</span><span class="p">;</span>        <span class="cm">/* holds zlib compression memory level */</span>
<a name="gbab-192"></a>   <span class="kt">int</span> <span class="n">zlib_strategy</span><span class="p">;</span>         <span class="cm">/* holds zlib compression strategy */</span>
<a name="gbab-193"></a><span class="cp">#endif</span>
<a name="gbab-194"></a><span class="cm">/* Added at libpng 1.5.4 */</span>
<a name="gbab-195"></a><span class="cp">#ifdef PNG_WRITE_CUSTOMIZE_ZTXT_COMPRESSION_SUPPORTED</span>
<a name="gbab-196"></a>   <span class="kt">int</span> <span class="n">zlib_text_level</span><span class="p">;</span>            <span class="cm">/* holds zlib compression level */</span>
<a name="gbab-197"></a>   <span class="kt">int</span> <span class="n">zlib_text_method</span><span class="p">;</span>           <span class="cm">/* holds zlib compression method */</span>
<a name="gbab-198"></a>   <span class="kt">int</span> <span class="n">zlib_text_window_bits</span><span class="p">;</span>      <span class="cm">/* holds zlib compression window bits */</span>
<a name="gbab-199"></a>   <span class="kt">int</span> <span class="n">zlib_text_mem_level</span><span class="p">;</span>        <span class="cm">/* holds zlib compression memory level */</span>
<a name="gbab-200"></a>   <span class="kt">int</span> <span class="n">zlib_text_strategy</span><span class="p">;</span>         <span class="cm">/* holds zlib compression strategy */</span>
<a name="gbab-201"></a><span class="cp">#endif</span>
<a name="gbab-202"></a><span class="cm">/* End of material added at libpng 1.5.4 */</span>
<a name="gbab-203"></a><span class="cm">/* Added at libpng 1.6.0 */</span>
<a name="gbab-204"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-205"></a>   <span class="kt">int</span> <span class="n">zlib_set_level</span><span class="p">;</span>        <span class="cm">/* Actual values set into the zstream on write */</span>
<a name="gbab-206"></a>   <span class="kt">int</span> <span class="n">zlib_set_method</span><span class="p">;</span>
<a name="gbab-207"></a>   <span class="kt">int</span> <span class="n">zlib_set_window_bits</span><span class="p">;</span>
<a name="gbab-208"></a>   <span class="kt">int</span> <span class="n">zlib_set_mem_level</span><span class="p">;</span>
<a name="gbab-209"></a>   <span class="kt">int</span> <span class="n">zlib_set_strategy</span><span class="p">;</span>
<a name="gbab-210"></a><span class="cp">#endif</span>
<a name="gbab-211"></a>
<a name="gbab-212"></a>   <span class="n">png_uint_32</span> <span class="n">width</span><span class="p">;</span>         <span class="cm">/* width of image in pixels */</span>
<a name="gbab-213"></a>   <span class="n">png_uint_32</span> <span class="n">height</span><span class="p">;</span>        <span class="cm">/* height of image in pixels */</span>
<a name="gbab-214"></a>   <span class="n">png_uint_32</span> <span class="n">num_rows</span><span class="p">;</span>      <span class="cm">/* number of rows in current pass */</span>
<a name="gbab-215"></a>   <span class="n">png_uint_32</span> <span class="n">usr_width</span><span class="p">;</span>     <span class="cm">/* width of row at start of write */</span>
<a name="gbab-216"></a>   <span class="n">png_size_t</span> <span class="n">rowbytes</span><span class="p">;</span>       <span class="cm">/* size of row in bytes */</span>
<a name="gbab-217"></a>   <span class="n">png_uint_32</span> <span class="n">iwidth</span><span class="p">;</span>        <span class="cm">/* width of current interlaced row in pixels */</span>
<a name="gbab-218"></a>   <span class="n">png_uint_32</span> <span class="n">row_number</span><span class="p">;</span>    <span class="cm">/* current row in interlace pass */</span>
<a name="gbab-219"></a>   <span class="n">png_uint_32</span> <span class="n">chunk_name</span><span class="p">;</span>    <span class="cm">/* PNG_CHUNK() id of current chunk */</span>
<a name="gbab-220"></a>   <span class="n">png_bytep</span> <span class="n">prev_row</span><span class="p">;</span>        <span class="cm">/* buffer to save previous (unfiltered) row.</span>
<a name="gbab-221"></a><span class="cm">                               * While reading this is a pointer into</span>
<a name="gbab-222"></a><span class="cm">                               * big_prev_row; while writing it is separately</span>
<a name="gbab-223"></a><span class="cm">                               * allocated if needed.</span>
<a name="gbab-224"></a><span class="cm">                               */</span>
<a name="gbab-225"></a>   <span class="n">png_bytep</span> <span class="n">row_buf</span><span class="p">;</span>         <span class="cm">/* buffer to save current (unfiltered) row.</span>
<a name="gbab-226"></a><span class="cm">                               * While reading, this is a pointer into</span>
<a name="gbab-227"></a><span class="cm">                               * big_row_buf; while writing it is separately</span>
<a name="gbab-228"></a><span class="cm">                               * allocated.</span>
<a name="gbab-229"></a><span class="cm">                               */</span>
<a name="gbab-230"></a><span class="cp">#ifdef PNG_WRITE_FILTER_SUPPORTED</span>
<a name="gbab-231"></a>   <span class="n">png_bytep</span> <span class="n">try_row</span><span class="p">;</span>    <span class="cm">/* buffer to save trial row when filtering */</span>
<a name="gbab-232"></a>   <span class="n">png_bytep</span> <span class="n">tst_row</span><span class="p">;</span>    <span class="cm">/* buffer to save best trial row when filtering */</span>
<a name="gbab-233"></a><span class="cp">#endif</span>
<a name="gbab-234"></a>   <span class="n">png_size_t</span> <span class="n">info_rowbytes</span><span class="p">;</span>  <span class="cm">/* Added in 1.5.4: cache of updated row bytes */</span>
<a name="gbab-235"></a>
<a name="gbab-236"></a>   <span class="n">png_uint_32</span> <span class="n">idat_size</span><span class="p">;</span>     <span class="cm">/* current IDAT size for read */</span>
<a name="gbab-237"></a>   <span class="n">png_uint_32</span> <span class="n">crc</span><span class="p">;</span>           <span class="cm">/* current chunk CRC value */</span>
<a name="gbab-238"></a>   <span class="n">png_colorp</span> <span class="n">palette</span><span class="p">;</span>        <span class="cm">/* palette from the input file */</span>
<a name="gbab-239"></a>   <span class="n">png_uint_16</span> <span class="n">num_palette</span><span class="p">;</span>   <span class="cm">/* number of color entries in palette */</span>
<a name="gbab-240"></a>
<a name="gbab-241"></a><span class="cm">/* Added at libpng-1.5.10 */</span>
<a name="gbab-242"></a><span class="cp">#ifdef PNG_CHECK_FOR_INVALID_INDEX_SUPPORTED</span>
<a name="gbab-243"></a>   <span class="kt">int</span> <span class="n">num_palette_max</span><span class="p">;</span>       <span class="cm">/* maximum palette index found in IDAT */</span>
<a name="gbab-244"></a><span class="cp">#endif</span>
<a name="gbab-245"></a>
<a name="gbab-246"></a>   <span class="n">png_uint_16</span> <span class="n">num_trans</span><span class="p">;</span>     <span class="cm">/* number of transparency values */</span>
<a name="gbab-247"></a>   <span class="n">png_byte</span> <span class="n">compression</span><span class="p">;</span>      <span class="cm">/* file compression type (always 0) */</span>
<a name="gbab-248"></a>   <span class="n">png_byte</span> <span class="n">filter</span><span class="p">;</span>           <span class="cm">/* file filter type (always 0) */</span>
<a name="gbab-249"></a>   <span class="n">png_byte</span> <span class="n">interlaced</span><span class="p">;</span>       <span class="cm">/* PNG_INTERLACE_NONE, PNG_INTERLACE_ADAM7 */</span>
<a name="gbab-250"></a>   <span class="n">png_byte</span> <span class="n">pass</span><span class="p">;</span>             <span class="cm">/* current interlace pass (0 - 6) */</span>
<a name="gbab-251"></a>   <span class="n">png_byte</span> <span class="n">do_filter</span><span class="p">;</span>        <span class="cm">/* row filter flags (see PNG_FILTER_ below ) */</span>
<a name="gbab-252"></a>   <span class="n">png_byte</span> <span class="n">color_type</span><span class="p">;</span>       <span class="cm">/* color type of file */</span>
<a name="gbab-253"></a>   <span class="n">png_byte</span> <span class="n">bit_depth</span><span class="p">;</span>        <span class="cm">/* bit depth of file */</span>
<a name="gbab-254"></a>   <span class="n">png_byte</span> <span class="n">usr_bit_depth</span><span class="p">;</span>    <span class="cm">/* bit depth of users row: write only */</span>
<a name="gbab-255"></a>   <span class="n">png_byte</span> <span class="n">pixel_depth</span><span class="p">;</span>      <span class="cm">/* number of bits per pixel */</span>
<a name="gbab-256"></a>   <span class="n">png_byte</span> <span class="n">channels</span><span class="p">;</span>         <span class="cm">/* number of channels in file */</span>
<a name="gbab-257"></a><span class="cp">#ifdef PNG_WRITE_SUPPORTED</span>
<a name="gbab-258"></a>   <span class="n">png_byte</span> <span class="n">usr_channels</span><span class="p">;</span>     <span class="cm">/* channels at start of write: write only */</span>
<a name="gbab-259"></a><span class="cp">#endif</span>
<a name="gbab-260"></a>   <span class="n">png_byte</span> <span class="n">sig_bytes</span><span class="p">;</span>        <span class="cm">/* magic bytes read/written from start of file */</span>
<a name="gbab-261"></a>   <span class="n">png_byte</span> <span class="n">maximum_pixel_depth</span><span class="p">;</span>
<a name="gbab-262"></a>                              <span class="cm">/* pixel depth used for the row buffers */</span>
<a name="gbab-263"></a>   <span class="n">png_byte</span> <span class="n">transformed_pixel_depth</span><span class="p">;</span>
<a name="gbab-264"></a>                              <span class="cm">/* pixel depth after read/write transforms */</span>
<a name="gbab-265"></a><span class="cp">#if PNG_ZLIB_VERNUM &gt;= 0x1240</span>
<a name="gbab-266"></a>   <span class="n">png_byte</span> <span class="n">zstream_start</span><span class="p">;</span>    <span class="cm">/* at start of an input zlib stream */</span>
<a name="gbab-267"></a><span class="cp">#endif </span><span class="cm">/* Zlib &gt;= 1.2.4 */</span><span class="cp"></span>
<a name="gbab-268"></a><span class="cp">#if defined(PNG_READ_FILLER_SUPPORTED) || defined(PNG_WRITE_FILLER_SUPPORTED)</span>
<a name="gbab-269"></a>   <span class="n">png_uint_16</span> <span class="n">filler</span><span class="p">;</span>           <span class="cm">/* filler bytes for pixel expansion */</span>
<a name="gbab-270"></a><span class="cp">#endif</span>
<a name="gbab-271"></a>
<a name="gbab-272"></a><span class="cp">#if defined(PNG_bKGD_SUPPORTED) || defined(PNG_READ_BACKGROUND_SUPPORTED) ||\</span>
<a name="gbab-273"></a><span class="cp">   defined(PNG_READ_ALPHA_MODE_SUPPORTED)</span>
<a name="gbab-274"></a>   <span class="n">png_byte</span> <span class="n">background_gamma_type</span><span class="p">;</span>
<a name="gbab-275"></a>   <span class="n">png_fixed_point</span> <span class="n">background_gamma</span><span class="p">;</span>
<a name="gbab-276"></a>   <span class="n">png_color_16</span> <span class="n">background</span><span class="p">;</span>   <span class="cm">/* background color in screen gamma space */</span>
<a name="gbab-277"></a><span class="cp">#ifdef PNG_READ_GAMMA_SUPPORTED</span>
<a name="gbab-278"></a>   <span class="n">png_color_16</span> <span class="n">background_1</span><span class="p">;</span> <span class="cm">/* background normalized to gamma 1.0 */</span>
<a name="gbab-279"></a><span class="cp">#endif</span>
<a name="gbab-280"></a><span class="cp">#endif </span><span class="cm">/* bKGD */</span><span class="cp"></span>
<a name="gbab-281"></a>
<a name="gbab-282"></a><span class="cp">#ifdef PNG_WRITE_FLUSH_SUPPORTED</span>
<a name="gbab-283"></a>   <span class="n">png_flush_ptr</span> <span class="n">output_flush_fn</span><span class="p">;</span> <span class="cm">/* Function for flushing output */</span>
<a name="gbab-284"></a>   <span class="n">png_uint_32</span> <span class="n">flush_dist</span><span class="p">;</span>    <span class="cm">/* how many rows apart to flush, 0 - no flush */</span>
<a name="gbab-285"></a>   <span class="n">png_uint_32</span> <span class="n">flush_rows</span><span class="p">;</span>    <span class="cm">/* number of rows written since last flush */</span>
<a name="gbab-286"></a><span class="cp">#endif</span>
<a name="gbab-287"></a>
<a name="gbab-288"></a><span class="cp">#ifdef PNG_READ_GAMMA_SUPPORTED</span>
<a name="gbab-289"></a>   <span class="kt">int</span> <span class="n">gamma_shift</span><span class="p">;</span>      <span class="cm">/* number of &quot;insignificant&quot; bits in 16-bit gamma */</span>
<a name="gbab-290"></a>   <span class="n">png_fixed_point</span> <span class="n">screen_gamma</span><span class="p">;</span> <span class="cm">/* screen gamma value (display_exponent) */</span>
<a name="gbab-291"></a>
<a name="gbab-292"></a>   <span class="n">png_bytep</span> <span class="n">gamma_table</span><span class="p">;</span>     <span class="cm">/* gamma table for 8-bit depth files */</span>
<a name="gbab-293"></a>   <span class="n">png_uint_16pp</span> <span class="n">gamma_16_table</span><span class="p">;</span> <span class="cm">/* gamma table for 16-bit depth files */</span>
<a name="gbab-294"></a><span class="cp">#if defined(PNG_READ_BACKGROUND_SUPPORTED) || \</span>
<a name="gbab-295"></a><span class="cp">   defined(PNG_READ_ALPHA_MODE_SUPPORTED) || \</span>
<a name="gbab-296"></a><span class="cp">   defined(PNG_READ_RGB_TO_GRAY_SUPPORTED)</span>
<a name="gbab-297"></a>   <span class="n">png_bytep</span> <span class="n">gamma_from_1</span><span class="p">;</span>    <span class="cm">/* converts from 1.0 to screen */</span>
<a name="gbab-298"></a>   <span class="n">png_bytep</span> <span class="n">gamma_to_1</span><span class="p">;</span>      <span class="cm">/* converts from file to 1.0 */</span>
<a name="gbab-299"></a>   <span class="n">png_uint_16pp</span> <span class="n">gamma_16_from_1</span><span class="p">;</span> <span class="cm">/* converts from 1.0 to screen */</span>
<a name="gbab-300"></a>   <span class="n">png_uint_16pp</span> <span class="n">gamma_16_to_1</span><span class="p">;</span> <span class="cm">/* converts from file to 1.0 */</span>
<a name="gbab-301"></a><span class="cp">#endif </span><span class="cm">/* READ_BACKGROUND || READ_ALPHA_MODE || RGB_TO_GRAY */</span><span class="cp"></span>
<a name="gbab-302"></a><span class="cp">#endif</span>
<a name="gbab-303"></a>
<a name="gbab-304"></a><span class="cp">#if defined(PNG_READ_GAMMA_SUPPORTED) || defined(PNG_sBIT_SUPPORTED)</span>
<a name="gbab-305"></a>   <span class="n">png_color_8</span> <span class="n">sig_bit</span><span class="p">;</span>       <span class="cm">/* significant bits in each available channel */</span>
<a name="gbab-306"></a><span class="cp">#endif</span>
<a name="gbab-307"></a>
<a name="gbab-308"></a><span class="cp">#if defined(PNG_READ_SHIFT_SUPPORTED) || defined(PNG_WRITE_SHIFT_SUPPORTED)</span>
<a name="gbab-309"></a>   <span class="n">png_color_8</span> <span class="n">shift</span><span class="p">;</span>         <span class="cm">/* shift for significant bit tranformation */</span>
<a name="gbab-310"></a><span class="cp">#endif</span>
<a name="gbab-311"></a>
<a name="gbab-312"></a><span class="cp">#if defined(PNG_tRNS_SUPPORTED) || defined(PNG_READ_BACKGROUND_SUPPORTED) \</span>
<a name="gbab-313"></a><span class="cp"> || defined(PNG_READ_EXPAND_SUPPORTED) || defined(PNG_READ_BACKGROUND_SUPPORTED)</span>
<a name="gbab-314"></a>   <span class="n">png_bytep</span> <span class="n">trans_alpha</span><span class="p">;</span>           <span class="cm">/* alpha values for paletted files */</span>
<a name="gbab-315"></a>   <span class="n">png_color_16</span> <span class="n">trans_color</span><span class="p">;</span>  <span class="cm">/* transparent color for non-paletted files */</span>
<a name="gbab-316"></a><span class="cp">#endif</span>
<a name="gbab-317"></a>
<a name="gbab-318"></a>   <span class="n">png_read_status_ptr</span> <span class="n">read_row_fn</span><span class="p">;</span>   <span class="cm">/* called after each row is decoded */</span>
<a name="gbab-319"></a>   <span class="n">png_write_status_ptr</span> <span class="n">write_row_fn</span><span class="p">;</span> <span class="cm">/* called after each row is encoded */</span>
<a name="gbab-320"></a><span class="cp">#ifdef PNG_PROGRESSIVE_READ_SUPPORTED</span>
<a name="gbab-321"></a>   <span class="n">png_progressive_info_ptr</span> <span class="n">info_fn</span><span class="p">;</span> <span class="cm">/* called after header data fully read */</span>
<a name="gbab-322"></a>   <span class="n">png_progressive_row_ptr</span> <span class="n">row_fn</span><span class="p">;</span>   <span class="cm">/* called after a prog. row is decoded */</span>
<a name="gbab-323"></a>   <span class="n">png_progressive_end_ptr</span> <span class="n">end_fn</span><span class="p">;</span>   <span class="cm">/* called after image is complete */</span>
<a name="gbab-324"></a>   <span class="n">png_bytep</span> <span class="n">save_buffer_ptr</span><span class="p">;</span>        <span class="cm">/* current location in save_buffer */</span>
<a name="gbab-325"></a>   <span class="n">png_bytep</span> <span class="n">save_buffer</span><span class="p">;</span>            <span class="cm">/* buffer for previously read data */</span>
<a name="gbab-326"></a>   <span class="n">png_bytep</span> <span class="n">current_buffer_ptr</span><span class="p">;</span>     <span class="cm">/* current location in current_buffer */</span>
<a name="gbab-327"></a>   <span class="n">png_bytep</span> <span class="n">current_buffer</span><span class="p">;</span>         <span class="cm">/* buffer for recently used data */</span>
<a name="gbab-328"></a>   <span class="n">png_uint_32</span> <span class="n">push_length</span><span class="p">;</span>          <span class="cm">/* size of current input chunk */</span>
<a name="gbab-329"></a>   <span class="n">png_uint_32</span> <span class="n">skip_length</span><span class="p">;</span>          <span class="cm">/* bytes to skip in input data */</span>
<a name="gbab-330"></a>   <span class="n">png_size_t</span> <span class="n">save_buffer_size</span><span class="p">;</span>      <span class="cm">/* amount of data now in save_buffer */</span>
<a name="gbab-331"></a>   <span class="n">png_size_t</span> <span class="n">save_buffer_max</span><span class="p">;</span>       <span class="cm">/* total size of save_buffer */</span>
<a name="gbab-332"></a>   <span class="n">png_size_t</span> <span class="n">buffer_size</span><span class="p">;</span>           <span class="cm">/* total amount of available input data */</span>
<a name="gbab-333"></a>   <span class="n">png_size_t</span> <span class="n">current_buffer_size</span><span class="p">;</span>   <span class="cm">/* amount of data now in current_buffer */</span>
<a name="gbab-334"></a>   <span class="kt">int</span> <span class="n">process_mode</span><span class="p">;</span>                 <span class="cm">/* what push library is currently doing */</span>
<a name="gbab-335"></a>   <span class="kt">int</span> <span class="n">cur_palette</span><span class="p">;</span>                  <span class="cm">/* current push library palette index */</span>
<a name="gbab-336"></a>
<a name="gbab-337"></a><span class="cp">#endif </span><span class="cm">/* PROGRESSIVE_READ */</span><span class="cp"></span>
<a name="gbab-338"></a>
<a name="gbab-339"></a><span class="cp">#if defined(__TURBOC__) &amp;&amp; !defined(_Windows) &amp;&amp; !defined(__FLAT__)</span>
<a name="gbab-340"></a><span class="cm">/* For the Borland special 64K segment handler */</span>
<a name="gbab-341"></a>   <span class="n">png_bytepp</span> <span class="n">offset_table_ptr</span><span class="p">;</span>
<a name="gbab-342"></a>   <span class="n">png_bytep</span> <span class="n">offset_table</span><span class="p">;</span>
<a name="gbab-343"></a>   <span class="n">png_uint_16</span> <span class="n">offset_table_number</span><span class="p">;</span>
<a name="gbab-344"></a>   <span class="n">png_uint_16</span> <span class="n">offset_table_count</span><span class="p">;</span>
<a name="gbab-345"></a>   <span class="n">png_uint_16</span> <span class="n">offset_table_count_free</span><span class="p">;</span>
<a name="gbab-346"></a><span class="cp">#endif</span>
<a name="gbab-347"></a>
<a name="gbab-348"></a><span class="cp">#ifdef PNG_READ_QUANTIZE_SUPPORTED</span>
<a name="gbab-349"></a>   <span class="n">png_bytep</span> <span class="n">palette_lookup</span><span class="p">;</span> <span class="cm">/* lookup table for quantizing */</span>
<a name="gbab-350"></a>   <span class="n">png_bytep</span> <span class="n">quantize_index</span><span class="p">;</span> <span class="cm">/* index translation for palette files */</span>
<a name="gbab-351"></a><span class="cp">#endif</span>
<a name="gbab-352"></a>
<a name="gbab-353"></a><span class="cm">/* Options */</span>
<a name="gbab-354"></a><span class="cp">#ifdef PNG_SET_OPTION_SUPPORTED</span>
<a name="gbab-355"></a>   <span class="n">png_byte</span> <span class="n">options</span><span class="p">;</span>           <span class="cm">/* On/off state (up to 4 options) */</span>
<a name="gbab-356"></a><span class="cp">#endif</span>
<a name="gbab-357"></a>
<a name="gbab-358"></a><span class="cp">#if PNG_LIBPNG_VER &lt; 10700</span>
<a name="gbab-359"></a><span class="cm">/* To do: remove this from libpng-1.7 */</span>
<a name="gbab-360"></a><span class="cp">#ifdef PNG_TIME_RFC1123_SUPPORTED</span>
<a name="gbab-361"></a>   <span class="kt">char</span> <span class="n">time_buffer</span><span class="p">[</span><span class="mi">29</span><span class="p">];</span> <span class="cm">/* String to hold RFC 1123 time text */</span>
<a name="gbab-362"></a><span class="cp">#endif</span>
<a name="gbab-363"></a><span class="cp">#endif</span>
<a name="gbab-364"></a>
<a name="gbab-365"></a><span class="cm">/* New members added in libpng-1.0.6 */</span>
<a name="gbab-366"></a>
<a name="gbab-367"></a>   <span class="n">png_uint_32</span> <span class="n">free_me</span><span class="p">;</span>    <span class="cm">/* flags items libpng is responsible for freeing */</span>
<a name="gbab-368"></a>
<a name="gbab-369"></a><span class="cp">#ifdef PNG_USER_CHUNKS_SUPPORTED</span>
<a name="gbab-370"></a>   <span class="n">png_voidp</span> <span class="n">user_chunk_ptr</span><span class="p">;</span>
<a name="gbab-371"></a><span class="cp">#ifdef PNG_READ_USER_CHUNKS_SUPPORTED</span>
<a name="gbab-372"></a>   <span class="n">png_user_chunk_ptr</span> <span class="n">read_user_chunk_fn</span><span class="p">;</span> <span class="cm">/* user read chunk handler */</span>
<a name="gbab-373"></a><span class="cp">#endif</span>
<a name="gbab-374"></a><span class="cp">#endif</span>
<a name="gbab-375"></a>
<a name="gbab-376"></a><span class="cp">#ifdef PNG_SET_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-377"></a>   <span class="kt">int</span>          <span class="n">unknown_default</span><span class="p">;</span> <span class="cm">/* As PNG_HANDLE_* */</span>
<a name="gbab-378"></a>   <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">num_chunk_list</span><span class="p">;</span>  <span class="cm">/* Number of entries in the list */</span>
<a name="gbab-379"></a>   <span class="n">png_bytep</span>    <span class="n">chunk_list</span><span class="p">;</span>      <span class="cm">/* List of png_byte[5]; the textual chunk name</span>
<a name="gbab-380"></a><span class="cm">                                  * followed by a PNG_HANDLE_* byte */</span>
<a name="gbab-381"></a><span class="cp">#endif</span>
<a name="gbab-382"></a>
<a name="gbab-383"></a><span class="cm">/* New members added in libpng-1.0.3 */</span>
<a name="gbab-384"></a><span class="cp">#ifdef PNG_READ_RGB_TO_GRAY_SUPPORTED</span>
<a name="gbab-385"></a>   <span class="n">png_byte</span> <span class="n">rgb_to_gray_status</span><span class="p">;</span>
<a name="gbab-386"></a>   <span class="cm">/* Added in libpng 1.5.5 to record setting of coefficients: */</span>
<a name="gbab-387"></a>   <span class="n">png_byte</span> <span class="n">rgb_to_gray_coefficients_set</span><span class="p">;</span>
<a name="gbab-388"></a>   <span class="cm">/* These were changed from png_byte in libpng-1.0.6 */</span>
<a name="gbab-389"></a>   <span class="n">png_uint_16</span> <span class="n">rgb_to_gray_red_coeff</span><span class="p">;</span>
<a name="gbab-390"></a>   <span class="n">png_uint_16</span> <span class="n">rgb_to_gray_green_coeff</span><span class="p">;</span>
<a name="gbab-391"></a>   <span class="cm">/* deleted in 1.5.5: rgb_to_gray_blue_coeff; */</span>
<a name="gbab-392"></a><span class="cp">#endif</span>
<a name="gbab-393"></a>
<a name="gbab-394"></a><span class="cm">/* New member added in libpng-1.0.4 (renamed in 1.0.9) */</span>
<a name="gbab-395"></a><span class="cp">#if defined(PNG_MNG_FEATURES_SUPPORTED)</span>
<a name="gbab-396"></a><span class="cm">/* Changed from png_byte to png_uint_32 at version 1.2.0 */</span>
<a name="gbab-397"></a>   <span class="n">png_uint_32</span> <span class="n">mng_features_permitted</span><span class="p">;</span>
<a name="gbab-398"></a><span class="cp">#endif</span>
<a name="gbab-399"></a>
<a name="gbab-400"></a><span class="cm">/* New member added in libpng-1.0.9, ifdef&#39;ed out in 1.0.12, enabled in 1.2.0 */</span>
<a name="gbab-401"></a><span class="cp">#ifdef PNG_MNG_FEATURES_SUPPORTED</span>
<a name="gbab-402"></a>   <span class="n">png_byte</span> <span class="n">filter_type</span><span class="p">;</span>
<a name="gbab-403"></a><span class="cp">#endif</span>
<a name="gbab-404"></a>
<a name="gbab-405"></a><span class="cm">/* New members added in libpng-1.2.0 */</span>
<a name="gbab-406"></a>
<a name="gbab-407"></a><span class="cm">/* New members added in libpng-1.0.2 but first enabled by default in 1.2.0 */</span>
<a name="gbab-408"></a><span class="cp">#ifdef PNG_USER_MEM_SUPPORTED</span>
<a name="gbab-409"></a>   <span class="n">png_voidp</span> <span class="n">mem_ptr</span><span class="p">;</span>             <span class="cm">/* user supplied struct for mem functions */</span>
<a name="gbab-410"></a>   <span class="n">png_malloc_ptr</span> <span class="n">malloc_fn</span><span class="p">;</span>      <span class="cm">/* function for allocating memory */</span>
<a name="gbab-411"></a>   <span class="n">png_free_ptr</span> <span class="n">free_fn</span><span class="p">;</span>          <span class="cm">/* function for freeing memory */</span>
<a name="gbab-412"></a><span class="cp">#endif</span>
<a name="gbab-413"></a>
<a name="gbab-414"></a><span class="cm">/* New member added in libpng-1.0.13 and 1.2.0 */</span>
<a name="gbab-415"></a>   <span class="n">png_bytep</span> <span class="n">big_row_buf</span><span class="p">;</span>         <span class="cm">/* buffer to save current (unfiltered) row */</span>
<a name="gbab-416"></a>
<a name="gbab-417"></a><span class="cp">#ifdef PNG_READ_QUANTIZE_SUPPORTED</span>
<a name="gbab-418"></a><span class="cm">/* The following three members were added at version 1.0.14 and 1.2.4 */</span>
<a name="gbab-419"></a>   <span class="n">png_bytep</span> <span class="n">quantize_sort</span><span class="p">;</span>          <span class="cm">/* working sort array */</span>
<a name="gbab-420"></a>   <span class="n">png_bytep</span> <span class="n">index_to_palette</span><span class="p">;</span>       <span class="cm">/* where the original index currently is</span>
<a name="gbab-421"></a><span class="cm">                                        in the palette */</span>
<a name="gbab-422"></a>   <span class="n">png_bytep</span> <span class="n">palette_to_index</span><span class="p">;</span>       <span class="cm">/* which original index points to this</span>
<a name="gbab-423"></a><span class="cm">                                         palette color */</span>
<a name="gbab-424"></a><span class="cp">#endif</span>
<a name="gbab-425"></a>
<a name="gbab-426"></a><span class="cm">/* New members added in libpng-1.0.16 and 1.2.6 */</span>
<a name="gbab-427"></a>   <span class="n">png_byte</span> <span class="n">compression_type</span><span class="p">;</span>
<a name="gbab-428"></a>
<a name="gbab-429"></a><span class="cp">#ifdef PNG_USER_LIMITS_SUPPORTED</span>
<a name="gbab-430"></a>   <span class="n">png_uint_32</span> <span class="n">user_width_max</span><span class="p">;</span>
<a name="gbab-431"></a>   <span class="n">png_uint_32</span> <span class="n">user_height_max</span><span class="p">;</span>
<a name="gbab-432"></a>
<a name="gbab-433"></a>   <span class="cm">/* Added in libpng-1.4.0: Total number of sPLT, text, and unknown</span>
<a name="gbab-434"></a><span class="cm">    * chunks that can be stored (0 means unlimited).</span>
<a name="gbab-435"></a><span class="cm">    */</span>
<a name="gbab-436"></a>   <span class="n">png_uint_32</span> <span class="n">user_chunk_cache_max</span><span class="p">;</span>
<a name="gbab-437"></a>
<a name="gbab-438"></a>   <span class="cm">/* Total memory that a zTXt, sPLT, iTXt, iCCP, or unknown chunk</span>
<a name="gbab-439"></a><span class="cm">    * can occupy when decompressed.  0 means unlimited.</span>
<a name="gbab-440"></a><span class="cm">    */</span>
<a name="gbab-441"></a>   <span class="n">png_alloc_size_t</span> <span class="n">user_chunk_malloc_max</span><span class="p">;</span>
<a name="gbab-442"></a><span class="cp">#endif</span>
<a name="gbab-443"></a>
<a name="gbab-444"></a><span class="cm">/* New member added in libpng-1.0.25 and 1.2.17 */</span>
<a name="gbab-445"></a><span class="cp">#ifdef PNG_READ_UNKNOWN_CHUNKS_SUPPORTED</span>
<a name="gbab-446"></a>   <span class="cm">/* Temporary storage for unknown chunk that the library doesn&#39;t recognize,</span>
<a name="gbab-447"></a><span class="cm">    * used while reading the chunk.</span>
<a name="gbab-448"></a><span class="cm">    */</span>
<a name="gbab-449"></a>   <span class="n">png_unknown_chunk</span> <span class="n">unknown_chunk</span><span class="p">;</span>
<a name="gbab-450"></a><span class="cp">#endif</span>
<a name="gbab-451"></a>
<a name="gbab-452"></a><span class="cm">/* New member added in libpng-1.2.26 */</span>
<a name="gbab-453"></a>  <span class="n">png_size_t</span> <span class="n">old_big_row_buf_size</span><span class="p">;</span>
<a name="gbab-454"></a>
<a name="gbab-455"></a><span class="cp">#ifdef PNG_READ_SUPPORTED</span>
<a name="gbab-456"></a><span class="cm">/* New member added in libpng-1.2.30 */</span>
<a name="gbab-457"></a>  <span class="n">png_bytep</span>        <span class="n">read_buffer</span><span class="p">;</span>      <span class="cm">/* buffer for reading chunk data */</span>
<a name="gbab-458"></a>  <span class="n">png_alloc_size_t</span> <span class="n">read_buffer_size</span><span class="p">;</span> <span class="cm">/* current size of the buffer */</span>
<a name="gbab-459"></a><span class="cp">#endif</span>
<a name="gbab-460"></a><span class="cp">#ifdef PNG_SEQUENTIAL_READ_SUPPORTED</span>
<a name="gbab-461"></a>  <span class="n">uInt</span>             <span class="n">IDAT_read_size</span><span class="p">;</span>   <span class="cm">/* limit on read buffer size for IDAT */</span>
<a name="gbab-462"></a><span class="cp">#endif</span>
<a name="gbab-463"></a>
<a name="gbab-464"></a><span class="cp">#ifdef PNG_IO_STATE_SUPPORTED</span>
<a name="gbab-465"></a><span class="cm">/* New member added in libpng-1.4.0 */</span>
<a name="gbab-466"></a>   <span class="n">png_uint_32</span> <span class="n">io_state</span><span class="p">;</span>
<a name="gbab-467"></a><span class="cp">#endif</span>
<a name="gbab-468"></a>
<a name="gbab-469"></a><span class="cm">/* New member added in libpng-1.5.6 */</span>
<a name="gbab-470"></a>   <span class="n">png_bytep</span> <span class="n">big_prev_row</span><span class="p">;</span>
<a name="gbab-471"></a>
<a name="gbab-472"></a><span class="cm">/* New member added in libpng-1.5.7 */</span>
<a name="gbab-473"></a>   <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">read_filter</span><span class="p">[</span><span class="n">PNG_FILTER_VALUE_LAST</span><span class="o">-</span><span class="mi">1</span><span class="p">])(</span><span class="n">png_row_infop</span> <span class="n">row_info</span><span class="p">,</span>
<a name="gbab-474"></a>      <span class="n">png_bytep</span> <span class="n">row</span><span class="p">,</span> <span class="n">png_const_bytep</span> <span class="n">prev_row</span><span class="p">);</span>
<a name="gbab-475"></a>
<a name="gbab-476"></a><span class="cp">#ifdef PNG_READ_SUPPORTED</span>
<a name="gbab-477"></a><span class="cp">#if defined(PNG_COLORSPACE_SUPPORTED) || defined(PNG_GAMMA_SUPPORTED)</span>
<a name="gbab-478"></a>   <span class="n">png_colorspace</span>   <span class="n">colorspace</span><span class="p">;</span>
<a name="gbab-479"></a><span class="cp">#endif</span>
<a name="gbab-480"></a><span class="cp">#endif</span>
<a name="gbab-481"></a><span class="p">};</span>
<a name="gbab-482"></a><span class="cp">#endif </span><span class="cm">/* PNGSTRUCT_H */</span><span class="cp"></span>
</pre></div>
</td></tr></table>